var cytoscape;(function(){var e=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};e.init=function(t){if(t===undefined){t={}}if(e.is.plainObject(t)){return new e.Core(t)}else{if(e.is.string(t)){return e.extension.apply(e.extension,arguments)}}};e.fn={};if(typeof exports!=="undefined"){exports=module.exports=cytoscape}window.cytoscape=cytoscape})();(function(e){e.is={string:function(e){return e!=null&&typeof e==typeof ""},fn:function(e){return e!=null&&typeof e===typeof function(){}},array:function(e){return e!=null&&e instanceof Array},plainObject:function(t){return t!=null&&typeof t===typeof {}&&!e.is.array(t)&&t.constructor===Object},number:function(e){return e!=null&&typeof e===typeof 1&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return e!=null&&typeof e===typeof ""&&$.Color(e).toString()!==""},bool:function(e){return e!=null&&typeof e===typeof true},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},emptyString:function(t){if(!t){return true}else{if(e.is.string(t)){if(t===""||t.match(/^\s+$/)){return true}}}return false},nonemptyString:function(t){if(t&&e.is.string(t)&&t!==""&&!t.match(/^\s+$/)){return true}return false},domElement:function(e){if(typeof HTMLElement==="undefined"){return false}else{return e instanceof HTMLElement}}}})(cytoscape);(function(e){e.util={extend:function(){var t,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=false;if(typeof u==="boolean"){l=u;u=arguments[1]||{};a=2}if(typeof u!=="object"&&!e.is.fn(u)){u={}}if(f===a){u=this;--a}for(;a<f;a++){if((t=arguments[a])!=null){for(n in t){r=u[n];i=t[n];if(u===i){continue}if(l&&i&&(e.is.plainObject(i)||(s=e.is.array(i)))){if(s){s=false;o=r&&e.is.array(r)?r:[]}else{o=r&&e.is.plainObject(r)?r:{}}u[n]=e.util.extend(l,o,i)}else{if(i!==undefined){u[n]=i}}}}}return u},error:function(e){if(console){if(console.error){console.error(e)}else{if(console.log){console.log(e)}else{throw e}}}else{throw e}},clone:function(e){var t={};for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return t},copy:function(t){if(t==null){return t}if(e.is.array(t)){return t.slice()}else{if(e.is.plainObject(t)){return e.util.clone(t)}else{return t}}},mapEmpty:function(e){var t=true;if(e!=null){for(var n in e){t=false;break}}return t},pushMap:function(t){var n=e.util.getMap(t);if(n==null){e.util.setMap($.extend({},t,{value:[t.value]}))}else{n.push(t.value)}},setMap:function(t){var n=t.map;var r;var i=t.keys;var s=i.length;for(var o=0;o<s;o++){var r=i[o];if(e.is.plainObject(r)){e.util.error("Tried to set map with object key")}if(o<i.length-1){if(n[r]==null){n[r]={}}n=n[r]}else{n[r]=t.value}}},getMap:function(t){var n=t.map;var r=t.keys;var i=r.length;for(var s=0;s<i;s++){var o=r[s];if(e.is.plainObject(o)){e.util.error("Tried to get map with object key")}n=n[o];if(n==null){return n}}return n},deleteMap:function(t){var n=t.map;var r=t.keys;var i=r.length;var s=t.keepChildren;for(var o=0;o<i;o++){var u=r[o];if(e.is.plainObject(u)){e.util.error("Tried to delete map with object key")}var a=o===t.keys.length-1;if(a){if(s){for(var f in n){if(!s[f]){delete n[f]}}}else{delete n[u]}}else{n=n[u]}}},capitalize:function(t){if(e.is.emptyString(t)){return t}return t.charAt(0).toUpperCase()+t.substring(1)},camel2dash:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];var i=r.toLowerCase();var s=r!==i;if(s){t.push("-");t.push(i)}else{t.push(r)}}var o=t.length===e.length;if(o){return e}return t.join("")},dash2camel:function(e){var t=[];var n=false;for(var r=0;r<e.length;r++){var i=e[r];var s=i==="-";if(s){n=true}else{if(n){t.push(i.toUpperCase())}else{t.push(i)}n=false}}return t.join("")},trim:function(e){var t,n;for(t=0;t<e.length&&e[t]===" ";t++){}for(n=e.length-1;n>t&&e[n]===" ";n--){}return e.substring(t,n+1)},hex2tuple:function(e){if(!(e.length===4||e.length===7)||e[0]!=="#"){return}var t=e.length===4;var n,r,i;var s=16;if(t){n=parseInt(e[1]+e[1],s);r=parseInt(e[2]+e[2],s);i=parseInt(e[3]+e[3],s)}else{n=parseInt(e[1]+e[2],s);r=parseInt(e[3]+e[4],s);i=parseInt(e[5]+e[6],s)}return[n,r,i]},hsl2tuple:function(t){var n;var r=e.util.regex.number;var i,s,o,u,a,f,l;var c=(new RegExp("^"+e.util.regex.hsla+"$")).exec(t);if(c){i=parseInt(c[1]);if(i<0){i=(360- -1*i%360)%360}else{if(i>360){i=i%360}}i/=360;s=parseFloat(c[2]);if(s<0||s>100){return}s=s/100;o=parseFloat(c[3]);if(o<0||o>100){return}o=o/100;u=c[4];if(u!==undefined){u=parseFloat(u);if(u<0||u>1){return}}if(s===0){a=f=l=Math.round(o*255)}else{function h(e,t,n){if(n<0){n+=1}if(n>1){n-=1}if(n<1/6){return e+(t-e)*6*n}if(n<1/2){return t}if(n<2/3){return e+(t-e)*(2/3-n)*6}return e}var p=o<.5?o*(1+s):o+s-o*s;var d=2*o-p;a=Math.round(255*h(d,p,i+1/3));f=Math.round(255*h(d,p,i));l=Math.round(255*h(d,p,i-1/3))}n=[a,f,l,u]}return n},rgb2tuple:function(t){var n;var r=e.util.regex.number;var i=(new RegExp("^"+e.util.regex.rgba+"$")).exec(t);if(i){n=[];var s=[];for(var o=1;o<=3;o++){var u=i[o];if(u[u.length-1]==="%"){s[o]=true}u=parseFloat(u);if(s[o]){u=u/100*255}if(u<0||u>255){return}n.push(Math.floor(u))}var a=s[1]||s[2]||s[3];var f=s[1]&&s[2]&&s[3];if(a&&!f){return}var l=i[4];if(l!==undefined){l=parseFloat(l);if(l<0||l>1){return}n.push(l)}}return n},colorname2tuple:function(t){return e.util.colors[t.toLowerCase()]},color2tuple:function(t){return e.util.colorname2tuple(t)||e.util.hex2tuple(t)||e.util.rgb2tuple(t)||e.util.hsl2tuple(t)},tuple2hex:function(e){function t(e){var t=e.toString(16);if(t.length===1){t="0"+t}return t}var n=e[0];var r=e[1];var i=e[2];return"#"+t(n)+t(r)+t(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}};e.util.regex={};e.util.regex.number="(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)";e.util.regex.rgba="rgb[a]?\\(("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)(?:\\s*,\\s*("+e.util.regex.number+"))?\\)";e.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)";e.util.regex.hsla="hsl[a]?\\(("+e.util.regex.number+")\\s*,\\s*("+e.util.regex.number+"[%])\\s*,\\s*("+e.util.regex.number+"[%])(?:\\s*,\\s*("+e.util.regex.number+"))?\\)";e.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+e.util.regex.number+")\\s*,\\s*(?:"+e.util.regex.number+"[%])\\s*,\\s*(?:"+e.util.regex.number+"[%])(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)";e.util.regex.hex3="\\#[0-9a-fA-F]{3}";e.util.regex.hex6="\\#[0-9a-fA-F]{6}"})(cytoscape);(function(e){e.math={};e.math.boxInBezierVicinity=function(e,t,n,r,i,s,o,u,a,f,l){var c=Math.min(e,n)-l;var h=Math.min(t,r)-l;var p=Math.max(e,n)+l;var d=Math.max(t,r)+l;if(i>=c&&i<=p&&s>=h&&s<=d){return 2}else{if(a>=c&&a<=p&&f>=h&&f<=d){return 2}else{if(o>=c&&o<=p&&u>=h&&u<=d){return 1}}}var v=Math.min(i,o,a);var m=Math.min(s,u,f);var g=Math.max(i,o,a);var y=Math.max(s,u,f);if(v>p||g<c||m>d||y<h){return 0}return 1};e.math.checkStraightEdgeCrossesBox=function(e,t,n,r,i,s,o,u,a){var f=Math.min(e,n)-a;var l=Math.min(t,r)-a;var c=Math.max(e,n)+a;var h=Math.max(t,r)+a;var p=o-i;var d=i;var v;var m=u-s;var g=s;var y;if(Math.abs(p)<1e-4){return i>=f&&i<=c&&Math.min(s,u)<=l&&Math.max(s,u)>=h}var b=(f-d)/p;if(b>0&&b<=1){v=m*b+g;if(v>=l&&v<=h){return true}}var w=(c-d)/p;if(w>0&&w<=1){v=m*w+g;if(v>=l&&v<=h){return true}}var E=(l-g)/m;if(E>0&&E<=1){y=p*E+d;if(y>=f&&y<=c){return true}}var S=(h-g)/m;if(S>0&&S<=1){y=p*S+d;if(y>=f&&y<=c){return true}}return false};e.math.checkBezierCrossesBox=function(e,t,n,r,i,s,o,u,a,f,l){var c=Math.min(e,n)-l;var h=Math.min(t,r)-l;var p=Math.max(e,n)+l;var d=Math.max(t,r)+l;if(i>=c&&i<=p&&s>=h&&s<=d){return true}else{if(a>=c&&a<=p&&f>=h&&f<=d){return true}}var v=i-2*o+a;var m=-2*i+2*o;var g=i;var y=[];if(Math.abs(v)<1e-4){var b=(c-i)/m;var w=(p-i)/m;y.push(b,w)}else{var E=m*m-4*v*(g-c);var S,x;if(E>0){var T=Math.sqrt(E);S=(-m+T)/(2*v);x=(-m-T)/(2*v);y.push(S,x)}var N=m*m-4*v*(g-p);var C,k;if(N>0){var T=Math.sqrt(N);C=(-m+T)/(2*v);k=(-m-T)/(2*v);y.push(C,k)}}y.sort(function(e,t){return e-t});var L=s-2*u+f;var A=-2*s+2*u;var O=s;var M=[];if(Math.abs(L)<1e-4){var _=(h-s)/A;var D=(d-s)/A;M.push(_,D)}else{var P=A*A-4*L*(O-h);var H,B;if(P>0){var T=Math.sqrt(P);H=(-A+T)/(2*L);B=(-A-T)/(2*L);M.push(H,B)}var j=A*A-4*L*(O-d);var F,I;if(j>0){var T=Math.sqrt(j);F=(-A+T)/(2*L);I=(-A-T)/(2*L);M.push(F,I)}}M.sort(function(e,t){return e-t});for(var q=0;q<y.length;q+=2){for(var R=1;R<M.length;R+=2){if(y[q]<M[R]&&M[R]>=0&&y[q]<=1&&y[q+1]>M[R-1]&&M[R-1]<=1&&y[q+1]>=0){return true}}}return false};e.math.inBezierVicinity=function(e,t,n,r,i,s,o,u,a){var f=.25*n+.5*i+.25*o;var l=.25*r+.5*s+.25*u;var c,h,p,d;var v,m,g;var y=function(e,t,n,r,i,s,o,u){v=(s-r)*(e-n)+(n-i)*(t-r);m=v*v;sideSquared=(s-r)*(s-r)+(n-i)*(n-i);if(u){if(v>0){return false}}else{if(v<0){return false}}return m/sideSquared>o};var b=(f+i)/2;var w=(l+s)/2;var E=true;if(y(b,w,n,r,i,s,0,E)){E=!E}return!y(e,t,n,r,i,s,a,E)&&!y(e,t,i,s,o,u,a,E)&&!y(e,t,o,u,n,r,a,E)};e.math.solveCubic=function(e,t,n,r,i){t/=e;n/=e;r/=e;var s,o,u,a,f,l,c,h;o=(3*n-t*t)/9;u=-(27*r)+t*(9*n-2*t*t);u/=54;s=o*o*o+u*u;i[1]=0;c=t/3;if(s>0){f=u+Math.sqrt(s);f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3);l=u-Math.sqrt(s);l=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3);i[0]=-c+f+l;c+=(f+l)/2;i[4]=i[2]=-c;c=Math.sqrt(3)*(-l+f)/2;i[3]=c;i[5]=-c;return}i[5]=i[3]=0;if(s==0){h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3);i[0]=-c+2*h;i[4]=i[2]=-(h+c);return}o=-o;a=o*o*o;a=Math.acos(u/Math.sqrt(a));h=2*Math.sqrt(o);i[0]=-c+h*Math.cos(a/3);i[2]=-c+h*Math.cos((a+2*Math.PI)/3);i[4]=-c+h*Math.cos((a+4*Math.PI)/3);return};e.math.sqDistanceToQuadraticBezier=function(e,n,r,i,s,o,u,a){var f=1*r*r-4*r*s+2*r*u+4*s*s-4*s*u+u*u+i*i-4*i*o+2*i*a+4*o*o-4*o*a+a*a;var l=1*9*r*s-3*r*r-3*r*u-6*s*s+3*s*u+9*i*o-3*i*i-3*i*a-6*o*o+3*o*a;var c=1*3*r*r-6*r*s+r*u-r*e+2*s*s+2*s*e-u*e+3*i*i-6*i*o+i*a-i*n+2*o*o+2*o*n-a*n;var h=1*r*s-r*r+r*e-s*e+i*o-i*i+i*n-o*n;t("coefficients: "+f/f+", "+l/f+", "+c/f+", "+h/f);var p=[];this.solveCubic(f,l,c,h,p);var d=1e-7;var v=[];for(var m=0;m<6;m+=2){if(Math.abs(p[m+1])<d&&p[m]>=0&&p[m]<=1){v.push(p[m])}}v.push(1);v.push(0);var g=-1;var y;var b,w,E;for(var S=0;S<v.length;S++){b=Math.pow(1-v[S],2)*r+2*(1-v[S])*v[S]*s+v[S]*v[S]*u;w=Math.pow(1-v[S],2)*i+2*(1-v[S])*v[S]*o+v[S]*v[S]*a;E=Math.pow(b-e,2)+Math.pow(w-n,2);t("distance for param "+v[S]+": "+Math.sqrt(E));if(g>=0){if(E<g){g=E;y=v[S]}}else{g=E;y=v[S]}}t("given: ( "+e+", "+n+"), ( "+r+", "+i+"), ( "+s+", "+o+"), ( "+u+", "+a+")");t("roots: "+p);t("params: "+v);t("closest param: "+y);return g};var t=function(e){if(false){console.log(e)}}})(cytoscape);(function(e){e.instances=[];e.instanceCounter=0;e.lastInstanceTime;e.registerInstance=function(t,n){var r;if(e.is.core(t)){r=t}else{if(e.is.domElement(t)){n=t}}var i=e.getRegistrationForInstance(t,n);if(i){if(!i.cy){i.cy=t;i.domElement=n}else{e.util.error("Tried to register on a pre-existing registration")}return i}else{var s=+(new Date);var o;if(!e.lastInstanceTime||e.lastInstanceTime===s){e.instanceCounter=0}else{++e.instanceCounter}e.lastInstanceTime=s;o=e.instanceCounter;var u="cy-"+s+"-"+o;var a={id:u,cy:r,domElement:n,readies:[]};e.instances.push(a);e.instances[u]=a;return a}};e.removeRegistrationForInstance=function(t,n){var r;if(e.is.core(t)){r=t}else{if(e.is.domElement(t)){n=t}}if(e.is.core(r)){var i=r._private.instanceId;delete e.instances[i];e.instances.splice(i,1)}else{if(e.is.domElement(n)){for(var s=0;s<e.instances.length;s++){var o=e.instances[s];if(o.domElement===n){delete e.instances[o.id];e.instances.splice(s,1);s--}}}}};e.getRegistrationForInstance=function(t,n){var r;if(e.is.core(t)){if(t.registered()){r=t}}else{if(e.is.domElement(t)){n=t}}if(e.is.core(r)){var i=r._private.instanceId;return e.instances[i]}else{if(e.is.domElement(n)){for(var s=e.instances.length-1;s>=0;s--){var o=e.instances[s];if(o.domElement===n){return o}}}}}})(cytoscape);(function(e){function t(t,n,r){var i={};i[n]=r;switch(t){case"core":case"collection":e.fn[t](i)}return e.util.setMap({map:s,keys:[t,n],value:r})}function n(t,n){return e.util.getMap({map:s,keys:[t,n]})}function r(t,n,r,i,s){return e.util.setMap({map:o,keys:[t,n,r,i],value:s})}function i(t,n,r,i){return e.util.getMap({map:o,keys:[t,n,r,i]})}var s={};e.extensions=s;var o={};e.modules=o;e.extension=function(){if(arguments.length==2){return n.apply(this,arguments)}else{if(arguments.length==3){return t.apply(this,arguments)}else{if(arguments.length==4){return i.apply(this,arguments)}else{if(arguments.length==5){return r.apply(this,arguments)}else{$.error("Invalid extension access syntax")}}}}}})(cytoscape);(function(e,t){if(!e){return}e.fn.cytoscape=function(n){var r=e(this);if(n==="get"){var i=t.getRegistrationForInstance(r[0]);return i.cy}else{if(t.is.fn(n)){var s=n;var o=r[0];var i=t.getRegistrationForInstance(o);if(!i){i=t.registerInstance(o)}if(i&&i.cy&&i.cy.ready()){i.cy.trigger("ready",[],s)}else{i.readies.push(s)}}else{if(t.is.plainObject(n)){return r.each(function(){var t=e.extend({},n,{container:e(this)[0]});cytoscape(t)})}else{var o=r[0];var u=[];var a=[];for(var f=1;f<arguments.length;f++){a[f-1]=arguments[f]}r.each(function(){var e=t.getRegistrationForInstance(o);var r=e.cy;var i=n;if(r&&t.is.fn(r[i])){var s=r[i].apply(r,a);u.push(s)}});if(u.length===1){u=u[0]}else{if(u.length==0){u=e(this)}}return u}}}};e.cytoscape=cytoscape;if(e.fn.cy==null&&e.cy==null){e.fn.cy=e.fn.cytoscape;e.cy=e.cytoscape}})(typeof jQuery!=="undefined"?jQuery:null,cytoscape);(function(e){function t(){return false}function n(){return true}e.Event=function(r,i){if(!(this instanceof e.Event)){return new e.Event(r,i)}if(r&&r.type){this.originalEvent=r;this.type=r.type;this.isDefaultPrevented=r.defaultPrevented||r.returnValue===false||r.getPreventDefault&&r.getPreventDefault()?n:t}else{this.type=r}if(i){e.util.extend(this,i)}this.timeStamp=r&&r.timeStamp||+(new Date)};e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=n;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n;this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}})(cytoscape);(function(e){e.define={data:function(t){var n={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateMappers:false};t=e.util.extend({},n,t);return function(n,r){var i=t;var s=this;var o=s.length!==undefined;var u=o?s:[s];var a=o?s[0]:s;if(e.is.string(n)){if(i.allowGetting&&r===undefined){var f;if(a){f=a._private[i.field][n]}return f}else{if(i.allowSetting&&r!==undefined){var l=!i.immutableKeys[n];if(l){for(var c=0,h=u.length;c<h;c++){u[c]._private[i.field][n]=r}if(i.updateMappers){s.updateMappers()}if(i.settingTriggersEvent){s[i.triggerFnName](i.settingEvent)}}}}}else{if(i.allowSetting&&e.is.plainObject(n)){var p=n;var d,v;for(d in p){v=p[d];var l=!i.immutableKeys[d];if(l){for(var c=0,h=u.length;c<h;c++){u[c]._private[i.field][d]=v}}}if(i.updateMappers){s.updateMappers()}if(i.settingTriggersEvent){s[i.triggerFnName](i.settingEvent)}}else{if(i.allowBinding&&e.is.fn(n)){var m=n;s.bind(i.bindingEvent,m)}else{if(i.allowGetting&&n===undefined){var f;if(a){f=a._private[i.field]}return f}}}}return s}},batchData:function(t){var n={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:false};var r=t=e.util.extend({},n,t);return function(t){var n=this;var i=n.length!==undefined;var s=i?n:n._private.elements;if(s.length===0){return n}var o=i?s[0]._private.cy:n;for(var u=0;u<s.length;u++){var a=s[u];var f=a._private.data.id;var l=t[f];if(l!==undefined&&l!==null){var c=l;var h,p;for(h in c){p=c[h];var d=!r.immutableKeys[h];if(d){a._private[r.field][h]=p}}}}var v=new e.Collection(o,s);if(r.updateMappers){v.updateMappers()}v[r.triggerFnName](r.event);return n}},removeData:function(t){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};t=e.util.extend({},n,t);return function(n){var r=t;var i=this;var s=i.length!==undefined;var o=s?i:[i];var u=s?i[0]:i;if(e.is.string(n)){var a=n.split(/\s+/);var f=a.length;for(var l=0;l<f;l++){var c=a[l];if(e.is.emptyString(c)){continue}var h=!r.immutableKeys[c];if(h){for(var p=0,d=o.length;p<d;p++){delete o[p]._private[r.field][c]}}}if(r.triggerEvent){i[r.triggerFnName](r.event)}}else{if(n===undefined){for(var p=0,d=o.length;p<d;p++){var v=o[p]._private[r.field];for(var c in v){var m=!r.immutableKeys[c];if(m){delete v[c]}}}if(r.triggerEvent){i[r.triggerFnName](r.event)}}}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(t){var n=e.define.event.aliases;for(var r=0;r<n.length;r++){var i=n[r];t[i]=function(t,n){if(e.is.fn(n)){this.on(i,t,n)}else{if(e.is.fn(t)){n=t;this.on(i,n)}else{this.trigger(i)}}return this}}},falseCallback:function(){return false}},on:function(t){var n={unbindSelfOnTrigger:false,unbindAllBindersOnTrigger:false};t=e.util.extend({},n,t);return function(n,r,i,s){var o=this;var u=o.length!==undefined;var a=u?o:[o];var f=u?o[0]:o;var l=e.is.string(n);var c=t;if(e.is.plainObject(r)){s=i;i=r;r=undefined}else{if(e.is.fn(r)||r===false){s=r;i=undefined;r=undefined}}if(e.is.fn(i)||i===false){s=i;i=undefined}if(!(e.is.fn(s)||s===false)&&l){return o}if(l){var h={};h[n]=s;n=h}for(var p in n){s=n[p];if(s===false){s=e.define.event.falseCallback}if(!e.is.fn(s)){continue}p=p.split(/\s+/);for(var d=0;d<p.length;d++){var v=p[d];if(e.is.emptyString(v)){continue}var m=v.match(e.define.event.regex);if(m){var g=m[1];var y=m[2]?m[2]:undefined;var b={callback:s,data:i,delegated:r?true:false,selector:r,type:g,namespace:y,unbindSelfOnTrigger:c.unbindSelfOnTrigger,unbindAllBindersOnTrigger:c.unbindAllBindersOnTrigger,binders:a};for(var w=0;w<a.length;w++){a[w]._private.listeners.push(b)}}}}return o}},off:function(t){var n={};t=e.util.extend({},n,t);return function(n,r,i){var s=this;var o=s.length!==undefined;var u=o?s:[s];var a=o?s[0]:s;var f=e.is.string(n);var l=t;if(arguments.length===0){for(var c=0;c<u.length;c++){u[c]._private.listeners=[]}return s}if(e.is.fn(r)||r===false){i=r;r=undefined}if(f){var h={};h[n]=i;n=h}for(var p in n){i=n[p];if(i===false){i=e.define.event.falseCallback}p=p.split(/\s+/);for(var d=0;d<p.length;d++){var v=p[d];if(e.is.emptyString(v)){continue}var m=v.match(e.define.event.optionalTypeRegex);if(m){var g=m[1]?m[1]:undefined;var y=m[2]?m[2]:undefined;for(var c=0;c<u.length;c++){var b=u[c]._private.listeners;for(var w=0;w<b.length;w++){var E=b[w];var S=!y||y===E.namespace;var x=!g||E.type===g;var T=!i||i===E.callback;var N=S&&x&&T;if(N){b.splice(w,1);w--}}}}}}return s}},trigger:function(t){var n={};t=e.util.extend({},n,t);return function(n,r,i){var s=this;var o=s.length!==undefined;var u=o?s:[s];var a=o?s[0]:s;var f=e.is.string(n);var l=e.is.plainObject(n);var c=e.is.event(n);var h=t;var p=this._private.cy||this;if(f){var d=n.split(/\s+/);n=[];for(var v=0;v<d.length;v++){var m=d[v];if(e.is.emptyString(m)){continue}var g=m.match(e.define.event.regex);var y=g[1];var b=g[2]?g[2]:undefined;n.push({type:y,namespace:b})}}else{if(l){var w=n;n=[w]}}if(r){if(!e.is.array(r)){r=[r]}}else{r=[]}for(var v=0;v<n.length;v++){var E=n[v];for(var S=0;S<u.length;S++){var x=u[S];var T=x._private.listeners;var N=e.is.element(x);var C=N;var m;if(c){m=E;m.cyTarget=m.cyTarget||x;m.cy=m.cy||p;m.namespace=m.namespace||E.namespace}else{m=new e.Event(E,{cyTarget:x,cy:p,namespace:E.namespace});var k=e.define.event.props;for(var L=0;L<k.length;L++){var A=k[L];m[A]=E[A]}}if(i){T=[{namespace:m.namespace,type:m.type,callback:i}]}for(var L=0;L<T.length;L++){var O=T[L];var M=!O.namespace||O.namespace===m.namespace;var _=O.type===m.type;var D=O.delegated?x!==m.cyTarget&&e.is.element(m.cyTarget)&&m.cyTarget.is(O.selector):true;var P=M&&_&&D;if(P){var H=[m];H=H.concat(r);if(O.data){m.data=O.data}else{m.data=undefined}if(O.unbindSelfOnTrigger||O.unbindAllBindersOnTrigger){T.splice(L,1);L--}if(O.unbindAllBindersOnTrigger){var B=O.binders;for(var j=0;j<B.length;j++){var F=B[j];if(!F||F===x){continue}var I=F._private.listeners;for(var q=0;q<I.length;q++){var R=I[q];if(R===O){I.splice(q,1);q--}}}}var U=O.delegated?m.cyTarget:x;var z=O.callback.apply(U,H);if(z===false||m.isPropagationStopped()){C=false;if(z===false){m.stopPropagation();m.preventDefault()}}}}if(C){var W=x.parent();var X=W.length!==0;if(X){W=W[0];W.trigger(m)}else{p.trigger(m)}}}}return s}}}})(cytoscape);(function($$,window){var isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$$.Style=function(e){if(!(this instanceof $$.Style)){return new $$.Style(e)}if(!$$.is.core(e)){$$.util.error("A style must have a core reference");return}this._private={cy:e,coreStyle:{}};this.length=0;this.addDefaultStylesheet()};$$.style=$$.Style;$$.styfn=$$.Style.prototype;$$.fn.style=function(e,t){for(var n in e){var r=e[n];$$.Style.prototype=r}};$$.stylesheet=$$.Stylesheet=function(){if(!(this instanceof $$.Stylesheet)){return new $$.Stylesheet}this.length=0};$$.Stylesheet.prototype.selector=function(e){var t=this.length++;this[t]={selector:e,properties:[]};return this};$$.Stylesheet.prototype.css=function(e,t){var n=this.length-1;if($$.is.string(e)){this[n].properties.push({name:e,value:t})}else{if($$.is.plainObject(e)){map=e;for(var r=0;r<$$.style.properties.length;r++){var i=$$.style.properties[r];var s=map[i.name];if(s===undefined){s=map[$$.util.dash2camel(i.name)]}if(s!==undefined){var e=i.name;var t=s;this[n].properties.push({name:e,value:t})}}}}return this};$$.style.fromJson=function(e,t){var n=new $$.Style(e);for(var r=0;r<t.length;r++){var i=t[r];var s=i.selector;var o=i.css;n.selector(s);for(var u in o){var a=o[u];n.css(u,a)}}return n};$$.styfn.fromJson=function(e){var t=this;t.resetToDefault();for(var n=0;n<e.length;n++){var r=e[n];var i=r.selector;var s=r.css;t.selector(i);for(var o in s){var u=s[o];t.css(o,u)}}return t};$$.Stylesheet.prototype.generateStyle=function(e){var t=new $$.Style(e);for(var n=0;n<this.length;n++){var r=this[n];var i=r.selector;var s=r.properties;t.selector(i);for(var o=0;o<s.length;o++){var u=s[o];t.css(u.name,u.value)}}return t};$$.Stylesheet.prototype.assignToStyle=function(e,t){e.clear();if(t||t===undefined){e.addDefaultStylesheet()}for(var n=0;n<this.length;n++){var r=this[n];var i=r.selector;var s=r.properties;e.selector(i);for(var o=0;o<s.length;o++){var u=s[o];e.css(u.name,u.value)}}};(function(){var e=$$.util.regex.number;var t=$$.util.regex.rgbaNoBackRefs;var n=$$.util.regex.hslaNoBackRefs;var r=$$.util.regex.hex3;var i=$$.util.regex.hex6;$$.style.types={zeroOneNumber:{number:true,min:0,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},size:{number:true,min:0,enums:["auto"]},bgSize:{number:true,min:0,allowPercent:true},color:{color:true},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:true,allowPercent:true},positiony:{enums:["top","center","bottom"],number:true,allowPercent:true},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:true},data:{mapping:true,regex:"^data\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},mapData:{mapping:true,regex:"^mapData\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+e+"|\\w+|"+t+"|"+n+"|"+r+"|"+i+")\\s*\\,\\s*("+e+"|\\w+|"+t+"|"+n+"|"+r+"|"+i+")\\)$"},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};var s=$$.style.types;$$.style.properties=[{name:"cursor",type:s.cursor},{name:"text-valign",type:s.valign},{name:"text-halign",type:s.halign},{name:"color",type:s.color},{name:"content",type:s.text},{name:"text-outline-color",type:s.color},{name:"text-outline-width",type:s.size},{name:"text-outline-opacity",type:s.zeroOneNumber},{name:"text-opacity",type:s.zeroOneNumber},{name:"text-decoration",type:s.textDecoration},{name:"text-transform",type:s.textTransform},{name:"font-family",type:s.fontFamily},{name:"font-style",type:s.fontStyle},{name:"font-variant",type:s.fontVariant},{name:"font-weight",type:s.fontWeight},{name:"font-size",type:s.size},{name:"min-zoomed-font-size",type:s.size},{name:"visibility",type:s.visibility},{name:"opacity",type:s.zeroOneNumber},{name:"z-index",type:s.nonNegativeInt},{name:"overlay-padding",type:s.size},{name:"overlay-color",type:s.color},{name:"overlay-opacity",type:s.zeroOneNumber},{name:"background-color",type:s.color},{name:"background-opacity",type:s.zeroOneNumber},{name:"background-image",type:s.url},{name:"background-position-x",type:s.positionx},{name:"background-position-y",type:s.positiony},{name:"background-repeat",type:s.bgRepeat},{name:"background-size-x",type:s.bgSize},{name:"background-size-y",type:s.bgSize},{name:"border-color",type:s.color},{name:"border-opacity",type:s.zeroOneNumber},{name:"border-width",type:s.size},{name:"border-style",type:s.lineStyle},{name:"height",type:s.size},{name:"width",type:s.size},{name:"padding-left",type:s.size},{name:"padding-right",type:s.size},{name:"padding-top",type:s.size},{name:"padding-bottom",type:s.size},{name:"shape",type:s.nodeShape},{name:"source-arrow-shape",type:s.arrowShape},{name:"target-arrow-shape",type:s.arrowShape},{name:"source-arrow-color",type:s.color},{name:"target-arrow-color",type:s.color},{name:"line-style",type:s.lineStyle},{name:"line-color",type:s.color},{name:"control-point-step-size",type:s.size},{name:"curve-style",type:s.curveStyle},{name:"selection-box-color",type:s.color},{name:"selection-box-opacity",type:s.zeroOneNumber},{name:"selection-box-border-color",type:s.color},{name:"selection-box-border-width",type:s.size},{name:"panning-cursor",type:s.cursor},{name:"active-bg-color",type:s.color},{name:"active-bg-opacity",type:s.zeroOneNumber},{name:"active-bg-size",type:s.size}];var o=$$.style.properties;for(var u=0;u<o.length;u++){var a=o[u];o[a.name]=a}})();$$.styfn.addDefaultStylesheet=function(){var e=this.containerPropertyAsString("font-family")||"sans-serif";var t=this.containerPropertyAsString("font-style")||"normal";var n=this.containerPropertyAsString("font-variant")||"normal";var r=this.containerPropertyAsString("font-weight")||"normal";var i=this.containerPropertyAsString("color")||"#000";var s=this.containerPropertyAsString("text-transform")||"none";var o=this.containerPropertyAsString("text-decoration")||"none";var u=this.containerPropertyAsString("font-size")||12;this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:i,content:undefined,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":s,"font-family":e,"font-style":t,"font-variant":n,"font-weight":r,"font-size":u,"min-zoomed-font-size":0,visibility:"visible",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":isTouch?40:15})};$$.styfn.clear=function(){this._private.newStyle=true;for(var e=0;e<this.length;e++){delete this[e]}this.length=0;return this};$$.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};$$.styfn.core=function(){return this._private.coreStyle};$$.styfn.parse=function(e,t,n){e=$$.util.camel2dash(e);var r=$$.style.properties[e];var i=t;if(!r){return null}if(t===undefined||t===null){return null}var s=$$.is.string(t);if(s){t=$$.util.trim(t)}var o=r.type;if(!o){return null}if(n&&(t===""||t===null)){return{name:e,value:t,bypass:true,deleteBypass:true}}var u,a;if(!s){}else{if(u=(new RegExp($$.style.types.data.regex)).exec(t)){return{name:e,value:u,strValue:t,mapped:$$.style.types.data,field:u[1],bypass:n}}else{if(a=(new RegExp($$.style.types.mapData.regex)).exec(t)){if(!(o.color||o.number)){return false}var f=this.parse(e,a[4]);if(!f||f.mapped){return false}var l=this.parse(e,a[5]);if(!l||l.mapped){return false}if(f.value===l.value){return false}else{if(o.color){var c=f.value;var h=l.value;var p=c[0]===h[0]&&c[1]===h[1]&&c[2]===h[2]&&(c[3]===h[3]||(c[3]==null||c[3]===1)&&(h[3]==null||h[3]===1));if(p){return false}}}return{name:e,value:a,strValue:t,mapped:$$.style.types.mapData,field:a[1],fieldMin:parseFloat(a[2]),fieldMax:parseFloat(a[3]),valueMin:f.value,valueMax:l.value,bypass:n}}}}if(o.number){var d;if(!o.unitless){if(s){var v=t.match("^("+$$.util.regex.number+")(px|em"+(o.allowPercent?"|\\%":"")+")?$");if(!o.enums){if(!v){return null}t=v[1];d=v[2]||"px"}}else{d="px"}}t=parseFloat(t);if(isNaN(t)&&o.enums!==undefined){t=i;for(var m=0;m<o.enums.length;m++){var g=o.enums[m];if(g===t){return{name:e,value:t,strValue:t,bypass:n}}}return null}if(o.integer&&!$$.is.integer(t)){return null}if(o.min!==undefined&&t<o.min||o.max!==undefined&&t>o.max){return null}var y={name:e,value:t,strValue:""+t+(d?d:""),units:d,bypass:n,pxValue:o.unitless||d==="%"?undefined:d==="px"||!d?t:this.getEmSizeInPixels()*t};return y}else{if(o.color){var b=$$.util.color2tuple(t);return{name:e,value:b,strValue:t,bypass:n}}else{if(o.enums){for(var m=0;m<o.enums.length;m++){var g=o.enums[m];if(g===t){return{name:e,value:t,strValue:t,bypass:n}}}}else{if(o.regex){var w=new RegExp(o.regex);var E=w.exec(t);if(E){return{name:e,value:E,strValue:t,bypass:n}}else{return null}}else{if(o.string){return{name:e,value:t,strValue:t,bypass:n}}else{return null}}}}}};$$.styfn.getEmSizeInPixels=function(){var e=this._private.cy;var t=e.container();if(window&&t){var n=window.getComputedStyle(t).getPropertyValue("font-size");var r=parseFloat(n);return r}else{return 1}};$$.styfn.containerCss=function(e){var t=this._private.cy;var n=t.container();if(window&&n){return window.getComputedStyle(n).getPropertyValue(e)}};$$.styfn.containerProperty=function(e){var t=this.containerCss(e);var n=this.parse(e,t);return n};$$.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);if(t){return t.strValue}};$$.styfn.selector=function(e){var t=e==="core"?null:new $$.Selector(e);var n=this.length++;this[n]={selector:t,properties:[]};return this};$$.styfn.css=function(){var e=arguments;switch(e.length){case 1:var t=e[0];for(var n=0;n<$$.style.properties.length;n++){var r=$$.style.properties[n];var i=t[r.name];if(i===undefined){i=t[$$.util.dash2camel(r.name)]}if(i!==undefined){this.cssRule(r.name,i)}}break;case 2:this.cssRule(e[0],e[1]);break;default:break}return this};$$.styfn.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n);var i=!this[r].selector;if(i){this._private.coreStyle[n.name]=n}}return this};$$.styfn.applyParsedProperty=function(ele,parsedProp,context){parsedProp=$$.util.clone(parsedProp);var prop=parsedProp;var style=ele._private.style;var fieldVal,flatProp;var type=$$.style.properties[prop.name].type;var propIsBypass=prop.bypass;var origProp=style[prop.name];var origPropIsBypass=origProp&&origProp.bypass;if((parsedProp.name==="height"||parsedProp.name==="width")&&parsedProp.value==="auto"&&ele.isNode()&&!ele.isParent()){return false}if(propIsBypass&&prop.deleteBypass){var currentProp=style[prop.name];if(!currentProp){return true}else{if(currentProp.bypass&&currentProp.bypassed){style[prop.name]=currentProp.bypassed;return true}else{return false}}}switch(prop.mapped){case $$.style.types.mapData:fieldVal=ele._private.data[prop.field];if(!$$.is.number(fieldVal)){return false}var percent=(fieldVal-prop.fieldMin)/(prop.fieldMax-prop.fieldMin);if(type.color){var r1=prop.valueMin[0];var r2=prop.valueMax[0];var g1=prop.valueMin[1];var g2=prop.valueMax[1];var b1=prop.valueMin[2];var b2=prop.valueMax[2];var a1=prop.valueMin[3]==null?1:prop.valueMin[3];var a2=prop.valueMax[3]==null?1:prop.valueMax[3];var clr=[Math.round(r1+(r2-r1)*percent),Math.round(g1+(g2-g1)*percent),Math.round(b1+(b2-b1)*percent),Math.round(a1+(a2-a1)*percent)];flatProp={bypass:prop.bypass,name:prop.name,value:clr,strValue:["rgba(",clr[0],", ",clr[1],", ",clr[2],", ",clr[3],")"].join("")}}else{if(type.number){var calcValue=prop.valueMin+(prop.valueMax-prop.valueMin)*percent;flatProp=this.parse(prop.name,calcValue,prop.bypass)}else{return false}}if(!flatProp){flatProp=this.parse(prop.name,origProp.strValue,prop.bypass)}flatProp.mapping=prop;prop=flatProp;break;case $$.style.types.data:fieldVal=eval("ele._private.data."+prop.field);flatProp=this.parse(prop.name,fieldVal,prop.bypass);if(!flatProp){flatProp=this.parse(prop.name,origProp.strValue,prop.bypass)}flatProp.mapping=prop;prop=flatProp;break;case undefined:break;default:return false}if(propIsBypass){if(origPropIsBypass){prop.bypassed=origProp.bypassed}else{prop.bypassed=origProp}style[prop.name]=prop}else{var prevProp;if(origPropIsBypass){prevProp=origProp.bypassed;origProp.bypassed=prop}else{prevProp=style[prop.name];style[prop.name]=prop}if(prevProp&&prevProp.mapping&&prop.mapping&&prevProp.context===context){prevProp=prevProp.prev}if(prevProp&&prevProp!==prop){prop.prev=prevProp}}prop.context=context;return true};$$.styfn.rollBackContext=function(e,t){for(var n=0;n<t.properties.length;n++){var r=t.properties[n];var i=e._private.style[r.name];if(i.bypassed){i=i.bypassed}var s=true;var o;var u=0;while(i.prev){var a=i.prev;if(i.context===t){if(s){e._private.style[r.name]=a}else{if(o){o.prev=a}}}o=i;i=a;s=false;u++}}};$$.styfn.apply=function(e){var t=this;for(var n=0;n<e.length;n++){var r=e[n];if(t._private.newStyle){r._private.styleCxts=[];r._private.style={}}for(var i=0;i<this.length;i++){var s=this[i];var o=s.selector&&s.selector.filter(r).length>0;var u=s.properties;if(o){for(var a=0;a<u.length;a++){var f=u[a];if(!r._private.styleCxts[i]||f.mapped){this.applyParsedProperty(r,f,s)}}r._private.styleCxts[i]=s}else{if(r._private.styleCxts[i]){this.rollBackContext(r,s)}delete r._private.styleCxts[i]}}}t._private.newStyle=false};$$.styfn.update=function(){var e=this._private.cy;var t=e.elements();t.updateStyle()};$$.styfn.getRenderedStyle=function(e){var e=e[0];if(e){var t={};var n=e._private.style;var r=this._private.cy;var i=r.zoom();for(var s=0;s<$$.style.properties.length;s++){var o=$$.style.properties[s];var u=n[o.name];if(u){var a=u.unitless?u.strValue:u.pxValue*i+"px";t[o.name]=a;t[$$.util.dash2camel(o.name)]=a}}return t}};$$.styfn.getRawStyle=function(e){var e=e[0];if(e){var t={};var n=e._private.style;for(var r=0;r<$$.style.properties.length;r++){var i=$$.style.properties[r];var s=n[i.name];if(s){t[i.name]=s.strValue;t[$$.util.dash2camel(i.name)]=s.strValue}}return t}};$$.styfn.getValueStyle=function(e){var t,n;if($$.is.element(e)){t={};n=e._private.style}else{t={};n=e}if(n){for(var r=0;r<$$.style.properties.length;r++){var i=$$.style.properties[r];var s=n[i.name]||n[$$.util.dash2camel(i.name)];if(s!==undefined&&!$$.is.plainObject(s)){s=this.parse(i.name,s)}if(s){var o=s.value===undefined?s:s.value;t[i.name]=o;t[$$.util.dash2camel(i.name)]=o}}}return t};$$.styfn.updateFunctionalProperties=function(e){for(var t=0;t<e.length;t++){var n=e[t];var r=n._private.style;for(var i=0;i<$$.style.properties.length;i++){var s=$$.style.properties[i];var o=r[s.name];if(o&&o.mapping){var u=o.mapping;this.applyParsedProperty(n,u)}}}};$$.styfn.applyBypass=function(e,t,n){var r=[];if(t==="*"||t==="**"){if(n!==undefined){for(var i=0;i<$$.style.properties.length;i++){var s=$$.style.properties[i];var t=s.name;var o=this.parse(t,n,true);if(o){r.push(o)}}}}else{if($$.is.string(t)){var o=this.parse(t,n,true);if(o){r.push(o)}}else{if($$.is.plainObject(t)){var u=t;for(var i=0;i<$$.style.properties.length;i++){var s=$$.style.properties[i];var t=s.name;var n=u[t];if(n===undefined){n=u[$$.util.dash2camel(t)]}if(n!==undefined){var o=this.parse(t,n,true);if(o){r.push(o)}}}}else{return false}}}if(r.length===0){return false}var a=false;for(var i=0;i<e.length;i++){var f=e[i];for(var l=0;l<r.length;l++){var s=r[l];a=this.applyParsedProperty(f,s)||a}}return a};$$.styfn.removeAllBypasses=function(e){for(var t=0;t<$$.style.properties.length;t++){var n=$$.style.properties[t];var r=n.name;var i="";var s=this.parse(r,i,true);for(var o=0;o<e.length;o++){var u=e[o];this.applyParsedProperty(u,s)}}}})(cytoscape,typeof window==="undefined"?null:window);(function(e){var t={showOverlay:true,hideEdgesOnViewport:false};var n=e.util.copy(t);e.defaults=function(r){t=e.util.extend({},n,r)};e.fn.core=function(t,n){for(var r in t){var i=t[r];e.Core.prototype[r]=i}};e.Core=function(n){if(!(this instanceof e.Core)){return new e.Core(n)}var r=this;n=e.util.extend({},t,n);var i=n.container;var s=e.getRegistrationForInstance(r,i);if(s&&s.cy){s.domElement.innerHTML="";s.cy.notify({type:"destroy"});e.removeRegistrationForInstance(s.cy,s.domElement)}s=e.registerInstance(r,i);var o=s.readies;var u=n;u.layout=e.util.extend({name:typeof window==="undefined"?"null":"grid"},u.layout);u.renderer=e.util.extend({name:typeof window==="undefined"?"null":"canvas"},u.renderer);this._private={ready:false,instanceId:s.id,options:u,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e50,zoomEnabled:u.zoomEnabled===undefined?true:u.zoomEnabled,panEnabled:u.panEnabled===undefined?true:u.panEnabled,boxSelectionEnabled:u.boxSelectionEnabled===undefined?true:u.boxSelectionEnabled,zoom:e.is.number(u.zoom)?u.zoom:1,pan:{x:e.is.plainObject(u.pan)&&e.is.number(u.pan.x)?u.pan.x:0,y:e.is.plainObject(u.pan)&&e.is.number(u.pan.y)?u.pan.y:0},hasCompoundNodes:false};if(e.is.number(u.minZoom)&&e.is.number(u.maxZoom)&&u.minZoom<u.maxZoom){this._private.minZoom=u.minZoom;this._private.maxZoom=u.maxZoom}else{if(e.is.number(u.minZoom)&&u.maxZoom===undefined){this._private.minZoom=u.minZoom}else{if(e.is.number(u.maxZoom)&&u.minZoom===undefined){this._private.maxZoom=u.maxZoom}}}this._private.style=e.is.stylesheet(u.style)?u.style.generateStyle(this):e.is.array(u.style)?e.style.fromJson(this,u.style):new e.Style(r);r.initRenderer(e.util.extend({showOverlay:u.showOverlay,hideEdgesOnViewport:u.hideEdgesOnViewport},u.renderer));r.load(u.elements,function(){r.startAnimationLoop();r._private.ready=true;if(e.is.fn(u.ready)){r.bind("ready",u.ready)}for(var t=0;t<o.length;t++){var n=o[t];r.bind("ready",n)}s.readies=[];r.trigger("ready")},u.done)};e.corefn=e.Core.prototype;e.fn.core({ready:function(){return this._private.ready},registered:function(){if(this._private&&this._private.instanceId!=null){return true}else{return false}},registeredId:function(){return this._private.instanceId},getElementById:function(t){var n=this._private.id2index[t];if(n!==undefined){return this._private.elements[n]}return new e.Collection(this)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(e){var t=this._private.elements;var n=this._private.id2index;for(var r=0;r<e.length;r++){var i=e[r];var s=i._private.data.id;var o=n[s];var u=o!==undefined;if(!u){o=t.length;t.push(i);n[s]=o;i._private.index=o}}return this},removeFromPool:function(e){var t=this._private.elements;var n=this._private.id2index;for(var r=0;r<e.length;r++){var i=e[r];var s=i._private.data.id;var o=n[s];var u=o!==undefined;if(u){delete this._private.id2index[s];t.splice(o,1);for(var a=o;a<t.length;a++){var f=t[a]._private.data.id;n[f]--}}}},container:function(){return this._private.options.container},options:function(){return e.util.copy(this._private.options)},json:function(e){var t={};var n=this;t.elements={};n.elements().each(function(e,n){var r=n.group();if(!t.elements[r]){t.elements[r]=[]}t.elements[r].push(n.json())});t.style=n.style();t.scratch=n.scratch();t.zoomEnabled=n._private.zoomEnabled;t.panEnabled=n._private.panEnabled;t.layout=n._private.options.layout;t.renderer=n._private.options.renderer;return t}})})(cytoscape);(function(e,t){e.fn.core({add:function(t){var n;var r=this;if(e.is.elementOrCollection(t)){var i=t;var s=[];for(var o=0;o<i.length;o++){var u=i[o];s.push(u.json())}n=new e.Collection(r,s)}else{if(e.is.array(t)){var s=t;n=new e.Collection(r,s)}else{if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){var a=t;var s=[];var f=["nodes","edges"];for(var o=0,l=f.length;o<l;o++){var c=f[o];var h=a[c];if(e.is.array(h)){for(var p=0,d=h.length;p<d;p++){var v=h[p];var m=e.util.extend({},v,{group:c});s.push(m)}}}n=new e.Collection(r,s)}else{var v=t;n=(new e.Element(r,v)).collection()}}}return n.filter(function(){return!this.removed()})},remove:function(t){if(e.is.elementOrCollection(t)){t=t}else{if(e.is.string(t)){var n=t;t=this.$(n)}}return t.remove()},load:function(n,r,i){function s(){o.one("layoutready",function(e){o.notifications(true);o.trigger(e);o.notify({type:"load",collection:o.elements(),style:o._private.style});o.one("load",r);o.trigger("load")}).one("layoutstop",function(){o.one("done",i);o.trigger("done")});o.layout(o._private.options.layout)}var o=this;var u=o.elements();if(u.length>0){u.remove()}o.notifications(false);var a=[];if(n!=null){if(e.is.plainObject(n)||e.is.array(n)){o.add(n)}}if(true||t&&t.chrome){setTimeout(function(){s()},30)}else{s()}return this}})})(cytoscape,typeof window==="undefined"?null:window);(function(e){e.fn.core({addToAnimationPool:function(e){var t=this;var n=t._private.aniEles;var r=[];for(var i=0;i<n.length;i++){var s=n[i]._private.data.id;r[s]=true}for(var i=0;i<e.length;i++){var o=e[i];var s=o._private.data.id;if(!r[s]){n.push(o)}}},startAnimationLoop:function(){function t(){function e(){l(function(e){n(e);t()},c)}if(a){setTimeout(function(){e()},u)}else{e()}}function n(t){t=+(new Date);var n=o._private.aniEles;for(var i=0;i<n.length;i++){var s=n[i];var u=s._private.animation.current;var a=s._private.animation.queue;if(u.length===0){var f=a;var l=f.length>0?f.shift():null;if(l!=null){l.callTime=+(new Date);u.push(l)}}var c=[];for(var h=0;h<u.length;h++){var p=u[h];r(s,p,t);if(u[h].done){c.push(p);u.splice(h,1);h--}}for(var h=0;h<c.length;h++){var p=c[h];var d=p.params.complete;if(e.is.fn(d)){d.apply(s,[t])}}}if(n.length>0){o.notify({type:"draw",collection:n})}for(var h=0;h<n.length;h++){var s=n[h];var a=s._private.animation.queue;var u=s._private.animation.current;var v=u.length>0||a.length>0;if(!v){n.splice(h,1);h--}}}function r(t,n,r){var u=o._private.style;var a=n.properties;var f=n.params;var l=n.callTime;var c;if(n.duration===0){c=1}else{c=Math.min(1,(r-l)/n.duration)}if(c<0){c=0}else{if(c>1){c=1}}if(a.delay==null){var p=n.startPosition;var d=a.position;var v=t._private.position;if(d){if(i(p.x,d.x)){v.x=s(p.x,d.x,c)}if(i(p.y,d.y)){v.y=s(p.y,d.y,c)}}if(a.css){var m=e.style.properties;for(var g=0;g<m.length;g++){var y=m[g].name;var b=a.css[y];if(b!==undefined){var w=n.startStyle[y];var E=s(w,b,c);u.applyBypass(t,y,E)}}}}if(e.is.fn(f.step)){f.step.apply(t,[r])}if(c>=1){n.done=true}return c}function i(t,n){if(t==null||n==null){return false}if(e.is.number(t)&&e.is.number(n)){return true}else{if(t&&n){return true}}return false}function s(t,n,r){if(r<0){r=0}else{if(r>1){r=1}}if(e.is.number(t)&&e.is.number(n)){return t+(n-t)*r}else{if(e.is.number(t[0])&&e.is.number(n[0])){var i=t;var s=n;function o(e,t){var n=t-e;var i=e;return Math.round(r*n+i)}var u=o(i[0],s[0]);var a=o(i[1],s[1]);var f=o(i[2],s[2]);return"rgb("+u+", "+a+", "+f+")"}}return undefined}var o=this;var u=1e3/60;var a=false;var f=true;o._private.aniEles=[];var l=typeof window==="undefined"?function(){}:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(l==null||!f){l=function(e){window.setTimeout(function(){e(+(new Date))},u)}}var c=o.container();t()}})})(cytoscape);(function(e){e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:e.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:false})})})(cytoscape);(function(e){e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:true}),once:e.define.on({unbindAllBindersOnTrigger:true}),off:e.define.off(),trigger:e.define.trigger()});e.corefn.bind=e.corefn.on;e.corefn.unbind=e.corefn.off;e.define.event.aliasesOn(e.corefn)})(cytoscape);(function(e){e.fn.core({png:function(){var e=this;var t=this._private.renderer;return t.png()}})})(cytoscape);(function(e){e.fn.core({layout:function(e){var t=this;if(this._private.layoutRunning){return this}if(e==null){e=this._private.options.layout}this.initLayout(e);t.trigger("layoutstart");this._private.layoutRunning=true;this.one("layoutstop",function(){this._private.layoutRunning=false});this._private.layout.run();return this},initLayout:function(t){if(t==null){e.util.error("Layout options must be specified to run a layout");return}if(t.name==null){e.util.error("A `name` must be specified to run a layout");return}var n=t.name;var r=e.extension("layout",n);if(r==null){e.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",n);return}this._private.layout=new r(e.util.extend({},t,{renderer:this._private.renderer,cy:this}));this._private.options.layout=t}})})(cytoscape);(function(e){e.fn.core({notify:function(t){if(!this._private.notificationsEnabled){return}var n=this.renderer();var r=this;if(e.is.element(t.collection)){var i=t.collection;t.collection=new e.Collection(r,[i])}else{if(e.is.array(t.collection)){var s=t.collection;t.collection=new e.Collection(r,s)}}n.notify(t)},notifications:function(e){var t=this._private;if(e===undefined){return t.notificationsEnabled}else{t.notificationsEnabled=e?true:false}},noNotifications:function(e){this.notifications(false);e();this.notifications(true)}})})(cytoscape);(function(e){e.fn.core({renderTo:function(e,t,n){var r=this._private.renderer;r.renderTo(e,t,n)},renderer:function(){return this._private.renderer},initRenderer:function(t){var n=this;var r=e.extension("renderer",t.name);if(r==null){e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name);return}this._private.renderer=new r(e.util.extend({},t,{cy:n,style:n._private.style}))}})})(cytoscape);(function(e){e.fn.core({collection:function(t){if(e.is.string(t)){return this.$(t)}else{if(e.is.elementOrCollection(t)){return t.collection()}}return new e.Collection(this)},nodes:function(e){var t=this.$("node");if(e){return t.filter(e)}return t},edges:function(e){var t=this.$("edge");if(e){return t.filter(e)}return t},$:function(t){var n=new e.Collection(this,this._private.elements);if(t){return n.filter(t)}return n}});e.corefn.elements=e.corefn.filter=e.corefn.$})(cytoscape);(function(e){e.fn.core({style:function(e){return this._private.style}})})(cytoscape);(function(e){e.fn.core({panningEnabled:function(e){if(e!==undefined){this._private.panEnabled=e?true:false}else{return this._private.panEnabled}return this},zoomingEnabled:function(e){if(e!==undefined){this._private.zoomEnabled=e?true:false}else{return this._private.zoomEnabled}return this},boxSelectionEnabled:function(e){if(e!==undefined){this._private.boxSelectionEnabled=e?true:false}else{return this._private.boxSelectionEnabled}return this},pan:function(){var t=arguments;var n=this._private.pan;var r,i,s,o,u;switch(t.length){case 0:return n;case 1:if(!this._private.panEnabled){return this}else{if(e.is.string(t[0])){r=t[0];return n[r]}else{if(e.is.plainObject(t[0])){s=t[0];o=s.x;u=s.y;if(e.is.number(o)){n.x=o}if(e.is.number(u)){n.y=u}this.trigger("pan")}}}break;case 2:if(!this._private.panEnabled){return this}r=t[0];i=t[1];if((r==="x"||r==="y")&&e.is.number(i)){n[r]=i}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},panBy:function(t){var n=arguments;var r=this._private.pan;var i,s,o,u,a;if(!this._private.panEnabled){return this}switch(n.length){case 1:if(e.is.plainObject(n[0])){o=n[0];u=o.x;a=o.y;if(e.is.number(u)){r.x+=u}if(e.is.number(a)){r.y+=a}this.trigger("pan")}break;case 2:i=n[0];s=n[1];if((i==="x"||i==="y")&&e.is.number(s)){r[i]+=s}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},fit:function(t,n){if(e.is.number(t)&&n===undefined){n=t;t=undefined}if(!this._private.panEnabled||!this._private.zoomEnabled){return this}if(e.is.string(t)){var r=t;t=this.$(r)}else{if(!e.is.elementOrCollection(t)){t=this.elements()}}var i=t.boundingBox();var s=this.style();var o=parseFloat(s.containerCss("width"));var u=parseFloat(s.containerCss("height"));var a;n=e.is.number(n)?n:0;if(!isNaN(o)&&!isNaN(u)){a=this._private.zoom=Math.min((o-2*n)/i.w,(u-2*n)/i.h);a=a>this._private.maxZoom?this._private.maxZoom:a;a=a<this._private.minZoom?this._private.minZoom:a;this._private.pan={x:(o-a*(i.x1+i.x2))/2,y:(u-a*(i.y1+i.y2))/2}}this.trigger("pan zoom");this.notify({type:"viewport"});return this},minZoom:function(t){if(t===undefined){return this._private.minZoom}else{if(e.is.number(t)){this._private.minZoom=t}}return this},maxZoom:function(t){if(t===undefined){return this._private.maxZoom}else{if(e.is.number(t)){this._private.maxZoom=t}}return this},zoom:function(t){var n;var r;if(t===undefined){return this._private.zoom}else{if(e.is.number(t)){r=t;n={x:0,y:0}}else{if(e.is.plainObject(t)){r=t.level;if(t.renderedPosition){var i=t.renderedPosition;var s=this._private.pan;var o=this._private.zoom;n={x:(i.x-s.x)/o,y:(i.y-s.y)/o}}else{if(t.position){n=t.position}}if(n&&!this._private.panEnabled){return this}}}}if(!this._private.zoomEnabled){return this}if(!e.is.number(r)||!e.is.number(n.x)||!e.is.number(n.y)){return this}r=r>this._private.maxZoom?this._private.maxZoom:r;r=r<this._private.minZoom?this._private.minZoom:r;var u=this._private.pan;var a=this._private.zoom;var f=r;var l={x:-f/a*(n.x-u.x)+n.x,y:-f/a*(n.y-u.y)+n.y};this._private.zoom=r;this._private.pan=l;var c=u.x!==l.x||u.y!==l.y;this.trigger("zoom"+(c?" pan":""));this.notify({type:"viewport"});return this},boundingBox:function(e){var t=this.$(e);return t.boundingBox()},center:function(t){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}if(e.is.string(t)){var n=t;t=cy.elements(n)}else{if(!e.is.elementOrCollection(t)){t=cy.elements()}}var r=t.boundingBox();var i=this.style();var s=parseFloat(i.containerCss("width"));var o=parseFloat(i.containerCss("height"));var u=this._private.zoom;this.pan({x:(s-u*(r.x1+r.x2))/2,y:(o-u*(r.y1+r.y2))/2});this.trigger("pan");this.notify({type:"viewport"});return this},reset:function(){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}this.pan({x:0,y:0});if(this._private.maxZoom>1&&this._private.minZoom<1){this.zoom(1)}this.notify({type:"viewport"});return this}})})(cytoscape);(function(e){e.fn.collection=e.fn.eles=function(t,n){for(var r in t){var i=t[r];e.Collection.prototype[r]=i}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,n,r){var i=e.is.element(n)?n._private:n;var s=i.group;var o=r!=null?r:this.prefix[s]+this.id[s];if(t.getElementById(o).empty()){this.id[s]++}else{while(!t.getElementById(o).empty()){o=this.prefix[s]+ ++this.id[s]}}return o}};e.Element=function(t,n,r){if(!(this instanceof e.Element)){return new e.Element(t,n,r)}var i=this;r=r===undefined||r?true:false;if(t===undefined||n===undefined||!e.is.core(t)){e.util.error("An element must have a core reference and parameters set");return}if(n.group!=="nodes"&&n.group!=="edges"){e.util.error("An element must be of type `nodes` or `edges`; you specified `"+n.group+"`");return}this.length=1;this[0]=this;this._private={cy:t,single:true,data:n.data||{},position:n.position||{},autoWidth:undefined,autoHeight:undefined,listeners:[],group:n.group,style:{},rstyle:{},styleCxts:[],removed:true,selected:n.selected?true:false,selectable:n.selectable===undefined?true:n.selectable?true:false,locked:n.locked?true:false,grabbed:false,grabbable:n.grabbable===undefined?true:n.grabbable?true:false,active:false,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};if(n.renderedPosition){var s=n.renderedPosition;var o=t.pan();var u=t.zoom();this._private.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}if(e.is.string(n.classes)){var a=n.classes.split(/\s+/);for(var f=0,l=a.length;f<l;f++){var c=a[f];if(!c||c===""){continue}i._private.classes[c]=true}}if(r===undefined||r){this.restore()}};e.Collection=function(n,r){if(!(this instanceof e.Collection)){return new e.Collection(n,r)}if(n===undefined||!e.is.core(n)){e.util.error("A collection must have a reference to the core");return}var i={};var s=[];var o=false;if(!r){r=[]}else{if(r.length>0&&e.is.plainObject(r[0])&&!e.is.element(r[0])){o=true;var u=[];var a={};for(var f=0,l=r.length;f<l;f++){var c=r[f];if(c.data==null){c.data={}}var h=c.data;if(h.id==null){h.id=t.generate(n,c)}else{if(n.getElementById(h.id).length!=0||a[h.id]){continue}}var p=new e.Element(n,c,false);u.push(p);a[h.id]=true}r=u}}for(var f=0,l=r.length;f<l;f++){var d=r[f];if(!d){continue}var v=d._private.data.id;if(!i[v]){i[v]=d;s.push(d)}}for(var f=0,l=s.length;f<l;f++){this[f]=s[f]}this.length=s.length;this._private={cy:n,ids:i};if(o){this.restore()}};e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype;e.elesfn.cy=function(){return this._private.cy};e.elesfn.element=function(){return this[0]};e.elesfn.collection=function(){if(e.is.collection(this)){return this}else{return new e.Collection(this._private.cy,[this])}};e.elesfn.json=function(){var t=this.element();if(t==null){return undefined}var n=t._private;var r=e.util.copy({data:n.data,position:n.position,group:n.group,bypass:n.bypass,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbed:n.grabbed,grabbable:n.grabbable,classes:""});var i=[];for(var s in n.classes){i.push(s)}for(var o=0;o<i.length;o++){var s=i[o];r.classes+=s+(o<i.length-1?" ":"")}return r};e.elesfn.restore=function(n){var r=this;var i=[];var s=r.cy();if(n===undefined){n=true}var o=[];var u=[],a=[];var f=0;var l=0;for(var c=0,h=r.length;c<h;c++){var p=r[c];if(p.isNode()){u.push(p);f++}else{a.push(p);l++}}o=u.concat(a);for(var c=0,h=o.length;c<h;c++){var p=o[c];if(!p.removed()){continue}var d=p._private;var v=d.data;if(v.id===undefined){v.id=t.generate(s,p)}else{if(e.is.emptyString(v.id)||!e.is.string(v.id)){continue}else{if(s.getElementById(v.id).length!=0){continue}}}var m=v.id;if(p.isEdge()){var g=p;var y=["source","target"];var b=y.length;for(var w=0;w<b;w++){var E=y[w];var S=v[E];if(S==null||S===""){continue}else{if(s.getElementById(S).empty()){continue}}}var x=s.getElementById(v.source);var T=s.getElementById(v.target);x._private.edges.push(g);T._private.edges.push(g)}d.ids={};d.ids[v.id]=p;d.removed=false;s.addToPool(p);i.push(p)}for(var c=0;c<f;c++){var N=o[c];var v=N._private.data;var m=v.id;var C=N._private.data.parent;var k=C!=null;if(k){var L=s.getElementById(C);if(L.empty()){delete v.parent}else{var A=false;var O=L;while(!O.empty()){if(N.same(O)){A=true;delete v.parent;break}O=O.parent()}if(!A){L[0]._private.children.push(N);s._private.hasCompoundNodes=true}}}}i=new e.Collection(s,i);if(i.length>0){var M=i.add(i.connectedNodes()).add(i.parent());M.updateStyle(n);if(n){i.rtrigger("add")}else{i.trigger("add")}}return r};e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed};e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed};e.elesfn.remove=function(t){function n(e){var t=e._private.edges;for(var n=0;n<t.length;n++){i(t[n])}}function r(e){var t=e._private.children;for(var n=0;n<t.length;n++){i(t[n])}}function i(e){var t=l[e.id()];if(t){return}else{l[e.id()]=true}if(e.isNode()){f.push(e);n(e);r(e)}else{f.unshift(e)}}function s(e,t){var n=e._private.edges;for(var r=0;r<n.length;r++){var i=n[r];if(t===i){n.splice(r,1);break}}}function o(e,t){t=t[0];e=e[0];var n=e._private.children;for(var r=0;r<n.length;r++){if(n[r][0]===t[0]){n.splice(r,1);break}}}var u=this;var a=[];var f=[];var l={};var c=u._private.cy;if(t===undefined){t=true}for(var h=0,p=u.length;h<p;h++){var d=u[h];i(d)}for(var h=0;h<f.length;h++){var d=f[h];d._private.removed=true;c.removeFromPool(d);a.push(d);if(d.isEdge()){var v=d.source()[0];var m=d.target()[0];s(v,d);s(m,d)}else{var g=d.parent();if(g.length!==0){o(g,d)}}}var y=c._private.elements;c._private.hasCompoundNodes=false;for(var h=0;h<y.length;h++){var d=y[h];if(d.isParent()){c._private.hasCompoundNodes=true;break}}var b=new e.Collection(this.cy(),a);if(b.size()>0){if(t){this.cy().notify({type:"remove",collection:b})}b.trigger("remove")}var w={};for(var h=0;h<f.length;h++){var d=f[h];var E=d._private.group==="nodes";var S=d._private.data.parent;if(E&&S!==undefined&&!w[S]){w[S]=true;var g=c.getElementById(S);if(g&&g.length!==0&&!g._private.removed&&g.children().length===0){g.updateStyle()}}}return this}})(cytoscape);(function(e){e.fn.eles({animated:function(){var e=this[0];if(e){return e._private.animation.current.length>0}},clearQueue:function(){for(var e=0;e<this.length;e++){var t=this[e];t._private.animation.queue=[]}return this},delay:function(e,t){this.animate({delay:e},{duration:e,complete:t});return this},animate:function(e,t){var n=+(new Date);var r=this._private.cy;var i=r.style();var s;if(t===undefined){t={}}if(t.duration===undefined){t.duration=400}switch(t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(e==null||e.position==null&&e.css==null&&e.delay==null){return this}if(e.css){e.css=i.getValueStyle(e.css)}for(var o=0;o<this.length;o++){var u=this[o];var a=u._private.position;var f={x:a.x,y:a.y};var l=i.getValueStyle(u);if(u.animated()&&(t.queue===undefined||t.queue)){s=u._private.animation.queue}else{s=u._private.animation.current}s.push({properties:e,duration:t.duration,params:t,callTime:n,startPosition:f,startStyle:l})}r.addToAnimationPool(this);return this},stop:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];var i=r._private.animation.current;for(var s=0;s<i.length;s++){var o=i[s];if(t){o.duration=0}}if(e){r._private.animation.queue=[]}}this.cy().notify({collection:this,type:"draw"});return this}})})(cytoscape);(function(e){e.fn.eles({addClass:function(t){t=t.split(/\s+/);var n=this;var r=[];for(var i=0;i<t.length;i++){var s=t[i];if(e.is.emptyString(s)){continue}for(var o=0;o<n.length;o++){var u=n[o];var a=u._private.classes[s];u._private.classes[s]=true;if(!a){r.push(u)}}}if(r.length>0){(new e.Collection(this._private.cy,r)).updateStyle()}n.trigger("class");return n},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes[e]},toggleClass:function(t,n){var r=t.split(/\s+/);var i=this;var s=[];for(var o=0,u=i.length;o<u;o++){var a=i[o];for(var f=0;f<r.length;f++){var l=r[f];if(e.is.emptyString(l)){continue}var c=a._private.classes[l];var h=n||n===undefined&&!c;if(h){a._private.classes[l]=true;if(!c){s.push(a)}}else{a._private.classes[l]=false;if(c){s.push(a)}}}}if(s.length>0){(new e.Collection(this._private.cy,s)).updateStyle()}i.trigger("class");return i},removeClass:function(t){t=t.split(/\s+/);var n=this;var r=[];for(var i=0;i<n.length;i++){var s=n[i];for(var o=0;o<t.length;o++){var u=t[o];if(!u||u===""){continue}var a=s._private.classes[u];delete s._private.classes[u];if(a){r.push(s)}}}if(r.length>0){(new e.Collection(n._private.cy,r)).updateStyle()}n.trigger("class");return n}})})(cytoscape);(function(e){e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},same:function(e){e=this.cy().collection(e);if(this.length!==e.length){return false}return this.intersect(e).length===this.length},anySame:function(e){e=this.cy().collection(e);return this.intersect(e).length>0},allAreNeighbors:function(e){e=this.cy().collection(e);return this.neighborhood().intersect(e).length===e.length}})})(cytoscape);(function(e){var t=1.4;var n=1;e.fn.eles({updateStyle:function(e){var t=this._private.cy;var n=t.style();e=e||e===undefined?true:false;n.apply(this);if(e){this.rtrigger("style")}else{this.trigger("style")}return this},updateMappers:function(e){var t=this._private.cy;var n=t.style();e=e||e===undefined?true:false;for(var r=0;r<this.length;r++){var i=this[r];n.apply(i)}if(e){this.rtrigger("style")}else{this.trigger("style")}return this},data:e.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:e.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:false}),rscratch:e.define.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:false}),id:function(){var e=this[0];if(e){return e._private.data.id}},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"rtrigger",allowGetting:true,validKeys:["x","y"]}),positions:function(t){if(e.is.plainObject(t)){this.position(t)}else{if(e.is.fn(t)){var n=t;for(var r=0;r<this.length;r++){var i=this[r];var t=n.apply(i,[r,i]);if(t&&!i.locked()){var s=i._private.position;s.x=t.x;s.y=t.y}}this.rtrigger("position")}}return this},renderedPosition:function(e){var t=this[0];var n=this.cy();var r=n.zoom();var i=n.pan();if(t&&t.isNode()){var s=t._private.position;var o={x:s.x*r+i.x,y:s.y*r+i.y};if(e===undefined){return o}else{return o[e]}}},renderedCss:function(e){var t=this[0];if(t){var n=t.cy().style().getRenderedStyle(t);if(e===undefined){return n}else{return n[e]}}},css:function(t,n){var r=this.cy().style();if(e.is.plainObject(t)){var i=t;r.applyBypass(this,i);this.rtrigger("style")}else{if(e.is.string(t)){if(n===undefined){var s=this[0];if(s){return s._private.style[t].strValue}else{return}}else{r.applyBypass(this,t,n);this.rtrigger("style")}}else{if(t===undefined){var s=this[0];if(s){return r.getRawStyle(s)}else{return}}}}return this},removeCss:function(){var e=this.cy().style();var t=this;for(var n=0;n<t.length;n++){var r=t[n];e.removeAllBypasses(r)}this.rtrigger("style")},show:function(){this.css("visibility","visible");return this},hide:function(){this.css("visibility","hidden");return this},visible:function(){var e=this[0];if(e){if(e.css("visibility")!=="visible"){return false}if(e.isNode()){var t=e.parents();for(var n=0;n<t.length;n++){var r=t[n];var i=r.css("visibility");if(i!=="visible"){return false}}return true}else{if(e.isEdge()){var s=e.source();var o=e.target();return s.visible()&&o.visible()}}}},hidden:function(){var e=this[0];if(e){return!this.visible()}},width:function(){var e=this[0];if(e){var t=this._private.style.width;return t.strValue==="auto"?e._private.autoWidth:t.pxValue}},outerWidth:function(){var e=this[0];if(e){var r=this._private.style;var i=r.width.strValue==="auto"?e._private.autoWidth:r.width.pxValue;var s=r["border-width"]?r["border-width"].pxValue*t+n:0;return i+s}},renderedWidth:function(){var e=this[0];if(e){var t=this.width();return t*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var t=this.outerWidth();return t*this.cy().zoom()}},height:function(){var e=this[0];if(e&&e.isNode()){var t=this._private.style.height;return t.strValue==="auto"?e._private.autoHeight:t.pxValue}},outerHeight:function(){var e=this[0];if(e){var r=this._private.style;var i=r.height.strValue==="auto"?e._private.autoHeight:r.height.pxValue;var s=r["border-width"]?r["border-width"].pxValue*t+n:0;return i+s}},renderedHeight:function(){var e=this[0];if(e){var t=this.height();return t*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e){var t=this.outerHeight();return t*this.cy().zoom()}},offset:function(){var e=this[0];if(e&&e.isNode()){var t={x:e._private.position.x,y:e._private.position.y};var n=e.parents();for(var r=0;r<n.length;r++){var i=n[r];var s=i._private.position;t.x+=s.x;t.y+=s.y}return t}},renderedOffset:function(){var e=this[0];if(e&&e.isNode()){var t=this.offset();var n=this.cy();var r=n.zoom();var i=n.pan();return{x:t.x*r+i.x,y:t.y*r+i.y}}},boundingBox:function(t){var n=this;if(!t||e.is.elementOrCollection(t)&&t.length===0){n=this}else{if(e.is.string(t)){n=this.filter(t)}else{if(e.is.elementOrCollection(t)){n=t}}}var r=Infinity;var i=-Infinity;var s=Infinity;var o=-Infinity;for(var u=0;u<n.length;u++){var a=n[u];var f,l,c,h,p,d;if(a.isNode()){var v=a._private.position;p=v.x;d=v.y;var m=a.outerWidth();var g=m/2;var y=a.outerHeight();var b=y/2;f=p-g;l=p+g;c=d-b;h=d+b;r=f<r?f:r;i=l>i?l:i;s=c<s?c:s;o=h>o?h:o}else{var w=a.source()[0]._private.position;var E=a.target()[0]._private.position;var S=a._private.rstyle;p=S.labelX;d=S.labelY;f=w.x;l=E.x;c=w.y;h=E.y;if(f>l){var x=f;f=l;l=x}if(c>h){var x=c;c=h;h=x}r=f<r?f:r;i=l>i?l:i;s=c<s?c:s;o=h>o?h:o;var T=S.bezierPts||[];var m=a._private.style.width.value;for(var N=0;N<T.length;N++){var C=T[N];r=C.x-m<r?C.x-m:r;i=C.x+m>i?C.x+m:i;s=C.y-m<s?C.y-m:s;o=C.y+m>o?C.y+m:o}}var k=a._private.style;var L=k.content.value;var A=k["font-size"];var O=k["text-halign"];var M=k["text-valign"];var _=a._private.rstyle.labelWidth;if(L&&A&&_!=undefined&&O&&M){var D=A.value;var P=_;var H,B,j,F;switch(O.value){case"left":H=f-P;B=f;break;case"center":H=p-P/2;B=p+P/2;break;case"right":H=l;B=l+P;break}if(a.isEdge()){H=p-P/2;B=p+P/2}switch(M.value){case"top":j=c-D;F=c;break;case"center":j=d-D/2;F=d+D/2;break;case"bottom":j=h;F=h+D;break}if(a.isEdge()){j=d-D/2;F=d+D/2}r=H<r?H:r;i=B>i?B:i;s=j<s?j:s;o=F>o?F:o}}return{x1:r,x2:i,y1:s,y2:o,w:i-r,h:o-s}}})})(cytoscape);(function(e){function t(e){return function(){var t=this;if(t.length===0){return}if(t.isNode()&&!t.removed()){var n=0;var r=t[0];var i=r._private.edges;for(var s=0;s<i.length;s++){var o=i[s];n+=e(r,o)}return n}else{return}}}function n(e,t){return function(){var n=undefined;var r=this.nodes();for(var i=0;i<r.length;i++){var s=r[i];var o=s[e]();if(o!==undefined&&(n===undefined||t(o,n))){n=o}}return n}}e.fn.eles({degree:t(function(e,t){if(t.source().same(t.target())){return 2}else{return 1}}),indegree:t(function(e,t){if(t.target().same(e)){return 1}else{return 0}}),outdegree:t(function(e,t){if(t.source().same(e)){return 1}else{return 0}})});e.fn.eles({minDegree:n("degree",function(e,t){return e<t}),maxDegree:n("degree",function(e,t){return e>t}),minIndegree:n("indegree",function(e,t){return e<t}),maxIndegree:n("indegree",function(e,t){return e>t}),minOutdegree:n("outdegree",function(e,t){return e<t}),maxOutdegree:n("outdegree",function(e,t){return e>t})});e.fn.eles({totalDegree:function(){var e=0;var t=this.nodes();for(var n=0;n<t.length;n++){e+=t[n].degree()}return e}})})(cytoscape);(function(e){e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:true}),once:e.define.on({unbindAllBindersOnTrigger:true}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){this.cy().notify({type:e,collection:this.filter(function(){return!this.removed()})});this.trigger(e,t);return this}});e.elesfn.bind=e.elesfn.on;e.elesfn.unbind=e.elesfn.off;e.define.event.aliasesOn(e.elesfn)})(cytoscape);(function(e){e.fn.eles({isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var e=this[0];if(e){return e._private.group}}})})(cytoscape);(function(e){e.fn.eles({each:function(t){if(e.is.fn(t)){for(var n=0;n<this.length;n++){var r=this[n];var i=t.apply(r,[n,r]);if(i===false){break}}}return this},toArray:function(){var e=[];for(var t=0;t<this.length;t++){e.push(this[t])}return e},slice:function(t,n){var r=[];var i=this.length;if(n==null){n=i}if(t<0){t=i+t}for(var s=t;s>=0&&s<n&&s<i;s++){r.push(this[s])}return new e.Collection(this.cy(),r)},size:function(){return this.length},eq:function(e){return this[e]},empty:function(){return this.length===0},nonempty:function(){return!this.empty()}})})(cytoscape);(function(e){function t(e){return function(){var t=arguments;if(t.length===2){var n=t[0];var r=t[1];this.bind(e.event,n,r)}else{if(t.length===1){var r=t[0];this.bind(e.event,r)}else{if(t.length===0){for(var i=0;i<this.length;i++){var s=this[i];if(!e.ableField||s._private[e.ableField]){s._private[e.field]=e.value}}this.updateStyle();this.trigger(e.event)}}}return this}}function n(n){e.elesfn[n.field]=function(){var e=this[0];if(e){return e._private[n.field]}};e.elesfn[n.on]=t({event:n.on,field:n.field,ableField:n.ableField,value:true});e.elesfn[n.off]=t({event:n.off,field:n.field,ableField:n.ableField,value:false})}n({field:"locked",on:"lock",off:"unlock"});n({field:"grabbable",on:"grabify",off:"ungrabify"});n({field:"selected",ableField:"selectable",on:"select",off:"unselect"});n({field:"selectable",on:"selectify",off:"unselectify"});e.elesfn.grabbed=function(){var e=this[0];if(e){return e._private.grabbed}};n({field:"active",on:"activate",off:"unactivate"});e.elesfn.inactive=function(){var e=this[0];if(e){return!e._private.active}}})(cytoscape);(function(e){function t(t){return function(n){var r=[];var i=this.edges();var s=this._private.cy;for(var o=0;o<i.length;o++){var u=i[o];var a=u._private.data[t.attr];var f=s.getElementById(a);if(f.length>0){r.push(f)}}return(new e.Collection(s,r)).filter(n)}}function n(t){return function(n){var r=[];var i=this._private.cy;var s=t||{};if(e.is.string(n)){n=i.$(n)}var o=n.connectedEdges();var u=this._private.ids;for(var a=0;a<o.length;a++){var f=o[a];var l;var c=f._private.data;if(s.thisIs){var h=c[s.thisIs];l=u[h]}else{l=u[c.source]||u[c.target]}if(l){r.push(f)}}return new e.Collection(i,r)}}function r(t){var n={codirected:false};t=e.util.extend({},n,t);return function(n){var r=this._private.cy;var i=[];var s=this.edges();var o=t;for(var u=0;u<s.length;u++){var a=s[u];var f=a.source()[0];var l=f.id();var c=a.target()[0];var h=c.id();var p=f._private.edges;for(var d=0;d<p.length;d++){var v=p[d];var m=v._private.data;var g=m.target;var y=m.source;var b=g===h&&y===l;var w=l===g&&h===y;if(o.codirected&&b||!o.codirected&&(b||w)){i.push(v)}}}return(new e.Collection(r,i)).filter(n)}}e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var n=this._private.cy;if(e.is.fn(t)){var r=[];for(var i=0;i<this.length;i++){var s=this[i];if(t.apply(s,[i,s])){r.push(s)}}return new e.Collection(n,r)}else{if(e.is.string(t)||e.is.elementOrCollection(t)){return(new e.Selector(t)).filter(this)}else{if(t===undefined){return this}}}return new e.Collection(n)},not:function(t){var n=this._private.cy;if(!t){return this}else{if(e.is.string(t)){t=this.filter(t)}var r=[];for(var i=0;i<this.length;i++){var s=this[i];var o=t._private.ids[s.id()];if(!o){r.push(s)}}return new e.Collection(n,r)}},intersect:function(t){var n=this;var r=this._private.cy;if(e.is.string(t)){var i=t;return this.filter(i)}var s=[];var o=this;var u=t;var a=this.length<t.length;var f=a?o._private.ids:u._private.ids;var l=a?u._private.ids:o._private.ids;for(var c in f){var h=l[c];if(h){s.push(h)}}return new e.Collection(r,s)},add:function(t){function n(e){if(!e){return}if(!u[e.id()]){o.push(e);u[e.id()]=true}}var r=this;var i=this._private.cy;if(!t){return this}if(e.is.string(t)){var s=t;t=i.elements(s)}var o=[];var u={};for(var a=0;a<r.length;a++){var f=r[a];n(f)}for(var a=0;a<t.length;a++){var f=t[a];n(f)}return new e.Collection(i,o)}});e.fn.eles({breadthFirstSearch:function(t,n){t=t||function(){};var r=this._private.cy;var i=this;var s=[];var o={};var u={};var a={};var f=[];for(var l=0;l<i.length;l++){if(i[l].isNode()){s.unshift(i[l]);o[i[l].id()]=true;u[i[l].id()]=0;f.push(i[l])}}l=0;while(s.length!==0){var c=s.shift();var h=0;var p=a[c.id()];while(p){h++;p=a[p]}u[c.id()]=h;var d=t.call(c,l,h);l++;if(d===true){return new e.Collection(r,[c])}else{if(d===false){break}}var v=c.connectedEdges(n?'[source = "'+c.id()+'"]':undefined);for(var m=0;m<v.length;m++){var g=v[m];var y=g.connectedNodes('[id != "'+c.id()+'"]');if(y.length!==0){y=y[0];if(!o[y.id()]){o[y.id()]=true;s.unshift(y);a[y.id()]=c.id();f.push(y);f.push(g)}}}}return new e.Collection(r,f)},depthFirstSearch:function(t,n){function r(e){var t=e.id();return a[t]||f[t]||l[t]||c[t]}t=t||function(){};var i=this._private.cy;var s=this;var o=[];var u=[];var a={};var f={};var l={};var c={};var h={};for(var p=0;p<s.length;p++){if(s[p].isNode()){o.push(s[p]);u[s[p].id()]=true}}while(o.length!==0){var d=o[o.length-1];var v=t.call(d);var m=false;if(v===true){return new e.Collection(i,[d])}var g=d.connectedEdges(n?'[source = "'+d.id()+'"]':undefined);for(var p=0;p<g.length;p++){var y=g[p];if(r(y)){continue}var b=y.connectedNodes('[id != "'+d.id()+'"]');if(b.length!==0){b=b[0];var w=b.id();if(!u[w]&&!h[w]){c[w]=true;u[w]=true;o.push(b);m=true;break}else{if(u[w]){f[w]=true}else{l[w]=true}}}}if(!m){h[d.id()]=true;o.pop()}}},roots:function(t){var n=this;var r=[];for(var i=0;i<n.length;i++){var s=n[i];if(!s.isNode()){continue}var o=s.connectedEdges('[target = "'+s.id()+'"][source != "'+s.id()+'"]').length>0;if(!o){r.push(s)}}return(new e.Collection(this._private.cy,r)).filter(t)},kruskal:function(t){function n(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.anySame(e)){return{eles:n,index:t}}}}t=t||function(){return 1};var r=new e.Collection(this._private.cy,[]);var i=[];var s=this.nodes();for(var o=0;o<s.length;o++){i.push(s[o].collection())}var u=this.edges();var a=u.toArray().sort(function(e,n){var r=t.call(e);var i=t.call(n);return r-i});for(var o=0;o<a.length;o++){var f=a[o];var l=f.source()[0];var c=f.target()[0];var h=n(l);var p=n(c);if(h.eles!==p.eles){r=r.add(f);i[h.index]=h.eles.add(p.eles);i.splice(p.index,1)}}return s.add(r)},dijkstra:function(t,n,r){var i=this._private.cy;r=!e.is.fn(n)?n:r;r=r===undefined||r;n=e.is.fn(n)?n:function(){return 1};if(this.length===0||!t||!e.is.elementOrCollection(t)||t.length===0){return new e.Collection(i,[])}var s=this[0];t=t[0];var o={};var u={};var a=i.nodes();for(var f=0;f<a.length;f++){o[a[f].id()]=Infinity}o[s.id()]=0;var l=a;var c=function(e){var t=Infinity;var n;for(var r in o){if(o[r]<t&&e.$("#"+r).length!==0){t=o[r];n=r}}return n};var h=function(e,t){var r=e.edgesWith(t);var i=Infinity;var s;for(var o=0;o<r.length;o++){var u=r[o];var a=n.call(u);if(a<i){i=a;s=u}}return{edge:s,dist:i}};while(l.length!==0){var p=c(l);var d=l.filter("#"+p);if(d.length===0){continue}l=l.not(d);if(d.same(t)){break}if(o[p]===Math.Infinite){break}var v=d.neighborhood().nodes();for(var f=0;f<v.length;f++){var m=v[f];var g=m.id();var y=h(d,m);var b=o[p]+y.dist;if(b<o[g]){o[g]=b;u[g]={node:m,edge:y.edge}}}}}});e.elesfn.bfs=e.elesfn.breadthFirstSearch;e.elesfn.dfs=e.elesfn.depthFirstSearch;e.fn.eles({neighborhood:function(t){var n=[];var r=this._private.cy;var i=this.nodes();for(var s=0;s<i.length;s++){var o=i[s];var u=o.connectedEdges();for(var a=0;a<u.length;a++){var f=u[a];var l=f.connectedNodes().not(o);if(l.length>0){n.push(l[0])}n.push(f[0])}}return(new e.Collection(r,n)).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});e.fn.eles({source:t({attr:"source"}),target:t({attr:"target"})});e.fn.eles({edgesWith:n(),edgesTo:n({thisIs:"source"})});e.fn.eles({connectedEdges:function(t){var n=[];var r=this._private.cy;var i=this.nodes();for(var s=0;s<i.length;s++){var o=i[s];var u=o._private.edges;for(var a=0;a<u.length;a++){var f=u[a];n.push(f)}}return(new e.Collection(r,n)).filter(t)},connectedNodes:function(t){var n=[];var r=this._private.cy;var i=this.edges();for(var s=0;s<i.length;s++){var o=i[s];n.push(o.source()[0]);n.push(o.target()[0])}return(new e.Collection(r,n)).filter(t)},parallelEdges:r(),codirectedEdges:r({codirected:true}),parallelIndex:function(){var e=this[0];if(e.isEdge()){var t=e.source()[0];var n=t._private.edges;var r=0;for(var i=0;i<n.length;i++){var s=n[i];var o=s===e;if(o){return r}var u=e._private.data.source===s._private.data.source&&e._private.data.target===s._private.data.target;var a=e._private.data.source===s._private.data.target&&e._private.data.target===s._private.data.source;var f=u||a;if(f){r++}}}},parallelSize:function(){var e=this[0];if(e.isEdge()){var t=e.source()[0];var n=t._private.edges;var r=0;for(var i=0;i<n.length;i++){var s=n[i];var o=e._private.data.source===s._private.data.source&&e._private.data.target===s._private.data.target;var u=e._private.data.source===s._private.data.target&&e._private.data.target===s._private.data.source;var a=o||u;if(a){r++}}return r}}});e.fn.eles({parent:function(t){var n=[];var r=this._private.cy;for(var i=0;i<this.length;i++){var s=this[i];var o=r.getElementById(s._private.data.parent);if(o.size()>0){n.push(o)}}return(new e.Collection(r,n)).filter(t)},parents:function(t){var n=[];var r=this.parent();while(r.nonempty()){for(var i=0;i<r.length;i++){var s=r[i];n.push(s)}r=r.parent()}return(new e.Collection(this.cy(),n)).filter(t)},children:function(t){var n=[];for(var r=0;r<this.length;r++){var i=this[r];n=n.concat(i._private.children)}return(new e.Collection(this.cy(),n)).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e){return e._private.children.length!==0}},isChild:function(){var e=this[0];if(e){return e._private.data.parent!==undefined&&e.parent().length!==0}},descendants:function(t){function n(e){for(var t=0;t<e.length;t++){var i=e[t];r.push(i);if(i.children().nonempty()){n(i.children())}}}var r=[];n(this.children());return(new e.Collection(this.cy(),r)).filter(t)}})})(cytoscape);(function($$){$$.fn.selector=function(e,t){for(var n in e){var r=e[n];$$.Selector.prototype[n]=r}};$$.Selector=function(e,t){function n(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}if(!(this instanceof $$.Selector)){return new $$.Selector(e,t)}if(t===undefined&&e!==undefined){t=e;e=undefined}var r=this;r._private={selectorText:null,invalid:true};if(!t||$$.is.string(t)&&t.match(/^\s*$/)){if(e==null){r.length=0}else{r[0]=n();r[0].group=e;r.length=1}}else{if($$.is.element(t)){var i=new $$.Collection(r.cy(),[t]);r[0]=n();r[0].collection=i;r.length=1}else{if($$.is.collection(t)){r[0]=n();r[0].collection=t;r.length=1}else{if($$.is.fn(t)){r[0]=n();r[0].filter=t;r.length=1}else{if($$.is.string(t)){var s="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";var o="(?:[\\w-]|(?:\\\\"+s+"))+";var u="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var a="\\?|\\!|\\^";var f="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var l=$$.util.regex.number;var c=f+"|"+l;var h="degree|indegree|outdegree";var p="\\s*,\\s*";var d=o;var v="\\s+";var m="\\s+>\\s+";var g="\\$";var y=o;function b(e){return e.replace(new RegExp("\\\\("+s+")","g"),"")}var w=u.split("|");for(var E=0;E<w.length;E++){var S=w[E];u+="|@"+S}var x=null;var T={group:{query:true,regex:"(node|edge|\\*)",populate:function(e){this.group=e=="*"?e:e+"s"}},state:{query:true,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:active|:inactive|:touch)",populate:function(e){this.colonSelectors.push(e)}},id:{query:true,regex:"\\#("+y+")",populate:function(e){this.ids.push(b(e))}},className:{query:true,regex:"\\.("+d+")",populate:function(e){this.classes.push(b(e))}},dataExists:{query:true,regex:"\\[\\s*("+o+")\\s*\\]",populate:function(e){this.data.push({field:b(e)})}},dataCompare:{query:true,regex:"\\[\\s*("+o+")\\s*("+u+")\\s*("+c+")\\s*\\]",populate:function(e,t,n){this.data.push({field:b(e),operator:t,value:n})}},dataBool:{query:true,regex:"\\[\\s*("+a+")\\s*("+o+")\\s*\\]",populate:function(e,t){this.data.push({field:b(t),operator:e})}},metaCompare:{query:true,regex:"\\{\\s*("+h+")\\s*("+u+")\\s*("+l+")\\s*\\}",populate:function(e,t,n){this.meta.push({field:b(e),operator:t,value:n})}},nextQuery:{separator:true,regex:p,populate:function(){r[++E]=n();x=null}},child:{separator:true,regex:m,populate:function(){var e=n();e.parent=this;e.subject=x;r[E]=e}},descendant:{separator:true,regex:v,populate:function(){var e=n();e.ancestor=this;e.subject=x;r[E]=e}},subject:{modifier:true,regex:g,populate:function(){if(x!=null&&this.subject!=this){$$.util.error("Redefinition of subject in selector `"+t+"`");return false}x=this;this.subject=this}}};var N=0;for(var C in T){T[N]=T[C];T[N].name=C;N++}T.length=N;r._private.selectorText=t;var k=t;var E=0;function L(e){var t;var n;var r;for(var i=0;i<T.length;i++){var s=T[i];var o=s.name;if($$.is.fn(e)&&!e(o,s)){continue}var u=k.match(new RegExp("^"+s.regex));if(u!=null){n=u;t=s;r=o;var a=u[0];k=k.substring(a.length);break}}return{expr:t,match:n,name:r}}function A(){var e=k.match(/^\s+/);if(e){var t=e[0];k=k.substring(t.length)}}r[0]=n();A();for(;;){var O=L();if(O.expr==null){$$.util.error("The selector `"+t+"`is invalid");return}else{var M=[];for(var N=1;N<O.match.length;N++){M.push(O.match[N])}var _=O.expr.populate.apply(r[E],M);if(_===false){return}}if(k.match(/^\s*$/)){break}}r.length=E+1;for(N=0;N<r.length;N++){var D=r[N];if(D.subject!=null){for(;;){if(D.subject==D){break}if(D.parent!=null){var P=D.parent;var m=D;m.parent=null;P.child=m;D=P}else{if(D.ancestor!=null){var H=D.ancestor;var v=D;v.ancestor=null;H.descendant=v;D=H}else{$$.util.error("When adjusting references for the selector `"+D+"`, neither parent nor ancestor was found");break}}}r[N]=D.subject}}if(e!=null){for(var N=0;N<r.length;N++){if(r[N].group!=null&&r[N].group!=e){$$.util.error("Group `"+r[N].group+"` conflicts with implicit group `"+e+"` in selector `"+t+"`");return}r[N].group=e}}}else{$$.util.error("A selector must be created from a string; found "+t);return}}}}}r._private.invalid=false};$$.selfn=$$.Selector.prototype;$$.selfn.size=function(){return this.length};$$.selfn.eq=function(e){return this[e]};$$.selfn.find=function(){};$$.selfn.filter=function(collection,addLiveFunction){var self=this;var cy=collection.cy();if(self._private.invalid){return new $$.Collection(cy)}var queryMatches=function(query,element){function operandsMatch(params){var allDataMatches=true;for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=(new RegExp(valStr+"$")).exec(fieldStr)!=null;break;case"^=":matches=(new RegExp("^"+valStr)).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)}}if(!matches){allDataMatches=false;break}}return allDataMatches}function confirmRelations(e,t){if(e!=null){var n=false;t=t();for(var r=0;r<t.size();r++){if(queryMatches(e,t.eq(r))){n=true;break}}return n}else{return true}}if(query.group!=null&&query.group!="*"&&query.group!=element._private.group){return false}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch);break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){return false}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;allIdsMatch=allIdsMatch&&id==actualId;if(!allIdsMatch){break}}if(!allIdsMatch){return false}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){return false}var allDataMatches=operandsMatch({name:"data",fieldValue:function(e){return element._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return element._private.data[e]===undefined},fieldTruthy:function(e){if(element._private.data[e]){return true}return false}});if(!allDataMatches){return false}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(e){return element[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return element[e]()==undefined},fieldTruthy:function(e){if(element[e]()){return true}return false}});if(!allMetaMatches){return false}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){return false}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){return false}if(!confirmRelations(query.parent,function(){return element.parent()})){return false}if(!confirmRelations(query.ancestor,function(){return element.parents()})){return false}if(!confirmRelations(query.child,function(){return element.children()})){return false}if(!confirmRelations(query.descendant,function(){return element.descendants()})){return false}return true};var selectorFunction=function(e,t){for(var n=0;n<self.length;n++){var r=self[n];if(queryMatches(r,t)){return true}}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);return filteredCollection};$$.selfn.toString=$$.selfn.selector=function(){function e(e){if($$.is.string(e)){return e}return""}function t(n){var i="";var s=e(n.group);i+=s.substring(0,s.length-1);for(var o=0;o<n.data.length;o++){var u=n.data[o];i+="["+u.field+e(u.operator)+e(u.value)+"]"}for(var o=0;o<n.meta.length;o++){var a=n.meta[o];i+="{"+a.field+e(a.operator)+e(a.value)+"}"}for(var o=0;o<n.colonSelectors.length;o++){var f=n.colonSelectors[r];i+=f}for(var o=0;o<n.ids.length;o++){var f="#"+n.ids[r];i+=f}for(var o=0;o<n.classes.length;o++){var f="."+n.classes[r];i+=f}if(n.parent!=null){i=t(n.parent)+" > "+i}if(n.ancestor!=null){i=t(n.ancestor)+" "+i}if(n.child!=null){i+=" > "+t(n.child)}if(n.descendant!=null){i+=" "+t(n.descendant)}return i}var n="";for(var r=0;r<this.length;r++){var i=this[r];n+=t(i);if(this.length>1&&r<this.length-1){n+=", "}}return n}})(cytoscape);(function(e){function t(e){}t.prototype.notify=function(e){};e("renderer","null",t)})(cytoscape);(function(e){function t(e){this.options=e;this.data={select:[undefined,undefined,undefined,undefined,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(f),canvasRedrawReason:new Array(f),canvasNeedsRedraw:new Array(f),bufferCanvases:new Array(d)};this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:false,initialPan:[null,null],capture:false};this.timeoutData={panTimeout:null};this.dragData={possibleDragElements:[]};this.touchData={start:null,capture:false,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:true,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};this.zoomData={freeToZoom:false,lastPointerX:null};this.redraws=0;this.bindings=[];this.init();for(var t=0;t<f;t++){this.data.canvases[t]=document.createElement("canvas");this.data.canvases[t].style.position="absolute";this.data.canvases[t].setAttribute("data-id","layer"+t);this.data.canvases[t].style.zIndex=String(f-t);this.data.container.appendChild(this.data.canvases[t]);this.data.canvasRedrawReason[t]=new Array;this.data.canvasNeedsRedraw[t]=false}this.data.canvases[p].setAttribute("data-id","layer"+p+"-node");this.data.canvases[l].setAttribute("data-id","layer"+l+"-selectbox");this.data.canvases[c].setAttribute("data-id","layer"+c+"-drag");this.data.canvases[h].setAttribute("data-id","layer"+h+"-overlay");for(var t=0;t<d;t++){this.data.bufferCanvases[t]=document.createElement("canvas");this.data.bufferCanvases[t].style.position="absolute";this.data.bufferCanvases[t].setAttribute("data-id","buffer"+t);this.data.bufferCanvases[t].style.zIndex=String(-t-1);this.data.bufferCanvases[t].style.visibility="visible";this.data.container.appendChild(this.data.bufferCanvases[t])}var n=document.createElement("div");this.data.container.appendChild(n);this.data.overlay=n;n.style.position="absolute";n.style.zIndex=1e3;this.hideEdgesOnViewport=e.hideEdgesOnViewport;this.load()}var r="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;var i=function(){return Date.now()};var s={};var o={};var u=t.prototype;var a=400;var f=5,l=0,c=2,h=3,p=4,d=2;t.prototype.notify=function(e){if(e.type=="destroy"){this.destroy();return}else{if(e.type=="add"||e.type=="remove"||e.type=="load"){this.updateNodesCache();this.updateEdgesCache()}}if(e.type=="viewport"){this.data.canvasNeedsRedraw[l]=true;this.data.canvasRedrawReason[l].push("viewchange")}this.data.canvasNeedsRedraw[c]=true;this.data.canvasRedrawReason[c].push("notify");this.data.canvasNeedsRedraw[p]=true;this.data.canvasRedrawReason[p].push("notify");this.redraws++;this.redraw()};t.prototype.registerBinding=function(e,t,n,r){this.bindings.push({target:e,event:t,handler:n,useCapture:r});e.addEventListener(t,n,r)};t.prototype.destroy=function(){this.destroyed=true;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e];var n=t;n.target.removeEventListener(n.event,n.handler,n.useCapture)}};t.prototype.png=function(){var e=this.data;if(this.data.container.clientHeight>0&&this.data.container.clientWidth>0){context=e.bufferCanvases[1].getContext("2d");context.globalCompositeOperation="copy";context.drawImage(e.canvases[4],0,0);context.globalCompositeOperation="source-over";context.drawImage(e.canvases[2],0,0);context.drawImage(e.canvases[0],0,0);context=e.bufferCanvases[0].getContext("2d");context.globalCompositeOperation="copy";context.drawImage(e.bufferCanvases[1],0,0)}var t=this.data.bufferCanvases[0];return t.toDataURL("image/png")};t.prototype.load=function(){function n(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}var r=this;var s=function(e,t,n){function r(t){while(t.parent().nonempty()&&t.parent().id()!==e.id()){parent=t.parent()[0];var n=parent._private.style;if(n.width.value!=="auto"||n.height.value!=="auto"){return true}t=t.parent()}return false}if(!t){var i=e.parents();for(var s=0;s<i.size();s++){if(i[s]._private.selected){return}}}var o=e.descendants();for(var s=0;s<o.size();s++){if(t||!o[s]._private.selected){o[s]._private.rscratch.inDragLayer=true;n.push(o[s]);for(var u=0;u<o[s]._private.edges.length;u++){o[s]._private.edges[u]._private.rscratch.inDragLayer=true}}}};var o=function(e,t){e._private.grabbed=true;e._private.rscratch.inDragLayer=true;t.push(e);for(var n=0;n<e._private.edges.length;n++){e._private.edges[n]._private.rscratch.inDragLayer=true}};var u=function(e,t){var n=e;while(n.parent().nonempty()){n=n.parent()[0]}if(n==e&&t){return}var r=n.descendants().add(n);for(var i=0;i<r.size();i++){r[i]._private.rscratch.inDragLayer=t;for(var s=0;s<r[i]._private.edges.length;s++){r[i]._private.edges[s]._private.rscratch.inDragLayer=t}}};t.prototype.nodeIsDraggable=function(e){if(e._private.style.opacity.value!=0&&e._private.style.visibility.value=="visible"&&!e._private.locked&&e._private.grabbable){return true}return false};r.registerBinding(window,"resize",function(e){r.data.canvasNeedsRedraw[p]=true;r.data.canvasNeedsRedraw[h]=true;r.matchCanvasSize(r.data.container);r.redraw()},true);r.registerBinding(r.data.container,"contextmenu",function(e){e.preventDefault()});r.registerBinding(r.data.container,"mousedown",function(t){t.preventDefault();r.hoverData.capture=true;r.hoverData.which=t.which;var n=r.data.cy;var i=r.projectIntoViewport(t.pageX,t.pageY);var f=r.data.select;var c=r.findNearestElement(i[0],i[1],true);var h=r.hoverData.down;var p=r.dragData.possibleDragElements;var d=new e.Event(t,{type:"grab"});if(t.which==3){if(c){c.activate();c.trigger(new e.Event(t,{type:"cxttapstart"}));r.hoverData.down=c;r.hoverData.downTime=(new Date).getTime();r.hoverData.cxtDragged=false}}else{if(t.which==1){if(c){c.activate()}if(c!=null&&r.nodeIsDraggable(c)){if(c._private.group=="nodes"&&c._private.selected==false){p=r.dragData.possibleDragElements=[];o(c,p);c.trigger(d);if(c._private.style.width.value=="auto"||c._private.style.height.value=="auto"){s(c,true,p)}u(c,true)}if(c._private.group=="nodes"&&c._private.selected==true){p=r.dragData.possibleDragElements=[];var v=false;var m=n.$("node:selected");for(var g=0;g<m.length;g++){if(r.nodeIsDraggable(m[g])){o(m[g],p);if(!v){c.trigger(d);v=true}if(m[g]._private.style.width.value=="auto"||m[g]._private.style.height.value=="auto"){s(m[g],false,p)}u(m[g],true)}}}c.trigger(new e.Event(t,{type:"mousedown"})).trigger(new e.Event(t,{type:"tapstart"})).trigger(new e.Event(t,{type:"vmousedown"}))}else{if(c==null){n.trigger(new e.Event(t,{type:"mousedown"})).trigger(new e.Event(t,{type:"tapstart"})).trigger(new e.Event(t,{type:"vmousedown"}))}}r.hoverData.down=c;r.hoverData.downTime=(new Date).getTime();if(c==null||c.isEdge()){f[4]=1;var y=Math.max(0,a-(+(new Date)-r.hoverData.downTime));clearTimeout(r.bgActiveTimeout);r.bgActiveTimeout=setTimeout(function(){if(c){c.unactivate()}r.data.bgActivePosistion={x:i[0],y:i[1]};r.data.canvasNeedsRedraw[l]=true;r.data.canvasRedrawReason[l].push("bgactive");r.redraw()},y)}}}f[0]=f[2]=i[0];f[1]=f[3]=i[1];r.redraw()},false);r.registerBinding(window,"mousemove",function(t){var n=false;var i=r.hoverData.capture;if(!i){var s=r.findContainerPageCoords();if(t.pageX>s[0]&&t.pageX<s[0]+r.data.container.clientWidth&&t.pageY>s[1]&&t.pageY<s[1]+r.data.container.clientHeight){}else{return}}var o=r.data.cy;var u=r.projectIntoViewport(t.pageX,t.pageY);var f=r.data.select;var h=r.findNearestElement(u[0],u[1],true);var d=r.hoverData.last;var v=r.hoverData.down;var m=[u[0]-f[2],u[1]-f[3]];var g=r.getCachedNodes();var y=r.getCachedEdges();var b=r.dragData.possibleDragElements;var w=t.shiftKey;n=true;var E=new e.Event(t,{type:"mousemove"});if(h!=null){h.trigger(E)}else{if(h==null){o.trigger(E)}}if(r.hoverData.which===3){var S=new e.Event(t,{type:"cxtdrag"});if(v){v.trigger(S)}else{o.trigger(S)}r.hoverData.cxtDragged=true}else{if(r.hoverData.dragging){n=true;if(o.panningEnabled()){var x={x:m[0]*o.zoom(),y:m[1]*o.zoom()};o.panBy(x)}u=r.projectIntoViewport(t.pageX,t.pageY)}else{if(f[4]==1&&(v==null||v.isEdge())&&(!o.boxSelectionEnabled()||+(new Date)-r.hoverData.downTime>=a)&&Math.abs(f[3]-f[1])+Math.abs(f[2]-f[0])<4&&o.panningEnabled()){r.hoverData.dragging=true;f[4]=0}else{if(o.boxSelectionEnabled()&&Math.pow(f[2]-f[0],2)+Math.pow(f[3]-f[1],2)>7&&f[4]){clearTimeout(r.bgActiveTimeout)}if(v&&v.isEdge()&&v.active()){v.unactivate()}if(h!=d){if(d){d.trigger(new e.Event(t,{type:"mouseout"}))}if(h){h.trigger(new e.Event(t,{type:"mouseover"}))}r.hoverData.last=h}if(v&&v.isNode()&&r.nodeIsDraggable(v)){r.dragData.didDrag=true;var T=[];for(var N=0;N<b.length;N++){if(b[N]._private.group=="nodes"&&r.nodeIsDraggable(b[N])){b[N]._private.position.x+=m[0];b[N]._private.position.y+=m[1];T.push(b[N])}}(new e.Collection(o,T)).trigger(new e.Event(t,{type:"drag"})).trigger(new e.Event(t,{type:"position"}));if(f[2]==f[0]&&f[3]==f[1]){r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("Node(s) and edge(s) moved to drag layer")}r.data.canvasNeedsRedraw[c]=true;r.data.canvasRedrawReason[c].push("Nodes dragged")}if(o.boxSelectionEnabled()){r.data.canvasNeedsRedraw[l]=true;r.data.canvasRedrawReason[l].push("Mouse moved, redraw selection box")}n=true}}}f[2]=u[0];f[3]=u[1];r.redraw();if(n){if(t.stopPropagation){t.stopPropagation()}if(t.preventDefault){t.preventDefault()}t.cancelBubble=true;t.returnValue=false;return false}},false);r.registerBinding(window,"mouseup",function(t){var n=r.hoverData.capture;if(!n){return}r.hoverData.capture=false;var i=r.data.cy;var s=r.projectIntoViewport(t.pageX,t.pageY);var o=r.data.select;var a=r.findNearestElement(s[0],s[1],true);var f=r.getCachedNodes();var h=r.getCachedEdges();var d=r.dragData.possibleDragElements;var v=r.hoverData.down;var m=t.shiftKey;r.data.bgActivePosistion=undefined;clearTimeout(r.bgActiveTimeout);if(v){v.unactivate()}if(r.hoverData.which===3){var g=new e.Event(t,{type:"cxttapend"});if(v){v.trigger(g)}else{i.trigger(g)}if(!r.hoverData.cxtDragged){var y=new e.Event(t,{type:"cxttap"});if(v){v.trigger(y)}else{i.trigger(y)}}r.hoverData.cxtDragged=false;r.hoverData.which=null}else{if(v==null&&!r.dragData.didDrag&&!(Math.pow(o[2]-o[0],2)+Math.pow(o[3]-o[1],2)>7&&o[4])&&!r.hoverData.dragging){i.$(":selected").unselect();if(d.length>0){r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("De-select")}r.dragData.possibleDragElements=d=[]}if(Math.pow(o[2]-o[0],2)+Math.pow(o[3]-o[1],2)==0){if(a!=null){a.trigger(new e.Event(t,{type:"click"})).trigger(new e.Event(t,{type:"tap"})).trigger(new e.Event(t,{type:"vclick"}))}else{if(a==null){i.trigger(new e.Event(t,{type:"click"})).trigger(new e.Event(t,{type:"tap"})).trigger(new e.Event(t,{type:"vclick"}))}}}if(a!=null){a.trigger(new e.Event(t,{type:"mouseup"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"}))}else{if(a==null){i.trigger(new e.Event(t,{type:"mouseup"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"}))}}if(a==v&&!r.dragData.didDrag){if(a!=null&&a._private.selectable){if(!m){i.$(":selected").unselect()}if(a.selected()){a.unselect()}else{a.select()}u(a,false);r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("sglslct")}}else{if(a==v){if(a!=null&&a._private.grabbed){var b=i.$(":grabbed");for(var w=0;w<b.length;w++){var E=b[w];E._private.grabbed=false;var S=E._private.edges;for(var x=0;x<S.length;x++){S[x]._private.rscratch.inDragLayer=false}u(E,false)}var T=new e.Event(t,{type:"free"});b.trigger(T)}}}if(i.boxSelectionEnabled()&&Math.pow(o[2]-o[0],2)+Math.pow(o[3]-o[1],2)>7&&o[4]){if(!m){i.$(":selected").unselect()}var N=[];var C=r.getAllInBox(o[0],o[1],o[2],o[3]);var k=new e.Event(t,{type:"select"});for(var w=0;w<C.length;w++){if(C[w]._private.selectable){d.push(C[w]);N.push(C[w])}}(new e.Collection(i,N)).select();if(C.length>0){r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("Selection")}}r.hoverData.dragging=false;if(!o[4]){var T=new e.Event(t,{type:"free"});for(var w=0;w<d.length;w++){if(d[w]._private.group=="nodes"){d[w]._private.rscratch.inDragLayer=false;var S=d[w]._private.edges;for(var x=0;x<S.length;x++){S[x]._private.rscratch.inDragLayer=false}u(d[w],false)}else{if(d[w]._private.group=="edges"){d[w]._private.rscratch.inDragLayer=false}}}if(v){v.trigger(T)}r.data.canvasNeedsRedraw[c]=true;r.data.canvasRedrawReason[c].push("Node/nodes back from drag");r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("Node/nodes back from drag")}}o[4]=0;r.hoverData.down=null;r.data.canvasNeedsRedraw[l]=true;r.data.canvasRedrawReason[l].push("Mouse up, selection box gone");r.dragData.didDrag=false;r.redraw()},false);var f=function(e){var t=r.data.cy;var n=r.projectIntoViewport(e.pageX,e.pageY);var i=[n[0]*t.zoom()+t.pan().x,n[1]*t.zoom()+t.pan().y];if(r.zoomData.freeToZoom){e.preventDefault();var s=e.wheelDeltaY/1e3||e.detail/-32;if(t.panningEnabled()&&t.zoomingEnabled()){t.zoom({level:t.zoom()*Math.pow(10,s),position:{x:i[0],y:i[1]}})}r.data.wheel=true;clearTimeout(r.data.wheelTimeout);r.data.wheelTimeout=setTimeout(function(){r.data.wheel=false;r.data.canvasNeedsRedraw[p]=true;r.redraw()},100)}};r.registerBinding(r.data.container,"mousewheel",f,true);r.registerBinding(r.data.container,"DOMMouseScroll",f,true);r.registerBinding(r.data.container,"MozMousePixelScroll",function(e){if(r.zoomData.freeToZoom){e.preventDefault()}},false);r.registerBinding(r.data.container,"mousemove",function(e){if(r.zoomData.lastPointerX&&r.zoomData.lastPointerX!=e.pageX&&!r.zoomData.freeToZoom){r.zoomData.freeToZoom=true}r.zoomData.lastPointerX=e.pageX},false);r.registerBinding(r.data.container,"mouseout",function(e){r.zoomData.freeToZoom=false;r.zoomData.lastPointerX=null},false);r.registerBinding(r.data.container,"mouseout",function(t){r.data.cy.trigger(new e.Event(t,{type:"mouseout"}))},false);r.registerBinding(r.data.container,"mouseover",function(t){r.data.cy.trigger(new e.Event(t,{type:"mouseover"}))},false);var d,v,m,g;var y;var b,w;var E,S;var x=r.data.container.clientWidth,T=r.data.container.clientHeight;var N;r.registerBinding(r.data.container,"touchstart",function(t){if(t.target!==r.data.link){t.preventDefault()}r.touchData.capture=true;r.data.bgActivePosistion=undefined;var a=r.data.cy;var f=r.getCachedNodes();var c=r.getCachedEdges();var h=r.touchData.now;var p=r.touchData.earlier;if(t.touches[0]){var C=r.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);h[0]=C[0];h[1]=C[1]}if(t.touches[1]){var C=r.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);h[2]=C[0];h[3]=C[1]}if(t.touches[2]){var C=r.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);h[4]=C[0];h[5]=C[1]}if(t.touches[1]){function k(e){for(var t=0;t<e.length;t++){e[t]._private.grabbed=false;e[t]._private.rscratch.inDragLayer=false;if(e[t].active()){e[t].unactivate()}}}k(f);k(c);var L=r.findContainerPageCoords();S=L[1];E=L[0];d=t.touches[0].pageX-E;v=t.touches[0].pageY-S;m=t.touches[1].pageX-E;g=t.touches[1].pageY-S;N=0<=d&&d<=x&&0<=m&&m<=x&&0<=v&&v<=T&&0<=g&&g<=T;var A=a.pan();var O=a.zoom();y=n(d,v,m,g);b=[(d+m)/2,(v+g)/2];w=[(b[0]-A.x)/O,(b[1]-A.y)/O];if(y<100){var M=r.findNearestElement(h[0],h[1],true);var _=r.findNearestElement(h[2],h[3],true);var D=new e.Event(t,{type:"cxttapstart"});if(M&&M.isNode()){M.activate().trigger(D);r.touchData.start=M}else{if(_&&_.isNode()){_.activate().trigger(D);r.touchData.start=_}else{a.trigger(D);r.touchData.start=null}}if(r.touchData.start){r.touchData.start._private.grabbed=false}r.touchData.cxt=true;r.touchData.cxtDragged=false;r.data.bgActivePosistion=undefined;r.redraw();return}}if(t.touches[2]){}else{if(t.touches[1]){}else{if(t.touches[0]){var P=r.findNearestElement(h[0],h[1],true);if(P!=null){P.activate();r.touchData.start=P;if(P._private.group=="nodes"&&r.nodeIsDraggable(P)){var H=r.dragData.touchDragEles=[];o(P,H);P.trigger(new e.Event(t,{type:"grab"}));if(P.selected()){H=r.dragData.touchDragEles=[];var B=a.$("node:selected");for(var j=0;j<B.length;j++){var F=B[j];if(r.nodeIsDraggable(F)){H.push(F);F._private.rscratch.inDragLayer=true;var I=F._private.edges;for(var q=0;q<I.length;q++){I[q]._private.rscratch.inDragLayer=true}if(F._private.style.width.value=="auto"||F._private.style.height.value=="auto"){s(F,false,H)}u(F,true)}}}else{if(P._private.style.width.value=="auto"||P._private.style.height.value=="auto"){s(P,true,H)}u(P,true)}}P.trigger(new e.Event(t,{type:"touchstart"})).trigger(new e.Event(t,{type:"tapstart"})).trigger(new e.Event(t,{type:"vmousdown"}))}if(P==null){a.trigger(new e.Event(t,{type:"touchstart"})).trigger(new e.Event(t,{type:"tapstart"})).trigger(new e.Event(t,{type:"vmousedown"}));r.data.bgActivePosistion={x:C[0],y:C[1]};r.data.canvasNeedsRedraw[l]=true;r.data.canvasRedrawReason[l].push("bgactive")}for(var R=0;R<h.length;R++){p[R]=h[R];r.touchData.startPosition[R]=h[R]}r.touchData.singleTouchMoved=false;r.touchData.singleTouchStartTime=i();var U=setTimeout(function(){if(r.touchData.singleTouchMoved==false&&i()-r.touchData.singleTouchStartTime>250){if(r.touchData.start){r.touchData.start.trigger(new e.Event(t,{type:"taphold"}))}else{r.data.cy.trigger(new e.Event(t,{type:"taphold"}));a.$(":selected").unselect()}}},1e3)}}}r.redraw()},false);r.registerBinding(window,"touchmove",function(t){var i=r.data.select;var s=r.touchData.capture;s&&t.preventDefault();var o=r.data.cy;var u=r.getCachedNodes();var a=r.getCachedEdges();var f=r.touchData.now;var h=r.touchData.earlier;if(t.touches[0]){var b=r.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);f[0]=b[0];f[1]=b[1]}if(t.touches[1]){var b=r.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);f[2]=b[0];f[3]=b[1]}if(t.touches[2]){var b=r.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);f[4]=b[0];f[5]=b[1]}var x=[];for(var T=0;T<f.length;T++){x[T]=f[T]-h[T]}if(s&&r.touchData.cxt){var C=t.touches[0].pageX-E,k=t.touches[0].pageY-S;var L=t.touches[1].pageX-E,A=t.touches[1].pageY-S;var O=n(C,k,L,A);var M=O/y;if(M>=1.5||O>=150){r.touchData.cxt=false;if(r.touchData.start){r.touchData.start.unactivate();r.touchData.start=null}r.data.bgActivePosistion=undefined;r.data.canvasNeedsRedraw[l]=true;var _=new e.Event(t,{type:"cxttapend"});if(r.touchData.start){r.touchData.start.trigger(_)}else{o.trigger(_)}}}if(s&&r.touchData.cxt){var _=new e.Event(t,{type:"cxtdrag"});r.data.bgActivePosistion=undefined;r.data.canvasNeedsRedraw[l]=true;if(r.touchData.start){r.touchData.start.trigger(_)}else{o.trigger(_)}if(r.touchData.start){r.touchData.start._private.grabbed=false}r.touchData.cxtDragged=true}else{if(s&&t.touches[2]&&o.boxSelectionEnabled()){r.data.bgActivePosistion=undefined;clearTimeout(this.threeFingerSelectTimeout);this.lastThreeTouch=+(new Date);r.data.canvasNeedsRedraw[l]=true;r.data.canvasRedrawReason[l].push("Touch moved, redraw selection box");if(!i||i.length===0||i[0]===undefined){i[0]=(f[0]+f[2]+f[4])/3;i[1]=(f[1]+f[3]+f[5])/3;i[2]=(f[0]+f[2]+f[4])/3+1;i[3]=(f[1]+f[3]+f[5])/3+1}else{i[2]=(f[0]+f[2]+f[4])/3;i[3]=(f[1]+f[3]+f[5])/3}i[4]=1}else{if(s&&t.touches[1]&&o.zoomingEnabled()&&o.panningEnabled()){r.data.bgActivePosistion=undefined;r.data.canvasNeedsRedraw[l]=true;var C=t.touches[0].pageX-E,k=t.touches[0].pageY-S;var L=t.touches[1].pageX-E,A=t.touches[1].pageY-S;var O=n(C,k,L,A);var M=O/y;if(M!=1&&N){var D=C-d;var P=k-v;var H=L-m;var B=A-g;var j=(D+H)/2;var F=(P+B)/2;var I=o.zoom();var q=I*M;var R=o.pan();var U=w[0]*I+R.x;var z=w[1]*I+R.y;var W={x:-q/I*(U-R.x-j)+U,y:-q/I*(z-R.y-F)+z};o._private.zoom=q;o._private.pan=W;o.trigger("pan zoom").notify("viewport");y=O;d=C;v=k;m=L;g=A;r.pinching=true}if(t.touches[0]){var b=r.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);f[0]=b[0];f[1]=b[1]}if(t.touches[1]){var b=r.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);f[2]=b[0];f[3]=b[1]}if(t.touches[2]){var b=r.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);f[4]=b[0];f[5]=b[1]}}else{if(t.touches[0]){var X=r.touchData.start;var V=r.touchData.last;if(X!=null&&X._private.group=="nodes"&&r.nodeIsDraggable(X)){var $=r.dragData.touchDragEles;for(var J=0;J<$.length;J++){var K=$[J];if(r.nodeIsDraggable(K)){r.dragData.didDrag=true;K._private.position.x+=x[0];K._private.position.y+=x[1]}}(new e.Collection(o,$)).trigger(new e.Event(t,{type:"drag"})).trigger(new e.Event(t,{type:"position"}));r.data.canvasNeedsRedraw[c]=true;r.data.canvasRedrawReason[c].push("touchdrag node");if(r.touchData.startPosition[0]==h[0]&&r.touchData.startPosition[1]==h[1]){r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("node drag started")}}if(X!=null){X.trigger(new e.Event(t,{type:"touchmove"}))}if(X==null){var Q=r.findNearestElement(f[0],f[1],true);if(Q!=null){Q.trigger(new e.Event(t,{type:"touchmove"}))}if(Q==null){o.trigger(new e.Event(t,{type:"touchmove"}))}}if(Q!=V){if(V){V.trigger(new e.Event(t,{type:"touchout"}))}if(Q){Q.trigger(new e.Event(t,{type:"touchover"}))}}r.touchData.last=Q;for(var G=0;G<f.length;G++){if(f[G]&&r.touchData.startPosition[G]&&Math.abs(f[G]-r.touchData.startPosition[G])>4){r.touchData.singleTouchMoved=true}}if(s&&(X==null||X.isEdge())&&o.panningEnabled()){if(X){X.unactivate();if(!r.data.bgActivePosistion){r.data.bgActivePosistion={x:f[0],y:f[1]}}r.data.canvasNeedsRedraw[l]=true;r.data.canvasRedrawReason[l].push("bgactive")}o.panBy({x:x[0]*o.zoom(),y:x[1]*o.zoom()});r.swipePanning=true;var b=r.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);f[0]=b[0];f[1]=b[1]}}}}}for(var T=0;T<f.length;T++){h[T]=f[T]}r.redraw()},false);r.registerBinding(window,"touchend",function(t){var n=r.touchData.capture;if(!n){return}r.touchData.capture=false;t.preventDefault();var i=r.data.select;r.swipePanning=false;var s=r.data.cy;var o=r.getCachedNodes();var a=r.getCachedEdges();var f=r.touchData.now;var h=r.touchData.earlier;var d=r.touchData.start;if(t.touches[0]){var v=r.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);f[0]=v[0];f[1]=v[1]}if(t.touches[1]){var v=r.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);f[2]=v[0];f[3]=v[1]}if(t.touches[2]){var v=r.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);f[4]=v[0];f[5]=v[1]}if(r.touchData.cxt){ctxTapend=new e.Event(t,{type:"cxttapend"});if(d){d.unactivate();d.trigger(ctxTapend)}else{s.trigger(ctxTapend)}if(!r.touchData.cxtDragged){var m=new e.Event(t,{type:"cxttap"});if(d){d.trigger(m)}else{s.trigger(m)}}if(r.touchData.start){r.touchData.start._private.grabbed=false}r.touchData.cxt=false;r.touchData.start=null;r.redraw();return}var g=+(new Date);if(!t.touches[2]&&s.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);this.threeFingerSelectTimeout=setTimeout(function(){var n=[];var o=r.getAllInBox(i[0],i[1],i[2],i[3]);i[0]=undefined;i[1]=undefined;i[2]=undefined;i[3]=undefined;i[4]=0;r.data.canvasNeedsRedraw[l]=true;r.data.canvasRedrawReason[l].push("Touch moved, redraw selection box");var u=new e.Event(t,{type:"select"});for(var a=0;a<o.length;a++){if(o[a]._private.selectable){n.push(o[a])}}(new e.Collection(s,n)).select();if(o.length>0){r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("Selection")}},100)}if(!t.touches[1]){r.pinching=false}var y=false;if(d!=null){d._private.active=false;y=true;d.trigger(new e.Event(t,{type:"unactivate"}))}if(t.touches[2]){r.data.bgActivePosistion=undefined}else{if(t.touches[1]){}else{if(t.touches[0]){}else{if(!t.touches[0]){r.data.bgActivePosistion=undefined;if(d!=null){if(d._private.grabbed==true){d._private.grabbed=false;d.trigger(new e.Event(t,{type:"free"}));d._private.rscratch.inDragLayer=false}var b=d._private.edges;for(var w=0;w<b.length;w++){b[w]._private.rscratch.inDragLayer=false}u(d,false);if(d.selected()){var E=s.$("node:selected");for(var S=0;S<E.length;S++){var x=E[S];x._private.rscratch.inDragLayer=false;var b=x._private.edges;for(var w=0;w<b.length;w++){b[w]._private.rscratch.inDragLayer=false}u(x,false)}}r.data.canvasNeedsRedraw[c]=true;r.data.canvasRedrawReason[c].push("touchdrag node end");r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("touchdrag node end");d.trigger(new e.Event(t,{type:"touchend"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"}));r.touchData.start=null}else{var T=r.findNearestElement(f[0],f[1],true);if(T!=null){T.trigger(new e.Event(t,{type:"touchend"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"}))}if(T==null){s.trigger(new e.Event(t,{type:"touchend"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"}))}}if(d!=null&&!r.dragData.didDrag&&d._private.selectable&&Math.sqrt(Math.pow(r.touchData.startPosition[0]-f[0],2)+Math.pow(r.touchData.startPosition[1]-f[1],2))<6){if(d.selected()){d._private.selected=false;d.trigger(new e.Event(t,{type:"unselect"}))}else{d._private.selected=true;d.trigger(new e.Event(t,{type:"select"}))}y=true;r.data.canvasNeedsRedraw[p]=true;r.data.canvasRedrawReason[p].push("sglslct")}if(r.touchData.singleTouchMoved==false){if(d){d.trigger(new e.Event(t,{type:"tap"})).trigger(new e.Event(t,{type:"vclick"}))}else{s.trigger(new e.Event(t,{type:"tap"})).trigger(new e.Event(t,{type:"vclick"}))}}r.touchData.singleTouchMoved=true}}}}for(var w=0;w<f.length;w++){h[w]=f[w]}r.dragData.didDrag=false;if(y&&d){d.updateStyle(false)}r.redraw()},false)};t.prototype.init=function(){};t.prototype.getCachedNodes=function(){var e=this.data;var t=this.data.cy;if(e.cache==undefined){e.cache={}}if(e.cache.cachedNodes==undefined){e.cache.cachedNodes=t.nodes()}return e.cache.cachedNodes};t.prototype.updateNodesCache=function(){var e=this.data;var t=this.data.cy;if(e.cache==undefined){e.cache={}}e.cache.cachedNodes=t.nodes()};t.prototype.getCachedEdges=function(){var e=this.data;var t=this.data.cy;if(e.cache==undefined){e.cache={}}if(e.cache.cachedEdges==undefined){e.cache.cachedEdges=t.edges()}return e.cache.cachedEdges};t.prototype.updateEdgesCache=function(){var e=this.data;var t=this.data.cy;if(e.cache==undefined){e.cache={}}e.cache.cachedEdges=t.edges()};t.prototype.projectIntoViewport=function(e,t){n=this.data.container;var r=false;var i=this.findContainerPageCoords();var s=i[0];var o=i[1];x=e-s;y=t-o;x-=this.data.cy.pan().x;y-=this.data.cy.pan().y;x/=this.data.cy.zoom();y/=this.data.cy.zoom();return[x,y]};t.prototype.findContainerPageCoords=function(){var e,t;var n=0;var r=0;var i;i=this.data.container;var s=false;while(i!=null){var o=window.getComputedStyle(i);if(o.getPropertyValue("position").toLowerCase()==="fixed"){n=i.offsetLeft+window.scrollX;r=i.offsetTop+window.scrollY;i=null}else{if(typeof i.offsetLeft=="number"){n+=i.offsetLeft;r+=i.offsetTop;if(i==document.body||i==document.header){s=true}if(!s){n-=i.scrollLeft;r-=i.scrollTop}}}if(i){i=i.offsetParent}}return[n,r]};t.prototype.findNearestElement=function(e,t,n){var i=this.data;var u=this.getCachedNodes();var a=this.getCachedEdges();var f=[];var l=this.data.cy.zoom();var c=(r?256:32)/l;var h=(r?16:0)/l;for(var p=0;p<u.length;p++){if(o[this.getNodeShape(u[p])].checkPointRough(e,t,u[p]._private.style["border-width"].value/2,this.getNodeWidth(u[p])+h,this.getNodeHeight(u[p])+h,u[p]._private.position.x,u[p]._private.position.y)&&o[this.getNodeShape(u[p])].checkPoint(e,t,u[p]._private.style["border-width"].value/2,this.getNodeWidth(u[p])+h,this.getNodeHeight(u[p])+h,u[p]._private.position.x,u[p]._private.position.y)){if(n){if(u[p]._private.style.opacity.value!=0&&u[p]._private.style.visibility.value=="visible"){f.push(u[p])}}else{f.push(u[p])}}}var d;for(var p=0;p<a.length;p++){var v=a[p];var g=v._private.rscratch;d=false;if(g.edgeType=="self"){if(this.inBezierVicinity(e,t,g.startX,g.startY,g.cp2ax,g.cp2ay,g.selfEdgeMidX,g.selfEdgeMidY,Math.pow(v._private.style.width.value/2,2))&&Math.pow(a[p]._private.style.width.value/2,2)+c>this.sqDistanceToQuadraticBezier(e,t,g.startX,g.startY,g.cp2ax,g.cp2ay,g.selfEdgeMidX,g.selfEdgeMidY)||this.inBezierVicinity(e,t,g.selfEdgeMidX,g.selfEdgeMidY,g.cp2cx,g.cp2cy,g.endX,g.endY,Math.pow(a[p]._private.style.width.value/2,2))&&Math.pow(a[p]._private.style.width.value/2,2)+c>this.sqDistanceToQuadraticBezier(e,t,g.selfEdgeMidX,g.selfEdgeMidY,g.cp2cx,g.cp2cy,g.endX,g.endY)){d=true}}else{if(g.edgeType=="straight"){if(this.inLineVicinity(e,t,g.startX,g.startY,g.endX,g.endY,a[p]._private.style.width.value*2)&&Math.pow(a[p]._private.style.width.value/2,2)+c>this.sqDistanceToFiniteLine(e,t,g.startX,g.startY,g.endX,g.endY)){d=true}}else{if(g.edgeType=="bezier"){if(this.inBezierVicinity(e,t,g.startX,g.startY,g.cp2x,g.cp2y,g.endX,g.endY,Math.pow(a[p]._private.style.width.value/2,2))&&Math.pow(a[p]._private.style.width.value/2,2)+c>this.sqDistanceToQuadraticBezier(e,t,g.startX,g.startY,g.cp2x,g.cp2y,g.endX,g.endY)){d=true}}}}if(!f.length||f[f.length-1]!=a[p]){if(s[a[p]._private.style["source-arrow-shape"].value].roughCollide(e,t,a[p]._private.rscratch.arrowStartX,a[p]._private.rscratch.arrowStartY,this.getArrowWidth(a[p]._private.style.width.value),this.getArrowHeight(a[p]._private.style.width.value),[a[p]._private.rscratch.arrowStartX-a[p].source()[0]._private.position.x,a[p]._private.rscratch.arrowStartY-a[p].source()[0]._private.position.y],0)&&s[a[p]._private.style["source-arrow-shape"].value].collide(e,t,a[p]._private.rscratch.arrowStartX,a[p]._private.rscratch.arrowStartY,this.getArrowWidth(a[p]._private.style.width.value),this.getArrowHeight(a[p]._private.style.width.value),[a[p]._private.rscratch.arrowStartX-a[p].source()[0]._private.position.x,a[p]._private.rscratch.arrowStartY-a[p].source()[0]._private.position.y],0)||s[a[p]._private.style["target-arrow-shape"].value].roughCollide(e,t,a[p]._private.rscratch.arrowEndX,a[p]._private.rscratch.arrowEndY,this.getArrowWidth(a[p]._private.style.width.value),this.getArrowHeight(a[p]._private.style.width.value),[a[p]._private.rscratch.arrowEndX-a[p].target()[0]._private.position.x,a[p]._private.rscratch.arrowEndY-a[p].target()[0]._private.position.y],0)&&s[a[p]._private.style["target-arrow-shape"].value].collide(e,t,a[p]._private.rscratch.arrowEndX,a[p]._private.rscratch.arrowEndY,this.getArrowWidth(a[p]._private.style.width.value),this.getArrowHeight(a[p]._private.style.width.value),[a[p]._private.rscratch.arrowEndX-a[p].target()[0]._private.position.x,a[p]._private.rscratch.arrowEndY-a[p].target()[0]._private.position.y],0)){d=true}}if(d){if(n){var y=i.cy.getElementById(a[p]._private.data.source);var b=i.cy.getElementById(a[p]._private.data.target);if(a[p]._private.style.opacity.value!=0&&a[p]._private.style.visibility.value=="visible"&&y._private.style.opacity.value!=0&&y._private.style.visibility.value=="visible"&&b._private.style.opacity.value!=0&&b._private.style.visibility.value=="visible"){f.push(a[p])}}else{f.push(a[p])}}}f.sort(m);if(f.length>0){return f[f.length-1]}else{return null}};t.prototype.getAllInBox=function(e,t,n,r){var i=this.data;var s=this.getCachedNodes();var u=this.getCachedEdges();var a=[];var f=Math.min(e,n);var l=Math.max(e,n);var c=Math.min(t,r);var h=Math.max(t,r);e=f;n=l;t=c;r=h;var p;for(var d=0;d<s.length;d++){if(o[this.getNodeShape(s[d])].intersectBox(e,t,n,r,this.getNodeWidth(s[d]),this.getNodeHeight(s[d]),s[d]._private.position.x,s[d]._private.position.y,s[d]._private.style["border-width"].value/2)){a.push(s[d])}}for(var d=0;d<u.length;d++){if(u[d]._private.rscratch.edgeType=="self"){if((p=this.boxInBezierVicinity(e,t,n,r,u[d]._private.rscratch.startX,u[d]._private.rscratch.startY,u[d]._private.rscratch.cp2ax,u[d]._private.rscratch.cp2ay,u[d]._private.rscratch.endX,u[d]._private.rscratch.endY,u[d]._private.style.width.value))&&(p==2||p==1&&this.checkBezierInBox(e,t,n,r,u[d]._private.rscratch.startX,u[d]._private.rscratch.startY,u[d]._private.rscratch.cp2ax,u[d]._private.rscratch.cp2ay,u[d]._private.rscratch.endX,u[d]._private.rscratch.endY,u[d]._private.style.width.value))||(p=this.boxInBezierVicinity(e,t,n,r,u[d]._private.rscratch.startX,u[d]._private.rscratch.startY,u[d]._private.rscratch.cp2cx,u[d]._private.rscratch.cp2cy,u[d]._private.rscratch.endX,u[d]._private.rscratch.endY,u[d]._private.style.width.value))&&(p==2||p==1&&this.checkBezierInBox(e,t,n,r,u[d]._private.rscratch.startX,u[d]._private.rscratch.startY,u[d]._private.rscratch.cp2cx,u[d]._private.rscratch.cp2cy,u[d]._private.rscratch.endX,u[d]._private.rscratch.endY,u[d]._private.style.width.value))){a.push(u[d])}}if(u[d]._private.rscratch.edgeType=="bezier"&&(p=this.boxInBezierVicinity(e,t,n,r,u[d]._private.rscratch.startX,u[d]._private.rscratch.startY,u[d]._private.rscratch.cp2x,u[d]._private.rscratch.cp2y,u[d]._private.rscratch.endX,u[d]._private.rscratch.endY,u[d]._private.style.width.value))&&(p==2||p==1&&this.checkBezierInBox(e,t,n,r,u[d]._private.rscratch.startX,u[d]._private.rscratch.startY,u[d]._private.rscratch.cp2x,u[d]._private.rscratch.cp2y,u[d]._private.rscratch.endX,u[d]._private.rscratch.endY,u[d]._private.style.width.value))){a.push(u[d])}if(u[d]._private.rscratch.edgeType=="straight"&&(p=this.boxInBezierVicinity(e,t,n,r,u[d]._private.rscratch.startX,u[d]._private.rscratch.startY,u[d]._private.rscratch.startX*.5+u[d]._private.rscratch.endX*.5,u[d]._private.rscratch.startY*.5+u[d]._private.rscratch.endY*.5,u[d]._private.rscratch.endX,u[d]._private.rscratch.endY,u[d]._private.style.width.value))&&(p==2||p==1&&this.checkStraightEdgeInBox(e,t,n,r,u[d]._private.rscratch.startX,u[d]._private.rscratch.startY,u[d]._private.rscratch.endX,u[d]._private.rscratch.endY,u[d]._private.style.width.value))){a.push(u[d])}}return a};t.prototype.updateAllCompounds=function(e){for(var t=e.length-1;t>=0;t--){if(e[t].isNode()&&(e[t]._private.style.width.value=="auto"||e[t]._private.style.height.value=="auto")&&e[t].children().length>0){var n=e[t];var r=this.calcCompoundBounds(n);n._private.position.x=r.x;n._private.position.y=r.y;n._private.autoWidth=r.width;n._private.autoHeight=r.height}}};t.prototype.calcCompoundBounds=function(e){var t=e.descendants().not(":removed");var n={x:e._private.position.x,y:e._private.position.y,width:e._private.autoWidth,height:e._private.autoHeight};if(e._private.style.visibility.value!="visible"){return n}var r=[];for(var i=0;i<t.size();i++){if(t[i]._private.style.visibility.value=="visible"){r.push(t[i])}}if(r.length==0){return n}t=r;var s=this.borderValue(t,"left");var o=this.borderValue(t,"right");var u=this.borderValue(t,"top");var a=this.borderValue(t,"bottom");var f=this.getNodePadding(e);var l=(s-f.left+o+f.right)/2;var c=(u-f.top+a+f.bottom)/2;var h=o-s+f.left+f.right;var p=a-u+f.top+f.bottom;n={x:l,y:c,width:h,height:p};return n};t.prototype.borderValue=function(e,t){var n,r;var i=1/0,s=-1/0;var o=this;var u=function(e){var t={};t.x=e._private.position.x;t.y=e._private.position.y;t.width=e.outerWidth();t.height=e.outerHeight();return t};var a=function(e){var t=String(e._private.style.content.value);var n=e._private.style["text-transform"].value;if(n=="none"){}else{if(n=="uppercase"){t=t.toUpperCase()}else{if(n=="lowercase"){t=t.toLowerCase()}}}var r=o.data.canvases[4].getContext("2d");return r.measureText(t).width};var f=function(e){var t={};var n=o.getNodeWidth(e);var r=o.getNodeHeight(e);t.height=e._private.style["font-size"].value;t.width=t.height;var i=e._private.style["text-halign"].strValue;if(i=="left"){t.x=e._private.position.x-n/2;t.left=t.x-t.width;t.right=t.x}else{if(i=="right"){t.x=e._private.position.x+n/2;t.left=t.x;t.right=t.x+t.width}else{t.x=e._private.position.x;t.left=t.x-t.width/2;t.right=t.x+t.width/2}}var s=e._private.style["text-valign"].strValue;if(s=="top"){t.y=e._private.position.y-r/2;t.top=t.y-t.height;t.bottom=t.y}else{if(s=="bottom"){t.y=e._private.position.y+r/2;t.top=t.y;t.bottom=t.y+t.height}else{t.y=e._private.position.y;t.top=t.y-t.height/2;t.bottom=t.y+t.height/2}}return t};for(O=0;O<e.length;O++){n=u(e[O]);r=f(e[O]);if(t=="left"){var l=Math.min(n.x-n.width/2,r.left);if(l<i){i=l}}else{if(t=="right"){var c=Math.max(n.x+n.width/2,r.right);if(c>s){s=c}}else{if(t=="top"){var h=Math.min(n.y-n.height/2,r.top);if(h<i){i=h}}else{if(t=="bottom"){var p=Math.max(n.y+n.height/2,r.bottom);if(p>s){s=p}}}}}}if(t=="left"||t=="top"){return i}else{return s}};t.prototype.getNodeWidth=function(e){if(e._private.style.width.value=="auto"||e._private.style.height.value=="auto"){return e._private.autoWidth}else{return e._private.style.width.value}};t.prototype.getNodeHeight=function(e){if(e._private.style.width.value=="auto"||e._private.style.height.value=="auto"){return e._private.autoHeight}else{return e._private.style.height.value}};t.prototype.getNodeShape=function(e){var t=e._private.style.shape.value;if(e.isParent()){if(t==="rectangle"||t==="roundrectangle"){return t}else{return"rectangle"}}return t};t.prototype.getNodePadding=function(e){var t=e._private.style["padding-left"].value;var n=e._private.style["padding-right"].value;var r=e._private.style["padding-top"].value;var i=e._private.style["padding-bottom"].value;if(isNaN(t)){t=0}if(isNaN(n)){n=0}if(isNaN(r)){r=0}if(isNaN(i)){i=0}return{left:t,right:n,top:r,bottom:i}};t.prototype.matchCanvasSize=function(e){var t=this.data;var n=e.clientWidth;var r=e.clientHeight;var i,s=n,o=r;if("devicePixelRatio"in window){s*=devicePixelRatio;o*=devicePixelRatio}for(var u=0;u<f;u++){i=t.canvases[u];if(i.width!==s||i.height!==o){i.width=s;i.height=o;i.style.width=n+"px";i.style.height=r+"px"}}for(var u=0;u<d;u++){i=t.bufferCanvases[u];if(i.width!==s||i.height!==o){i.width=s;i.height=o}}this.data.overlay.style.width=n+"px";this.data.overlay.style.height=r+"px"};var v=function(e){if(e._private.group=="nodes"){return e.parents().size()}else{if(e._private.group=="edges"){return Math.max(e.source()[0].parents().size(),e.target()[0].parents().size())}else{return 0}}};t.prototype.getCachedZSortedEles=function(){var e=this.lastZOrderCachedNodes;var t=this.lastZOrderCachedEdges;var n=this.getCachedNodes();var r=this.getCachedEdges();var i=[];if(!e||!t||e!==n||t!==r){for(var s=0;s<n.length;s++){i.push(n[s])}for(var s=0;s<r.length;s++){i.push(r[s])}i.sort(m);this.cachedZSortedEles=i}else{i=this.cachedZSortedEles}this.lastZOrderCachedNodes=n;this.lastZOrderCachedEdges=r;return i};var m=function(e,t){var n=e._private.style["z-index"].value-t._private.style["z-index"].value;var r=0;var i=0;if(e.cy().hasCompoundNodes()){r=v(e);i=v(t)}if(r-i===0){if(e._private.group==="nodes"&&t._private.group==="edges"){return 1}else{if(e._private.group==="edges"&&t._private.group==="nodes"){return-1}else{if(n===0){return e._private.index-t._private.index}else{return n}}}}else{return r-i}return 0};t.prototype.renderTo=function(e,t,n){this.redraw(e,true,t,n)};t.prototype.redraw=function(e,t,n,r){var i=this;if(this.averageRedrawTime===undefined){this.averageRedrawTime=0}var s=1e3/60;var o=1e3;var u=this.averageRedrawTime;u=Math.max(s,u);u=Math.min(u,o);if(this.lastDrawTime===undefined){this.lastDrawTime=0}var a=+(new Date);var f=a-this.lastDrawTime;var h=f>=u;if(!e){if(!h){clearTimeout(this.redrawTimeout);this.redrawTimeout=setTimeout(function(){i.redraw()},u);return}this.lastDrawTime=a}setTimeout(function(){var s=a;var o=100;var u=i.data.cy;var f=i.data;var h=i.getCachedNodes();var d=i.getCachedEdges();i.matchCanvasSize(f.container);var v=u.zoom();var m=n!==undefined?n:v;var g=u.pan();var y={x:g.x,y:g.y};if(r){y=r}if("devicePixelRatio"in window){m*=devicePixelRatio;y.x*=devicePixelRatio;y.y*=devicePixelRatio}var b=[];for(var w=0;w<h.length;w++){b.push(h[w])}for(var w=0;w<d.length;w++){b.push(d[w])}if(f.canvasNeedsRedraw[c]||f.canvasNeedsRedraw[p]||t){if(i.hideEdgesOnViewport&&(i.pinching||i.hoverData.dragging||i.data.wheel||i.swipePanning)){}else{i.findEdgeControlPoints(d)}var b=i.getCachedZSortedEles();if(u.hasCompoundNodes()){i.updateAllCompounds(b)}}var E;var S;var x;if(f.canvasNeedsRedraw[p]||t){if(!E||!S){E=[];S=[];for(var T=0;T<b.length;T++){x=b[T];if(x._private.rscratch.inDragLayer){E.push(x)}else{S.push(x)}}}var N=e||f.canvases[p].getContext("2d");N.setTransform(1,0,0,1,0,0);N.clearRect(0,0,N.canvas.width,N.canvas.height);if(!t){N.translate(y.x,y.y);N.scale(m,m)}if(r){N.translate(r.x,r.y)}if(n){N.scale(n,n)}for(var T=0;T<S.length;T++){x=S[T];if(x._private.group=="nodes"){i.drawNode(N,x)}else{if(x._private.group=="edges"){i.drawEdge(N,x)}}}for(var T=0;T<S.length;T++){x=S[T];if(x._private.group=="nodes"){i.drawNodeText(N,x)}else{if(x._private.group=="edges"){i.drawEdgeText(N,x)}}if(x._private.group=="nodes"){i.drawNode(N,x,true)}else{if(x._private.group=="edges"){i.drawEdge(N,x,true)}}}if(!t){f.canvasNeedsRedraw[p]=false;f.canvasRedrawReason[p]=[]}}if(f.canvasNeedsRedraw[c]||t){if(!E||!S){E=[];S=[];for(var T=0;T<b.length;T++){x=b[T];if(x._private.rscratch.inDragLayer){E.push(x)}else{S.push(x)}}}var N=e||f.canvases[c].getContext("2d");if(!t){N.setTransform(1,0,0,1,0,0);N.clearRect(0,0,N.canvas.width,N.canvas.height);N.translate(y.x,y.y);N.scale(m,m)}if(r){N.translate(r.x,r.y)}if(n){N.scale(n,n)}var x;for(var T=0;T<E.length;T++){x=E[T];if(x._private.group=="nodes"){i.drawNode(N,x)}else{if(x._private.group=="edges"){i.drawEdge(N,x)}}}for(var T=0;T<E.length;T++){x=E[T];if(x._private.group=="nodes"){i.drawNodeText(N,x)}else{if(x._private.group=="edges"){i.drawEdgeText(N,x)}}if(x._private.group=="nodes"){i.drawNode(N,x,true)}else{if(x._private.group=="edges"){i.drawEdge(N,x,true)}}}if(!t){f.canvasNeedsRedraw[c]=false;f.canvasRedrawReason[c]=[]}}if(f.canvasNeedsRedraw[l]){var N=e||f.canvases[l].getContext("2d");if(!t){N.setTransform(1,0,0,1,0,0);N.clearRect(0,0,N.canvas.width,N.canvas.height);N.translate(y.x,y.y);N.scale(m,m)}if(r){N.translate(r.x,r.y)}if(n){N.scale(n,n)}var C=u.style()._private.coreStyle;if(f.select[4]==1){var v=f.cy.zoom();var k=C["selection-box-border-width"].value/v;N.lineWidth=k;N.fillStyle="rgba("+C["selection-box-color"].value[0]+","+C["selection-box-color"].value[1]+","+C["selection-box-color"].value[2]+","+C["selection-box-opacity"].value+")";N.fillRect(f.select[0],f.select[1],f.select[2]-f.select[0],f.select[3]-f.select[1]);if(k>0){N.strokeStyle="rgba("+C["selection-box-border-color"].value[0]+","+C["selection-box-border-color"].value[1]+","+C["selection-box-border-color"].value[2]+","+C["selection-box-opacity"].value+")";N.strokeRect(f.select[0],f.select[1],f.select[2]-f.select[0],f.select[3]-f.select[1])}}if(f.bgActivePosistion){var v=f.cy.zoom();var L=f.bgActivePosistion;N.fillStyle="rgba("+C["active-bg-color"].value[0]+","+C["active-bg-color"].value[1]+","+C["active-bg-color"].value[2]+","+C["active-bg-opacity"].value+")";N.beginPath();N.arc(L.x,L.y,C["active-bg-size"].pxValue/v,0,2*Math.PI);N.fill()}if(!t){f.canvasNeedsRedraw[l]=false;f.canvasRedrawReason[l]=[]}}var A=+(new Date);if(i.averageRedrawTime===undefined){i.averageRedrawTime=A-s}i.averageRedrawTime=i.averageRedrawTime/2+(A-s)/2},0)};var g={};var b=30*300;t.prototype.getCachedImage=function(e,t){if(g[e]&&g[e].image){g[e].keepTime=b;return g[e].image}var n=g[e];if(n==undefined){g[e]=new Object;g[e].image=new Image;g[e].image.onload=t;g[e].image.src=e;g[e].keepTime=b;n=g[e]}return n.image};t.prototype.swapCachedImage=function(e){if(g[e]){if(g[e].image&&g[e].image.complete){var t=g[e].image;var n=document.createElement("canvas");n.width=t.width;n.height=t.height;n.getContext("2d").drawImage(t,0,0);g[e].image=n;g[e].swappedWithCanvas=true;return n}else{return null}}else{return null}};t.prototype.updateImageCaches=function(){for(var e in g){if(g[e].keepTime<=0){if(g[e].image!=undefined){g[e].image.src=undefined;g[e].image=undefined}g[e]=undefined}else{g[e]-=1}}};t.prototype.drawImage=function(e,t,n,r,i,s,o){o.widthScale=.5;o.heightScale=.5;o.rotate=s;var u;var a;canvas.drawImage(o,t,n)};t.prototype.drawEdge=function(e,t,n){if(this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)){return}var r,i;r=t.source()[0];i=t.target()[0];if(t._private.style.visibility.value!="visible"||r._private.style.visibility.value!="visible"||i._private.style.visibility.value!="visible"){return}var s=t._private.style["overlay-padding"].value;var o=t._private.style["overlay-opacity"].value;var u=t._private.style["overlay-color"].value;if(n){e.strokeStyle="rgba( "+u[0]+", "+u[1]+", "+u[2]+", "+o+" )";e.lineCap="round";if(t._private.rscratch.edgeType=="self"){e.lineCap="butt"}}else{e.strokeStyle="rgba("+t._private.style["line-color"].value[0]+","+t._private.style["line-color"].value[1]+","+t._private.style["line-color"].value[2]+","+t._private.style.opacity.value+")"}if(t._private.style.width.value<=0){return}var a=t._private.style.width.value+(n?2*s:0);var f=n?"solid":t._private.style["line-style"].value;e.lineWidth=a;this.findEndpoints(t);if(t._private.rscratch.edgeType=="self"){var l=t._private.rscratch;this.drawStyledEdge(t,e,[l.startX,l.startY,l.cp2ax,l.cp2ay,l.selfEdgeMidX,l.selfEdgeMidY],f,a);this.drawStyledEdge(t,e,[l.selfEdgeMidX,l.selfEdgeMidY,l.cp2cx,l.cp2cy,l.endX,l.endY],f,a)}else{if(t._private.rscratch.edgeType=="straight"){var c=i._private.position.x-r._private.position.x;var h=i._private.position.y-r._private.position.y;var p=t._private.rscratch.endX-t._private.rscratch.startX;var d=t._private.rscratch.endY-t._private.rscratch.startY;if(c*p+h*d<0){t._private.rscratch.straightEdgeTooShort=true}else{var l=t._private.rscratch;this.drawStyledEdge(t,e,[l.startX,l.startY,l.endX,l.endY],f,a);t._private.rscratch.straightEdgeTooShort=false}}else{var l=t._private.rscratch;this.drawStyledEdge(t,e,[l.startX,l.startY,l.cp2x,l.cp2y,l.endX,l.endY],f,a)}}if(t._private.rscratch.noArrowPlacement!==true&&t._private.rscratch.startX!==undefined){this.drawArrowheads(e,t,n)}};var w=function(e,t,n){var r=Math.sqrt(Math.pow(e[4]-e[0],2)+Math.pow(e[5]-e[1],2));r+=Math.sqrt(Math.pow((e[4]+e[0])/2-e[2],2)+Math.pow((e[5]+e[1])/2-e[3],2));var i=Math.ceil(r/t);var s=r/t;var o;if(i>0){o=new Array(i*2)}else{return null}for(var u=0;u<i;u++){var a=u/i;o[u*2]=e[0]*(1-a)*(1-a)+2*e[2]*(1-a)*a+e[4]*a*a;o[u*2+1]=e[1]*(1-a)*(1-a)+2*e[3]*(1-a)*a+e[5]*a*a}return o};var E=function(e,t,n){var r=Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(e[3]-e[1],2));var i=Math.ceil(r/t);var s;if(i>0){s=new Array(i*2)}else{return null}var o=[e[2]-e[0],e[3]-e[1]];for(var u=0;u<i;u++){var a=u/i;s[u*2]=o[0]*a+e[0];s[u*2+1]=o[1]*a+e[1]}return s};var S=function(e,t,n){pt1=_genpts(e,t);pt2=_genpts(e,n)};t.prototype.createBuffer=function(e,t){var n=document.createElement("canvas");n.width=e;n.height=t;return[n,n.getContext("2d")]};t.prototype.drawStyledEdge=function(e,t,n,r,i){function s(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n}var o=this.data.cy;var u=o.zoom();if(e._private.rstyle.bezierPts===undefined){e._private.rstyle.bezierPts=[]}var a=e._private.rstyle.bezierPts.length;if(e.isLoop()){if(a>=12){e._private.rstyle.bezierPts=[]}else{}}else{e._private.rstyle.bezierPts=[]}var f=e._private.rstyle.bezierPts;if(n.length===6){f.push({x:s(n[0],n[2],n[4],.05),y:s(n[1],n[3],n[5],.05)});f.push({x:s(n[0],n[2],n[4],.25),y:s(n[1],n[3],n[5],.25)});f.push({x:s(n[0],n[2],n[4],.35),y:s(n[1],n[3],n[5],.35)});f.push({x:s(n[0],n[2],n[4],.65),y:s(n[1],n[3],n[5],.65)});f.push({x:s(n[0],n[2],n[4],.75),y:s(n[1],n[3],n[5],.75)});f.push({x:s(n[0],n[2],n[4],.95),y:s(n[1],n[3],n[5],.95)})}if(r=="solid"){t.beginPath();t.moveTo(n[0],n[1]);if(n.length==3*2){t.quadraticCurveTo(n[2],n[3],n[4],n[5])}else{t.lineTo(n[2],n[3])}t.stroke()}else{if(r=="dotted"){var l;if(n.length==3*2){l=w(n,16,true)}else{l=E(n,16,true)}if(!l){return}var c=Math.max(i*1.6,3.4)*u;var h=c*2,p=c*2;h=Math.max(h,1);p=Math.max(p,1);var d=this.createBuffer(h,p);var v=d[1];v.setTransform(1,0,0,1,0,0);v.clearRect(0,0,h,p);v.fillStyle=t.strokeStyle;v.beginPath();v.arc(h/2,p/2,c*.5,0,Math.PI*2,false);v.fill();t.beginPath();for(var m=0;m<l.length/2;m++){t.drawImage(d[0],l[m*2]-h/2/u,l[m*2+1]-p/2/u,h/u,p/u)}}else{if(r=="dashed"){var l;if(n.length==3*2){l=w(n,14,true)}else{l=E(n,14,true)}if(!l){return}var h=i*2*u;var p=7.8*u;h=Math.max(h,1);p=Math.max(p,1);var d=this.createBuffer(h,p);var v=d[1];v.setTransform(1,0,0,1,0,0);v.clearRect(0,0,h,p);if(t.strokeStyle){v.strokeStyle=t.strokeStyle}v.lineWidth=i*o.zoom();v.beginPath();v.moveTo(h/2,p*.2);v.lineTo(h/2,p*.8);v.stroke();var g=false;var y,b;if(n.length==2*2){y=[n[2]-n[0],n[3]-l[1]];b=Math.acos((y[0]*0+y[1]*-1)/Math.sqrt(y[0]*y[0]+y[1]*y[1]));if(y[0]<0){b=-b+2*Math.PI}}else{if(n.length==3*2){g=true}}for(var m=0;m<l.length/2;m++){var S=m/Math.max(l.length/2-1,1);if(g){y=[2*(1-S)*(n[2]-n[0])+2*S*(n[4]-n[2]),2*(1-S)*(n[3]-n[1])+2*S*(n[5]-n[3])];b=Math.acos((y[0]*0+y[1]*-1)/Math.sqrt(y[0]*y[0]+y[1]*y[1]));if(y[0]<0){b=-b+2*Math.PI}}t.translate(l[m*2],l[m*2+1]);t.rotate(b);t.translate(-h/2/u,-p/2/u);t.drawImage(d[0],0,0,h/u,p/u);t.translate(h/2/u,p/2/u);t.rotate(-b);t.translate(-l[m*2],-l[m*2+1])}}else{this.drawStyledEdge(e,t,n,"solid",i)}}}};t.prototype.drawEdgeText=function(e,t){if(this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)){return}if(t._private.style.visibility.value!="visible"){return}var n=t._private.style["font-size"].pxValue*t.cy().zoom();var r=t._private.style["min-zoomed-font-size"].pxValue;if(n<r){return}e.textAlign="center";e.textBaseline="middle";var i,s;var o,u;if(t._private.rscratch.edgeType=="self"){o=t._private.rscratch.selfEdgeMidX;u=t._private.rscratch.selfEdgeMidY}else{if(t._private.rscratch.edgeType=="straight"){o=(t._private.rscratch.startX+t._private.rscratch.endX)/2;u=(t._private.rscratch.startY+t._private.rscratch.endY)/2}else{if(t._private.rscratch.edgeType=="bezier"){o=.25*t._private.rscratch.startX+2*.5*.5*t._private.rscratch.cp2x+.5*.5*t._private.rscratch.endX;u=Math.pow(1-.5,2)*t._private.rscratch.startY+2*(1-.5)*.5*t._private.rscratch.cp2y+.5*.5*t._private.rscratch.endY}}}i=o;s=u;var a=t._private.rstyle;a.labelX=i;a.labelY=s;this.drawText(e,t,i,s)};t.prototype.drawNode=function(e,t,n){var r,i;if(t._private.style.visibility.value!="visible"){return}var s=1;var u=t.parents();for(var a=0;a<u.length;a++){var f=u[a];var l=f._private.style.opacity.value;s=l*s;if(l===0){return}}r=this.getNodeWidth(t);i=this.getNodeHeight(t);e.lineWidth=t._private.style["border-width"].pxValue;if(n===undefined||!n){e.fillStyle="rgba("+t._private.style["background-color"].value[0]+","+t._private.style["background-color"].value[1]+","+t._private.style["background-color"].value[2]+","+t._private.style["background-opacity"].value*t._private.style.opacity.value*s+")";e.strokeStyle="rgba("+t._private.style["border-color"].value[0]+","+t._private.style["border-color"].value[1]+","+t._private.style["border-color"].value[2]+","+t._private.style["border-opacity"].value*t._private.style.opacity.value*s+")";var h=t._private.style["background-image"].value[2]||t._private.style["background-image"].value[1];if(h!=undefined){var d=this;var v=this.getCachedImage(h,function(){d.data.canvasNeedsRedraw[p]=true;d.data.canvasRedrawReason[p].push("image finished load");d.data.canvasNeedsRedraw[c]=true;d.data.canvasRedrawReason[c].push("image finished load");d.swapCachedImage(h);d.redraw()});if(v.complete==false){o[d.getNodeShape(t)].drawPath(e,t._private.position.x,t._private.position.y,r,i);e.stroke();e.fillStyle="#555555";e.fill()}else{this.drawInscribedImage(e,v,t)}}else{o[this.getNodeShape(t)].draw(e,t._private.position.x,t._private.position.y,r,i)}if(t._private.style["border-width"].value>0){e.stroke()}}else{var m=t._private.style["overlay-padding"].value;var g=t._private.style["overlay-opacity"].value;var y=t._private.style["overlay-color"].value;if(g>0){e.fillStyle="rgba( "+y[0]+", "+y[1]+", "+y[2]+", "+g+" )";o[this.getNodeShape(t)].draw(e,t._private.position.x,t._private.position.y,r+m*2,i+m*2)}}};t.prototype.drawInscribedImage=function(e,t,n){var r=this;var i=this.data.cy._private.zoom;var s=n._private.position.x;var u=n._private.position.y;var a=this.getNodeWidth(n);var f=this.getNodeHeight(n);e.save();o[r.getNodeShape(n)].drawPath(e,s,u,a,f);e.clip();var l=[t.width,t.height];e.drawImage(t,s-l[0]/2,u-l[1]/2,l[0],l[1]);e.restore();if(n._private.style["border-width"].value>0){e.stroke()}};t.prototype.drawNodeText=function(e,t){if(t._private.style.visibility.value!="visible"){return}var n=t._private.style["font-size"].pxValue*t.cy().zoom();var r=t._private.style["min-zoomed-font-size"].pxValue;if(n<r){return}var i,s;var o=this.getNodeWidth(t);var u=this.getNodeHeight(t);var a=t._private.style["text-halign"].strValue;if(a=="left"){e.textAlign="right";i=t._private.position.x-o/2}else{if(a=="right"){e.textAlign="left";i=t._private.position.x+o/2}else{if(a=="center"){e.textAlign="center";i=t._private.position.x}else{e.textAlign="center";i=t._private.position.x}}}var f=t._private.style["text-valign"].strValue;if(f=="top"){e.textBaseline="bottom";s=t._private.position.y-u/2}else{if(f=="bottom"){e.textBaseline="top";s=t._private.position.y+u/2}else{if(f=="middle"||f=="center"){e.textBaseline="middle";s=t._private.position.y}else{e.textBaseline="middle";s=t._private.position.y}}}this.drawText(e,t,i,s)};t.prototype.drawText=function(e,t,n,r){var i=1;var s=t.parents();for(var o=0;o<s.length;o++){var u=s[o];var a=u._private.style.opacity.value;i=a*i;if(a===0){return}}var f=t._private.style["font-style"].strValue;var l=t._private.style["font-size"].value+"px";var c=t._private.style["font-family"].strValue;var h=t._private.style["font-variant"].strValue;var p=t._private.style["font-weight"].strValue;e.font=f+" "+p+" "+l+" "+c;var d=String(t._private.style.content.value);var v=t._private.style["text-transform"].value;if(v=="none"){}else{if(v=="uppercase"){d=d.toUpperCase()}else{if(v=="lowercase"){d=d.toLowerCase()}}}e.lineJoin="round";e.fillStyle="rgba("+t._private.style.color.value[0]+","+t._private.style.color.value[1]+","+t._private.style.color.value[2]+","+t._private.style["text-opacity"].value*t._private.style.opacity.value*i+")";e.strokeStyle="rgba("+t._private.style["text-outline-color"].value[0]+","+t._private.style["text-outline-color"].value[1]+","+t._private.style["text-outline-color"].value[2]+","+t._private.style["text-opacity"].value*t._private.style.opacity.value*i+")";if(d!=undefined){var m=2*t._private.style["text-outline-width"].value;if(m>0){e.lineWidth=m;e.strokeText(d,n,r)}if(isNaN(n)){n=0}if(isNaN(r)){r=0}e.fillText(""+d,n,r);t._private.rstyle.labelWidth=e.measureText(d).width}};t.prototype.drawBackground=function(e,t,n,r,i){};t.prototype.findEdgeControlPoints=function(e){var t={};var n=this.data.cy;var r=[];var i;for(var s=0;s<e.length;s++){i=e[s]._private.data.source>e[s]._private.data.target?e[s]._private.data.target+"-"+e[s]._private.data.source:e[s]._private.data.source+"-"+e[s]._private.data.target;if(t[i]==undefined){t[i]=[]}t[i].push(e[s]);r.push(i)}var o,u;for(var a=0;a<r.length;a++){i=r[a];o=n.getElementById(t[i][0]._private.data.source);u=n.getElementById(t[i][0]._private.data.target);var f=(o._private.position.x+u._private.position.x)/2;var l=(o._private.position.y+u._private.position.y)/2;var c,h;if(t[i].length>1){c=u._private.position.y-o._private.position.y;h=o._private.position.x-u._private.position.x;var p=Math.sqrt(c*c+h*h);c/=p;h/=p}var d;for(var s=0;s<t[i].length;s++){d=t[i][s];var v=d._private.rscratch.lastEdgeIndex;var m=s;var g=d._private.rscratch.lastNumEdges;var y=t[i].length;var b=d._private.rscratch.lastSrcCtlPtX;var w=o._private.position.x;var E=d._private.rscratch.lastSrcCtlPtY;var S=o._private.position.y;var x=d._private.rscratch.lastSrcCtlPtW;var T=o.outerWidth();var N=d._private.rscratch.lastSrcCtlPtH;var C=o.outerHeight();var k=d._private.rscratch.lastTgtCtlPtX;var L=u._private.position.x;var A=d._private.rscratch.lastTgtCtlPtY;var O=u._private.position.y;var M=d._private.rscratch.lastTgtCtlPtW;var _=u.outerWidth();var D=d._private.rscratch.lastTgtCtlPtH;var P=u.outerHeight();if(b===w&&E===S&&x===T&&N===C&&k===L&&A===O&&M===_&&D===P&&v===m&&g===y){continue}else{var H=d._private.rscratch;H.lastSrcCtlPtX=w;H.lastSrcCtlPtY=S;H.lastSrcCtlPtW=T;H.lastSrcCtlPtH=C;H.lastTgtCtlPtX=L;H.lastTgtCtlPtY=O;H.lastTgtCtlPtW=_;H.lastTgtCtlPtH=P;H.lastEdgeIndex=m;H.lastNumEdges=y}if(o._private.data.id==u._private.data.id){var B=d._private.style["control-point-step-size"].pxValue;d._private.rscratch.edgeType="self";d._private.rscratch.cp2ax=o._private.position.x;d._private.rscratch.cp2ay=o._private.position.y-(1+Math.pow(this.getNodeHeight(o),1.12)/100)*B*(s/3+1);d._private.rscratch.cp2cx=o._private.position.x-(1+Math.pow(this.getNodeWidth(o),1.12)/100)*B*(s/3+1);d._private.rscratch.cp2cy=o._private.position.y;d._private.rscratch.selfEdgeMidX=(d._private.rscratch.cp2ax+d._private.rscratch.cp2cx)/2;d._private.rscratch.selfEdgeMidY=(d._private.rscratch.cp2ay+d._private.rscratch.cp2cy)/2}else{if(t[i].length%2==1&&s==Math.floor(t[i].length/2)){d._private.rscratch.edgeType="straight"}else{var B=d._private.style["control-point-step-size"].value;var j=(.5-t[i].length/2+s)*B;d._private.rscratch.edgeType="bezier";d._private.rscratch.cp2x=f+c*j;d._private.rscratch.cp2y=l+h*j}}}}return t};t.prototype.findEndpoints=function(e){var t;var n=e.source()[0];var r=e.target()[0];var i=Math.max(this.getNodeWidth(n),this.getNodeHeight(n));var u=Math.max(this.getNodeWidth(r),this.getNodeHeight(r));i=0;u/=2;var a=[e.source().position().x,e.source().position().y];var f=[e.target().position().x,e.target().position().y];if(e._private.rscratch.edgeType=="self"){var l=[e._private.rscratch.cp2cx,e._private.rscratch.cp2cy];t=o[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),l[0],l[1],r._private.style["border-width"].value/2);var c=this.shortenIntersection(t,l,s[e._private.style["target-arrow-shape"].value].spacing(e));var h=this.shortenIntersection(t,l,s[e._private.style["target-arrow-shape"].value].gap(e));e._private.rscratch.endX=h[0];e._private.rscratch.endY=h[1];e._private.rscratch.arrowEndX=c[0];e._private.rscratch.arrowEndY=c[1];var l=[e._private.rscratch.cp2ax,e._private.rscratch.cp2ay];t=o[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),l[0],l[1],n._private.style["border-width"].value/2);var p=this.shortenIntersection(t,l,s[e._private.style["source-arrow-shape"].value].spacing(e));var d=this.shortenIntersection(t,l,s[e._private.style["source-arrow-shape"].value].gap(e));e._private.rscratch.startX=d[0];e._private.rscratch.startY=d[1];e._private.rscratch.arrowStartX=p[0];e._private.rscratch.arrowStartY=p[1]}else{if(e._private.rscratch.edgeType=="straight"){t=o[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),n.position().x,n.position().y,r._private.style["border-width"].value/2);if(t.length==0){e._private.rscratch.noArrowPlacement=true}else{e._private.rscratch.noArrowPlacement=false}var c=this.shortenIntersection(t,[n.position().x,n.position().y],s[e._private.style["target-arrow-shape"].value].spacing(e));var h=this.shortenIntersection(t,[n.position().x,n.position().y],s[e._private.style["target-arrow-shape"].value].gap(e));e._private.rscratch.endX=h[0];e._private.rscratch.endY=h[1];e._private.rscratch.arrowEndX=c[0];e._private.rscratch.arrowEndY=c[1];t=o[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),r.position().x,r.position().y,n._private.style["border-width"].value/2);if(t.length==0){e._private.rscratch.noArrowPlacement=true}else{e._private.rscratch.noArrowPlacement=false}var p=this.shortenIntersection(t,[r.position().x,r.position().y],s[e._private.style["source-arrow-shape"].value].spacing(e));var d=this.shortenIntersection(t,[r.position().x,r.position().y],s[e._private.style["source-arrow-shape"].value].gap(e));e._private.rscratch.startX=d[0];e._private.rscratch.startY=d[1];e._private.rscratch.arrowStartX=p[0];e._private.rscratch.arrowStartY=p[1]}else{if(e._private.rscratch.edgeType=="bezier"){var l=[e._private.rscratch.cp2x,e._private.rscratch.cp2y];var v=a[0]*.25+f[0]*.25+l[0]*.5;var m=a[1]*.25+f[1]*.25+l[1]*.5;t=o[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),l[0],l[1],r._private.style["border-width"].value/2);var c=this.shortenIntersection(t,l,s[e._private.style["target-arrow-shape"].value].spacing(e));var h=this.shortenIntersection(t,l,s[e._private.style["target-arrow-shape"].value].gap(e));e._private.rscratch.endX=h[0];e._private.rscratch.endY=h[1];e._private.rscratch.arrowEndX=c[0];e._private.rscratch.arrowEndY=c[1];t=o[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),l[0],l[1],n._private.style["border-width"].value/2);var p=this.shortenIntersection(t,l,s[e._private.style["source-arrow-shape"].value].spacing(e));var d=this.shortenIntersection(t,l,s[e._private.style["source-arrow-shape"].value].gap(e));e._private.rscratch.startX=d[0];e._private.rscratch.startY=d[1];e._private.rscratch.arrowStartX=p[0];e._private.rscratch.arrowStartY=p[1]}else{if(e._private.rscratch.isArcEdge){return}}}}};t.prototype.findEdges=function(e){var t=this.getCachedEdges();var n={};var r=[];for(var i=0;i<e.length;i++){n[e[i]._private.data.id]=e[i]}for(var i=0;i<t.length;i++){if(n[t[i]._private.data.source]||n[t[i]._private.data.target]){r.push(t[i])}}return r};t.prototype.intersectLineEllipse=function(e,t,n,r,i,s){var o=n-e;var u=r-t;o/=i;u/=s;var a=Math.sqrt(o*o+u*u);var f=a-1;if(f<0){return[]}var l=f/a;return[(n-e)*l+e,(r-t)*l+t]};t.prototype.dotProduct=function(e,t){if(e.length!=2||t.length!=2){throw"dot product: arguments are not vectors"}return e[0]*t[0]+e[1]*t[1]};t.prototype.intersectLineCircle=function(e,t,n,r,i,s,o){var u=[n-e,r-t];var a=[e,t];var f=[i,s];var l=[e-i,t-s];var c=u[0]*u[0]+u[1]*u[1];var h=2*(l[0]*u[0]+l[1]*u[1]);var f=l[0]*l[0]+l[1]*l[1]-o*o;var p=h*h-4*c*f;if(p<0){return[]}t1=(-h+Math.sqrt(p))/(2*c);t2=(-h-Math.sqrt(p))/(2*c);var d=Math.min(t1,t2);var v=Math.max(t1,t2);var m=[];if(d>=0&&d<=1){m.push(d)}if(v>=0&&v<=1){m.push(v)}if(m.length==0){return[]}var g=m[0]*u[0]+e;var y=m[0]*u[1]+t;if(m.length>1){if(m[0]==m[1]){return[g,y]}else{var b=m[1]*u[0]+e;var w=m[1]*u[1]+t;return[g,y,b,w]}}else{return[g,y]}};t.prototype.findCircleNearPoint=function(e,t,n,r,i){var s=r-e;var o=i-t;var u=Math.sqrt(s*s+o*o);var a=s/u;var f=o/u;return[e+a*n,t+f*n]};t.prototype.findMaxSqDistanceToOrigin=function(e){var t=1e-6;var n;for(var r=0;r<e.length/2;r++){n=e[r*2]*e[r*2]+e[r*2+1]*e[r*2+1];if(n>t){t=n}}return t};t.prototype.finiteLinesIntersect=function(e,t,n,r,i,s,o,u,a){var f=(o-i)*(t-s)-(u-s)*(e-i);var l=(n-e)*(t-s)-(r-t)*(e-i);var c=(u-s)*(n-e)-(o-i)*(r-t);if(c!=0){var h=f/c;var p=l/c;if(0<=h&&h<=1&&0<=p&&p<=1){return[e+h*(n-e),t+h*(r-t)]}else{if(!a){return[]}else{return[e+h*(n-e),t+h*(r-t)]}}}else{if(f==0||l==0){if([e,n,o].sort()[1]==o){return[o,u]}if([e,n,i].sort()[1]==i){return[i,s]}if([i,o,n].sort()[1]==n){return[n,r]}return[]}else{return[]}}};t.prototype.boxIntersectEllipse=function(e,t,n,r,i,s,o,u,a){if(n<e){var f=e;e=n;n=f}if(r<t){var l=t;t=r;r=l}var c=[u-s/2-i,a];var h=[u+s/2+i,a];var p=[u,a-o/2-i];var d=[u,a+o/2+i];if(n<c[0]){return false}if(e>h[0]){return false}if(t>d[1]){return false}if(r<p[1]){return false}if(e<=h[0]&&h[0]<=n&&t<=h[1]&&h[1]<=r){return true}if(e<=c[0]&&c[0]<=n&&t<=c[1]&&c[1]<=r){return true}if(e<=p[0]&&p[0]<=n&&t<=p[1]&&p[1]<=r){return true}if(e<=d[0]&&d[0]<=n&&t<=d[1]&&d[1]<=r){return true}e=(e-u)/(s/2+i);n=(n-u)/(s/2+i);t=(t-a)/(o/2+i);r=(r-a)/(o/2+i);if(e*e+t*t<=1){return true}if(n*n+t*t<=1){return true}if(n*n+r*r<=1){return true}if(e*e+r*r<=1){return true}return false};t.prototype.boxIntersectPolygon=function(e,t,n,r,i,s,o,u,a,f,l){if(n<e){var c=e;e=n;n=c}if(r<t){var h=t;t=r;r=h}var p=new Array(i.length);var d=Math.asin(f[1]/Math.sqrt(f[0]*f[0]+f[1]*f[1]));if(f[0]<0){d=d+Math.PI/2}else{d=-d-Math.PI/2}var v=Math.cos(-d);var m=Math.sin(-d);for(var g=0;g<p.length/2;g++){p[g*2]=s/2*(i[g*2]*v-i[g*2+1]*m);p[g*2+1]=o/2*(i[g*2+1]*v+i[g*2]*m);p[g*2]+=u;p[g*2+1]+=a}var y=p[0];var b=p[0];var w=p[1];var E=p[1];for(var g=1;g<p.length/2;g++){if(p[g*2]>b){b=p[g*2]}if(p[g*2]<y){y=p[g*2]}if(p[g*2+1]>E){E=p[g*2+1]}if(p[g*2+1]<w){w=p[g*2+1]}}if(n<y-l){return false}if(e>b+l){return false}if(r<w-l){return false}if(t>E+l){return false}var S;if(l>0){var x=N.expandPolygon(p,-l);S=N.joinLines(x)}else{S=p}for(var g=0;g<p.length/2;g++){if(e<=p[g*2]&&p[g*2]<=n){if(t<=p[g*2+1]&&p[g*2+1]<=r){return true}}}for(var g=0;g<S.length/2;g++){var T=S[g*2];var C=S[g*2+1];var k;var L;if(g<S.length/2-1){k=S[(g+1)*2];L=S[(g+1)*2+1]}else{k=S[0];L=S[1]}if(N.finiteLinesIntersect(T,C,k,L,e,t,n,t,false).length>0){return true}if(N.finiteLinesIntersect(T,C,k,L,e,r,n,r,false).length>0){return true}if(N.finiteLinesIntersect(T,C,k,L,e,t,e,r,false).length>0){return true}if(N.finiteLinesIntersect(T,C,k,L,n,t,n,r,false).length>0){return true}}return false};t.prototype.polygonIntersectLine=function(e,t,n,r,i,s,o,u){var a=[];var f;var l=new Array(n.length);for(var c=0;c<l.length/2;c++){l[c*2]=n[c*2]*s+r;l[c*2+1]=n[c*2+1]*o+i}var h;if(u>0){var p=N.expandPolygon(l,-u);h=N.joinLines(p)}else{h=l}var d,v,m,g;for(var c=0;c<h.length/2;c++){d=h[c*2];v=h[c*2+1];if(c<h.length/2-1){m=h[(c+1)*2];g=h[(c+1)*2+1]}else{m=h[0];g=h[1]}f=this.finiteLinesIntersect(e,t,r,i,d,v,m,g);if(f.length!=0){a.push(f[0],f[1])}}return a};t.prototype.shortenIntersection=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]];var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]);var s=(i-n)/i;if(s<0){return[]}else{return[t[0]+s*r[0],t[1]+s*r[1]]}};s.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(e,t,n,r,i,o,a,f){var l=s.arrow._points;return u.pointInsidePolygon(e,t,l,n,r,i,o,a,f)},roughCollide:function(e,t,n,r,i,o,a,f){if(typeof s.arrow._farthestPointSqDistance=="undefined"){s.arrow._farthestPointSqDistance=u.findMaxSqDistanceToOrigin(s.arrow._points)}return u.checkInBoundingCircle(e,t,s.arrow._farthestPointSqDistance,0,i,o,n,r)},draw:function(e){var t=s.arrow._points;for(var n=0;n<t.length/2;n++){e.lineTo(t[n*2],t[n*2+1])}},spacing:function(e){return 0},gap:function(e){return e._private.style.width.value*2}};s.triangle=s.arrow;s.none={collide:function(e,t,n,r,i,s,o,u){return false},roughCollide:function(e,t,n,r,i,s,o,u){return false},draw:function(e){},spacing:function(e){return 0},gap:function(e){return 0}};s.circle={_baseRadius:.15,collide:function(e,t,n,r,i,o,u,a){if(i!=o){var f=Math.asin(u[1]/Math.sqrt(u[0]*u[0]+u[1]*u[1]));var l=Math.cos(-f);var c=Math.sin(-f);var h=[e*l-t*c,t*l+e*c];var p=(o+a)/(i+a);t/=p;r/=p;return Math.pow(n-e,2)+Math.pow(r-t,2)<=Math.pow((i+a)*s.circle._baseRadius,2)}else{return Math.pow(n-e,2)+Math.pow(r-t,2)<=Math.pow((i+a)*s.circle._baseRadius,2)}},roughCollide:function(e,t,n,r,i,s,o,u){return true},draw:function(e){e.arc(0,0,s.circle._baseRadius,0,Math.PI*2,false)},spacing:function(e){return u.getArrowWidth(e._private.style.width.value)*s.circle._baseRadius},gap:function(e){return e._private.style.width.value*2}};s.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(e,t,n,r,i,o,a,f){var l=s.inhibitor._points;return u.pointInsidePolygon(e,t,l,n,r,i,o,a,f)},roughCollide:function(e,t,n,r,i,o,a,f){if(typeof s.inhibitor._farthestPointSqDistance=="undefined"){s.inhibitor._farthestPointSqDistance=u.findMaxSqDistanceToOrigin(s.inhibitor._points)}return u.checkInBoundingCircle(e,t,s.inhibitor._farthestPointSqDistance,0,i,o,n,r)},draw:function(e){var t=s.inhibitor._points;for(var n=0;n<t.length/2;n++){e.lineTo(t[n*2],t[n*2+1])}},spacing:function(e){return 4},gap:function(e){return 4}};s.square={_points:[-.12,0,.12,0,.12,-.24,-.12,-.24],collide:function(e,t,n,r,i,o,a,f){var l=s.square._points;return u.pointInsidePolygon(e,t,l,n,r,i,o,a,f)},roughCollide:function(e,t,n,r,i,o,a,f){if(typeof s.square._farthestPointSqDistance=="undefined"){s.square._farthestPointSqDistance=u.findMaxSqDistanceToOrigin(s.square._points)}return u.checkInBoundingCircle(e,t,s.square._farthestPointSqDistance,0,i,o,n,r)},draw:function(e){var t=s.square._points;for(var n=0;n<t.length/2;n++){e.lineTo(t[n*2],t[n*2+1])}},spacing:function(e){return 0},gap:function(e){return e._private.style.width.value*2}};s.diamond={_points:[-.14,-.14,0,-.28,.14,-.14,0,0],collide:function(e,t,n,r,i,o,a,f){var l=s.diamond._points;return u.pointInsidePolygon(e,t,l,n,r,i,o,a,f)},roughCollide:function(e,t,n,r,i,o,a,f){if(typeof s.diamond._farthestPointSqDistance=="undefined"){s.diamond._farthestPointSqDistance=u.findMaxSqDistanceToOrigin(s.diamond._points)}return u.checkInBoundingCircle(e,t,s.diamond._farthestPointSqDistance,0,i,o,n,r)},draw:function(e){e.lineTo(-.14,-.14);e.lineTo(0,-.28);e.lineTo(.14,-.14);e.lineTo(0,0)},spacing:function(e){return 0},gap:function(e){return e._private.style.width.value*2}};s.tee=s.inhibitor;t.prototype.getArrowWidth=function(e){return Math.max(Math.pow(e*13.37,.9),29)};t.prototype.getArrowHeight=function(e){return Math.max(Math.pow(e*13.37,.9),29)};t.prototype.drawArrowheads=function(e,t,n){if(n){return}var r,i;var s=t._private.rscratch.arrowStartX;var o=t._private.rscratch.arrowStartY;r=s-t.source().position().x;i=o-t.source().position().y;e.fillStyle="rgba("+t._private.style["source-arrow-color"].value[0]+","+t._private.style["source-arrow-color"].value[1]+","+t._private.style["source-arrow-color"].value[2]+","+t._private.style.opacity.value+")";e.lineWidth=t._private.style.width.value;this.drawArrowShape(e,t._private.style["source-arrow-shape"].value,s,o,r,i);var u=t._private.rscratch.arrowEndX;var a=t._private.rscratch.arrowEndY;r=u-t.target().position().x;i=a-t.target().position().y;e.fillStyle="rgba("+t._private.style["target-arrow-color"].value[0]+","+t._private.style["target-arrow-color"].value[1]+","+t._private.style["target-arrow-color"].value[2]+","+t._private.style.opacity.value+")";e.lineWidth=t._private.style.width.value;this.drawArrowShape(e,t._private.style["target-arrow-shape"].value,u,a,r,i)};t.prototype.drawArrowShape=function(e,t,n,r,i,o){var u=Math.asin(o/Math.sqrt(i*i+o*o));if(i<0){u=u+Math.PI/2}else{u=-(Math.PI/2+u)}e.translate(n,r);e.moveTo(0,0);e.rotate(-u);var a=this.getArrowWidth(e.lineWidth);e.scale(a,a);e.beginPath();s[t].draw(e);e.closePath();e.fill();e.scale(1/a,1/a);e.rotate(u);e.translate(-n,-r)};var T=function(e,t){var n=1/e*2*Math.PI;var r=e%2==0?Math.PI/2+n/2:Math.PI/2;r+=t;var i=new Array(e*2);var s;for(var o=0;o<e;o++){s=o*n+r;i[2*o]=Math.cos(s);i[2*o+1]=Math.sin(-s)}var u=0;var a=0;for(var o=0;o<i.length/2;o++){if(Math.abs(i[2*o]>u)){u=Math.abs(i[2*o])}if(Math.abs(i[2*o+1]>a)){a=Math.abs(i[2*o+1])}}var f=5e-4;var l=Math.max(u,a);for(var o=0;o<i.length/2;o++){if(l>f){i[2*o]*=1/l;i[2*o+1]*=1/l}}return i};var N=u;o.ellipse={draw:function(e,t,n,r,i){o.ellipse.drawPath(e,t,n,r,i);e.fill()},drawPath:function(e,t,n,r,i){e.beginPath();e.translate(t,n);e.scale(r/2,i/2);e.arc(0,0,1,0,Math.PI*2*.999,false);e.closePath();e.scale(2/r,2/i);e.translate(-t,-n)},intersectLine:function(e,t,n,r,i,s,o){var a=u.intersectLineEllipse(i,s,e,t,n/2+o,r/2+o);return a},intersectBox:function(e,n,r,i,s,o,u,a,f){return t.prototype.boxIntersectEllipse(e,n,r,i,f,s,o,u,a)},checkPointRough:function(e,t,n,r,i,s,o){return true},checkPoint:function(e,t,n,r,i,s,o){e-=s;t-=o;e/=r/2+n;t/=i/2+n;return Math.pow(e,2)+Math.pow(t,2)<=1}};o.triangle={points:T(3,0),draw:function(e,t,n,r,i){N.drawPolygon(e,t,n,r,i,o.triangle.points)},drawPath:function(e,t,n,r,i){N.drawPolygonPath(e,t,n,r,i,o.triangle.points)},intersectLine:function(e,t,n,r,i,s,u){return N.polygonIntersectLine(i,s,o.triangle.points,e,t,n/2,r/2,u)},intersectBox:function(e,t,n,r,i,s,u,a,f){var l=o.triangle.points;return N.boxIntersectPolygon(e,t,n,r,l,i,s,u,a,[0,-1],f)},checkPointRough:function(e,t,n,r,i,s,u){return N.checkInBoundingBox(e,t,o.triangle.points,n,r,i,s,u)},checkPoint:function(e,t,n,r,i,s,u){return N.pointInsidePolygon(e,t,o.triangle.points,s,u,r,i,[0,-1],n)}};o.square={points:T(4,0),draw:function(e,t,n,r,i){N.drawPolygon(e,t,n,r,i,o.square.points)},drawPath:function(e,t,n,r,i){N.drawPolygonPath(e,t,n,r,i,o.square.points)},intersectLine:function(e,t,n,r,i,s,u){return N.polygonIntersectLine(i,s,o.square.points,e,t,n/2,r/2,u)},intersectBox:function(e,t,n,r,i,s,u,a,f){var l=o.square.points;return N.boxIntersectPolygon(e,t,n,r,l,i,s,u,a,[0,-1],f)},checkPointRough:function(e,t,n,r,i,s,u){return N.checkInBoundingBox(e,t,o.square.points,n,r,i,s,u)},checkPoint:function(e,t,n,r,i,s,u){return N.pointInsidePolygon(e,t,o.square.points,s,u,r,i,[0,-1],n)}};o.rectangle=o.square;o.octogon={};o.roundrectangle={points:T(4,0),draw:function(e,t,n,r,i){N.drawRoundRectangle(e,t,n,r,i,10)},drawPath:function(e,t,n,r,i){N.drawRoundRectanglePath(e,t,n,r,i,10)},intersectLine:function(e,t,n,r,i,s,o){return N.roundRectangleIntersectLine(i,s,e,t,n,r,o)},intersectBox:function(e,t,n,r,i,s,o,u,a){return N.roundRectangleIntersectBox(e,t,n,r,i,s,o,u,a)},checkPointRough:function(e,t,n,r,i,s,u){return N.checkInBoundingBox(e,t,o.roundrectangle.points,n,r,i,s,u)},checkPoint:function(e,t,n,r,i,s,u){var a=N.getRoundRectangleRadius(r,i);if(N.pointInsidePolygon(e,t,o.roundrectangle.points,s,u,r,i-2*a,[0,-1],n)){return true}if(N.pointInsidePolygon(e,t,o.roundrectangle.points,s,u,r-2*a,i,[0,-1],n)){return true}var f=function(e,t,n,r,i,s,o){e-=n;t-=r;e/=i/2+o;t/=s/2+o;return Math.pow(e,2)+Math.pow(t,2)<=1};if(f(e,t,s-r/2+a,u-i/2+a,a*2,a*2,n)){return true}if(f(e,t,s+r/2-a,u-i/2+a,a*2,a*2,n)){return true}if(f(e,t,s+r/2-a,u+i/2-a,a*2,a*2,n)){return true}if(f(e,t,s-r/2+a,u+i/2-a,a*2,a*2,n)){return true}return false}};o.roundrectangle2={roundness:4.99,draw:function(e,t,n){if(t<=roundness*2){return}N.drawPolygon(e._private.position.x,e._private.position.y,t,n,nodeSapes.roundrectangle2.points)},intersectLine:function(e,t,n,r,i){return N.findPolygonIntersection(e,t,n,r,i,o.square.points)},intersectBox:function(e,t,n,r,i,s,u,a,f){var l=o.square.points}};o.pentagon={points:T(5,0),draw:function(e,t,n,r,i){N.drawPolygon(e,t,n,r,i,o.pentagon.points)},drawPath:function(e,t,n,r,i){N.drawPolygonPath(e,t,n,r,i,o.pentagon.points)},intersectLine:function(e,t,n,r,i,s,u){return N.polygonIntersectLine(i,s,o.pentagon.points,e,t,n/2,r/2,u)},intersectBox:function(e,t,n,r,i,s,u,a,f){var l=o.pentagon.points;return N.boxIntersectPolygon(e,t,n,r,l,i,s,u,a,[0,-1],f)},checkPointRough:function(e,t,n,r,i,s,u){return N.checkInBoundingBox(e,t,o.pentagon.points,n,r,i,s,u)},checkPoint:function(e,t,n,r,i,s,u){return N.pointInsidePolygon(e,t,o.pentagon.points,s,u,r,i,[0,-1],n)}};o.hexagon={points:T(6,0),draw:function(e,t,n,r,i){N.drawPolygon(e,t,n,r,i,o.hexagon.points)},drawPath:function(e,t,n,r,i){N.drawPolygonPath(e,t,n,r,i,o.hexagon.points)},intersectLine:function(e,t,n,r,i,s,u){return N.polygonIntersectLine(i,s,o.hexagon.points,e,t,n/2,r/2,u)},intersectBox:function(e,t,n,r,i,s,u,a,f){var l=o.hexagon.points;return N.boxIntersectPolygon(e,t,n,r,l,i,s,u,a,[0,-1],f)},checkPointRough:function(e,t,n,r,i,s,u){return N.checkInBoundingBox(e,t,o.hexagon.points,n,r,i,s,u)},checkPoint:function(e,t,n,r,i,s,u){return N.pointInsidePolygon(e,t,o.hexagon.points,s,u,r,i,[0,-1],n)}};o.heptagon={points:T(7,0),draw:function(e,t,n,r,i){N.drawPolygon(e,t,n,r,i,o.heptagon.points)},drawPath:function(e,t,n,r,i){N.drawPolygonPath(e,t,n,r,i,o.heptagon.points)},intersectLine:function(e,t,n,r,i,s,u){return N.polygonIntersectLine(i,s,o.heptagon.points,e,t,n/2,r/2,u)},intersectBox:function(e,t,n,r,i,s,u,a,f){var l=o.heptagon.points;return N.boxIntersectPolygon(e,t,n,r,l,i,s,u,a,[0,-1],f)},checkPointRough:function(e,t,n,r,i,s,u){return N.checkInBoundingBox(e,t,o.heptagon.points,n,r,i,s,u)},checkPoint:function(e,t,n,r,i,s,u){return N.pointInsidePolygon(e,t,o.heptagon.points,s,u,r,i,[0,-1],n)}};o.octagon={points:T(8,0),draw:function(e,t,n,r,i){N.drawPolygon(e,t,n,r,i,o.octagon.points)},drawPath:function(e,t,n,r,i){N.drawPolygonPath(e,t,n,r,i,o.octagon.points)},intersectLine:function(e,t,n,r,i,s,u){return N.polygonIntersectLine(i,s,o.octagon.points,e,t,n/2,r/2,u)},intersectBox:function(e,t,n,r,i,s,u,a,f){var l=o.octagon.points;return N.boxIntersectPolygon(e,t,n,r,l,i,s,u,a,[0,-1],f)},checkPointRough:function(e,t,n,r,i,s,u){return N.checkInBoundingBox(e,t,o.octagon.points,n,r,i,s,u)},checkPoint:function(e,t,n,r,i,s,u){return N.pointInsidePolygon(e,t,o.octagon.points,s,u,r,i,[0,-1],n)}};var C=new Array(20);var k=T(5,0);var L=T(5,Math.PI/5);var A=.5*(3-Math.sqrt(5));A*=1.57;for(var O=0;O<L.length/2;O++){L[O*2]*=A;L[O*2+1]*=A}for(var O=0;O<20/4;O++){C[O*4]=k[O*2];C[O*4+1]=k[O*2+1];C[O*4+2]=L[O*2];C[O*4+3]=L[O*2+1]}o.star5={points:C,draw:function(e,t,n,r,i){N.drawPolygon(e,t,n,r,i,o.star5.points)},drawPath:function(e,t,n,r,i){N.drawPolygonPath(e,t,n,r,i,o.star5.points)},intersectLine:function(e,t,n,r,i,s,u){return N.polygonIntersectLine(i,s,o.star5.points,e,t,n/2,r/2,u)},intersectBox:function(e,t,n,r,i,s,u,a,f){var l=o.star5.points;return N.boxIntersectPolygon(e,t,n,r,l,i,s,u,a,[0,-1],f)},checkPointRough:function(e,t,n,r,i,s,u){return N.checkInBoundingBox(e,t,o.star5.points,n,r,i,s,u)},checkPoint:function(e,t,n,r,i,s,u){return N.pointInsidePolygon(e,t,o.star5.points,s,u,r,i,[0,-1],n)}};t.prototype.expandPolygon=function(e,t){var n=new Array(e.length*2);var r,i,s,o;for(var u=0;u<e.length/2;u++){r=e[u*2];i=e[u*2+1];if(u<e.length/2-1){s=e[(u+1)*2];o=e[(u+1)*2+1]}else{s=e[0];o=e[1]}var a=o-i;var f=-(s-r);var l=Math.sqrt(a*a+f*f);var c=a/l;var h=f/l;n[u*4]=r+c*t;n[u*4+1]=i+h*t;n[u*4+2]=s+c*t;n[u*4+3]=o+h*t}return n};t.prototype.joinLines=function(e){var t=new Array(e.length/2);var n,r,i,s;var o,u,a,f;for(var l=0;l<e.length/4;l++){n=e[l*4];r=e[l*4+1];i=e[l*4+2];s=e[l*4+3];if(l<e.length/4-1){o=e[(l+1)*4];u=e[(l+1)*4+1];a=e[(l+1)*4+2];f=e[(l+1)*4+3]}else{o=e[0];u=e[1];a=e[2];f=e[3]}var c=this.finiteLinesIntersect(n,r,i,s,o,u,a,f,true);t[l*2]=c[0];t[l*2+1]=c[1]}return t};t.prototype.pointInsidePolygon=function(e,t,n,r,i,s,o,u,a){var f=new Array(n.length);var l=Math.asin(u[1]/Math.sqrt(u[0]*u[0]+u[1]*u[1]));if(u[0]<0){l=l+Math.PI/2}else{l=-l-Math.PI/2}var c=Math.cos(-l);var h=Math.sin(-l);for(var p=0;p<f.length/2;p++){f[p*2]=s/2*(n[p*2]*c-n[p*2+1]*h);f[p*2+1]=o/2*(n[p*2+1]*c+n[p*2]*h);f[p*2]+=r;f[p*2+1]+=i}var d;if(a>0){var v=N.expandPolygon(f,-a);d=N.joinLines(v)}else{d=f}var m,g,y,b;var w;var E=0;var S=0;for(var p=0;p<d.length/2;p++){m=d[p*2];g=d[p*2+1];if(p+1<d.length/2){y=d[(p+1)*2];b=d[(p+1)*2+1]}else{y=d[(p+1-d.length/2)*2];b=d[(p+1-d.length/2)*2+1]}if(m==e&&y==e){}else{if(m>=e&&e>=y||m<=e&&e<=y){w=(e-m)/(y-m)*(b-g)+g;if(w>t){E++}if(w<t){S++}}else{continue}}}if(E%2==0){return false}else{return true}};t.prototype.drawPolygonPath=function(e,t,n,r,i,s){e.translate(t,n);e.scale(r/2,i/2);e.beginPath();e.moveTo(s[0],s[1]);for(var o=1;o<s.length/2;o++){e.lineTo(s[o*2],s[o*2+1])}e.closePath();e.scale(2/r,2/i);e.translate(-t,-n)};t.prototype.drawPolygon=function(e,t,n,r,i,s){this.drawPolygonPath(e,t,n,r,i,s);e.fill()};t.prototype.getRoundRectangleRadius=function(e,t){return Math.min(e/2,t/2,10)};t.prototype.drawRoundRectanglePath=function(e,t,n,r,i,s){var o=r/2;var u=i/2;var a=this.getRoundRectangleRadius(r,i);e.translate(t,n);e.beginPath();e.moveTo(0,-u);e.arcTo(o,-u,o,0,a);e.arcTo(o,u,0,u,a);e.arcTo(-o,u,-o,0,a);e.arcTo(-o,-u,0,-u,a);e.lineTo(0,-u);e.closePath();e.translate(-t,-n)};t.prototype.drawRoundRectangle=function(e,t,n,r,i,s){this.drawRoundRectanglePath(e,t,n,r,i,s);e.fill()};t.prototype.roundRectangleIntersectLine=function(e,t,n,r,i,s,o){var u=this.getRoundRectangleRadius(i,s);var a=i/2;var f=s/2;var l;var c=n-a+u-o;var h=r-f-o;var p=n+a-u+o;var d=h;l=this.finiteLinesIntersect(e,t,n,r,c,h,p,d,false);if(l.length>0){return l}var v=n+a+o;var m=r-f+u-o;var g=v;var y=r+f-u+o;l=this.finiteLinesIntersect(e,t,n,r,v,m,g,y,false);if(l.length>0){return l}var b=n-a+u-o;var w=r+f+o;var E=n+a-u+o;var S=w;l=this.finiteLinesIntersect(e,t,n,r,b,w,E,S,false);if(l.length>0){return l}var x=n-a-o;var T=r-f+u-o;var N=x;var C=r+f-u+o;l=this.finiteLinesIntersect(e,t,n,r,x,T,N,C,false);if(l.length>0){return l}var k;var L=n-a+u;var A=r-f+u;k=this.intersectLineCircle(e,t,n,r,L,A,u+o);if(k.length>0&&k[0]<=L&&k[1]<=A){return[k[0],k[1]]}var O=n+a-u;var M=r-f+u;k=this.intersectLineCircle(e,t,n,r,O,M,u+o);if(k.length>0&&k[0]>=O&&k[1]<=M){return[k[0],k[1]]}var _=n+a-u;var D=r+f-u;k=this.intersectLineCircle(e,t,n,r,_,D,u+o);if(k.length>0&&k[0]>=_&&k[1]>=D){return[k[0],k[1]]}var P=n-a+u;var H=r+f-u;k=this.intersectLineCircle(e,t,n,r,P,H,u+o);if(k.length>0&&k[0]<=P&&k[1]>=H){return[k[0],k[1]]}};t.prototype.roundRectangleIntersectBox=function(e,t,n,r,i,s,o,u,a){var f=this.getRoundRectangleRadius(i,s);var l=o-i/2-a;var c=u-s/2+f-a;var h=o+i/2+a;var p=u+s/2-f+a;var d=o-i/2+f-a;var v=u-s/2-a;var m=o+i/2-f+a;var g=u+s/2+a;var y=Math.min(e,n);var b=Math.max(e,n);var w=Math.min(t,r);var E=Math.max(t,r);if(b<l){return false}else{if(y>h){return false}}if(E<v){return false}else{if(w>g){return false}}if(l>=y&&l<=b&&c>=w&&c<=E){return true}if(h>=y&&h<=b&&c>=w&&c<=E){return true}if(h>=y&&h<=b&&p>=w&&p<=E){return true}if(l>=y&&l<=b&&p>=w&&p<=E){return true}if(y>=l&&y<=h&&w>=c&&w<=p){return true}if(b>=l&&b<=h&&w>=c&&w<=p){return true}if(b>=l&&b<=h&&E>=c&&E<=p){return true}if(y>=l&&y<=h&&E>=c&&E<=p){return true}if(d>=y&&d<=b&&v>=w&&v<=E){return true}if(m>=y&&m<=b&&v>=w&&v<=E){return true}if(m>=y&&m<=b&&g>=w&&g<=E){return true}if(d>=y&&d<=b&&g>=w&&g<=E){return true}if(y>=d&&y<=m&&w>=v&&w<=g){return true}if(b>=d&&b<=m&&w>=v&&w<=g){return true}if(b>=d&&b<=m&&E>=v&&E<=g){return true}if(y>=d&&y<=m&&E>=v&&E<=g){return true}if(this.boxIntersectEllipse(y,w,b,E,a,f*2,f*2,d+a,c+a)){return true}if(this.boxIntersectEllipse(y,w,b,E,a,f*2,f*2,m-a,c+a)){return true}if(this.boxIntersectEllipse(y,w,b,E,a,f*2,f*2,m-a,p-a)){return true}if(this.boxIntersectEllipse(y,w,b,E,a,f*2,f*2,d+a,p-a)){return true}return false};t.prototype.checkInBoundingCircle=function(e,t,n,r,i,s,o,u){e=(e-o)/(i+r);t=(t-u)/(s+r);return e*e+t*t<=n};t.prototype.checkInBoundingBox=function(e,t,n,r,i,s,o,u){var a=n[0],f=n[1];var l=n[0],c=n[1];for(var h=1;h<n.length/2;h++){if(n[h*2]<a){a=n[h*2]}else{if(n[h*2]>l){l=n[h*2]}}if(n[h*2+1]<f){f=n[h*2+1]}else{if(n[h*2+1]>c){c=n[h*2+1]}}}e-=o;t-=u;e/=i;t/=s;if(e<a){return false}else{if(e>l){return false}}if(t<f){return false}else{if(t>c){return false}}return true};t.prototype.boxInBezierVicinity=function(e,t,n,r,i,s,o,u,a,f,l){var c=.25*i+.5*o+.25*a;var h=.25*s+.5*u+.25*f;var p=Math.min(e,n)-l;var d=Math.min(t,r)-l;var v=Math.max(e,n)+l;var m=Math.max(t,r)+l;if(i>=p&&i<=v&&s>=d&&s<=m){return 1}else{if(a>=p&&a<=v&&f>=d&&f<=m){return 1}else{if(c>=p&&c<=v&&h>=d&&h<=m){return 1}else{if(o>=p&&o<=v&&u>=d&&u<=m){return 1}}}}var g=Math.min(i,c,a);var y=Math.min(s,h,f);var b=Math.max(i,c,a);var w=Math.max(s,h,f);if(g>v||b<p||y>m||w<d){return 0}return 1};t.prototype.checkBezierInBox=function(e,t,n,r,i,s,o,u,a,f,l){function c(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n}function h(l){var h=c(i,o,a,l);var p=c(s,u,f,l);return e<=h&&h<=n&&t<=p&&p<=r}for(var p=0;p<=1;p+=.25){if(!h(p)){return false}}return true};t.prototype.checkStraightEdgeInBox=function(e,t,n,r,i,s,o,u,a){return e<=i&&i<=n&&e<=o&&o<=n&&t<=s&&s<=r&&t<=u&&u<=r};t.prototype.checkStraightEdgeCrossesBox=function(e,t,n,r,i,s,o,u,a){var f=Math.min(e,n)-a;var l=Math.min(t,r)-a;var c=Math.max(e,n)+a;var h=Math.max(t,r)+a;var p=o-i;var d=i;var v;var m=u-s;var g=s;var y;if(Math.abs(p)<1e-4){return i>=f&&i<=c&&Math.min(s,u)<=l&&Math.max(s,u)>=h}var b=(f-d)/p;if(b>0&&b<=1){v=m*b+g;if(v>=l&&v<=h){return true}}var w=(c-d)/p;if(w>0&&w<=1){v=m*w+g;if(v>=l&&v<=h){return true}}var E=(l-g)/m;if(E>0&&E<=1){y=p*E+d;if(y>=f&&y<=c){return true}}var S=(h-g)/m;if(S>0&&S<=1){y=p*S+d;if(y>=f&&y<=c){return true}}return false};t.prototype.checkBezierCrossesBox=function(e,t,n,r,i,s,o,u,a,f,l){var c=Math.min(e,n)-l;var h=Math.min(t,r)-l;var p=Math.max(e,n)+l;var d=Math.max(t,r)+l;if(i>=c&&i<=p&&s>=h&&s<=d){return true}else{if(a>=c&&a<=p&&f>=h&&f<=d){return true}}var v=i-2*o+a;var m=-2*i+2*o;var g=i;var y=[];if(Math.abs(v)<1e-4){var b=(c-i)/m;var w=(p-i)/m;y.push(b,w)}else{var E=m*m-4*v*(g-c);var S,x;if(E>0){var T=Math.sqrt(E);S=(-m+T)/(2*v);x=(-m-T)/(2*v);y.push(S,x)}var N=m*m-4*v*(g-p);var C,k;if(N>0){var T=Math.sqrt(N);C=(-m+T)/(2*v);k=(-m-T)/(2*v);y.push(C,k)}}y.sort(function(e,t){return e-t});var L=s-2*u+f;var A=-2*s+2*u;var O=s;var M=[];if(Math.abs(L)<1e-4){var _=(h-s)/A;var D=(d-s)/A;M.push(_,D)}else{var P=A*A-4*L*(O-h);var H,B;if(P>0){var T=Math.sqrt(P);H=(-A+T)/(2*L);B=(-A-T)/(2*L);M.push(H,B)}var j=A*A-4*L*(O-d);var F,I;if(j>0){var T=Math.sqrt(j);F=(-A+T)/(2*L);I=(-A-T)/(2*L);M.push(F,I)}}M.sort(function(e,t){return e-t});for(var q=0;q<y.length;q+=2){for(var R=1;R<M.length;R+=2){if(y[q]<M[R]&&M[R]>=0&&y[q]<=1&&y[q+1]>M[R-1]&&M[R-1]<=1&&y[q+1]>=0){return true}}}return false};t.prototype.inLineVicinity=function(e,t,n,r,i,s,o){var u=o;var a=Math.min(n,i);var f=Math.max(n,i);var l=Math.min(r,s);var c=Math.max(r,s);return a-u<=e&&e<=f+u&&l-u<=t&&t<=c+u};t.prototype.inBezierVicinity=function(e,t,n,r,i,s,o,u,a){var f=.25*n+.5*i+.25*o;var l=.25*r+.5*s+.25*u;var c={x1:Math.min(n,o,f),x2:Math.max(n,o,f),y1:Math.min(r,u,l),y2:Math.max(r,u,l)};if(e<c.x1||e>c.x2||t<c.y1||t>c.y2){return false}else{}var h,p,d,v;var m,g,y;var b=function(e,t,n,r,i,s,o,u){m=(s-r)*(e-n)+(n-i)*(t-r);g=m*m;sideSquared=(s-r)*(s-r)+(n-i)*(n-i);if(u){if(m>0){return false}}else{if(m<0){return false}}return g/sideSquared>o};var w=(f+i)/2;var E=(l+s)/2;var S=true;if(b(w,E,n,r,i,s,0,S)){S=!S}return!b(e,t,n,r,i,s,a,S)&&!b(e,t,i,s,o,u,a,S)&&!b(e,t,o,u,n,r,a,S)};t.prototype.solveCubic=function(e,t,n,r,i){t/=e;n/=e;r/=e;var s,o,u,a,f,l,c,h;o=(3*n-t*t)/9;u=-(27*r)+t*(9*n-2*t*t);u/=54;s=o*o*o+u*u;i[1]=0;c=t/3;if(s>0){f=u+Math.sqrt(s);f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3);l=u-Math.sqrt(s);l=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3);i[0]=-c+f+l;c+=(f+l)/2;i[4]=i[2]=-c;c=Math.sqrt(3)*(-l+f)/2;i[3]=c;i[5]=-c;return}i[5]=i[3]=0;if(s==0){h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3);i[0]=-c+2*h;i[4]=i[2]=-(h+c);return}o=-o;a=o*o*o;a=Math.acos(u/Math.sqrt(a));h=2*Math.sqrt(o);i[0]=-c+h*Math.cos(a/3);i[2]=-c+h*Math.cos((a+2*Math.PI)/3);i[4]=-c+h*Math.cos((a+4*Math.PI)/3);return};t.prototype.sqDistanceToQuadraticBezier=function(e,t,n,r,i,s,o,u){var a=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*s+2*r*u+4*s*s-4*s*u+u*u;var f=1*9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*s-3*r*r-3*r*u-6*s*s+3*s*u;var l=1*3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*r*r-6*r*s+r*u-r*t+2*s*s+2*s*t-u*t;var c=1*n*i-n*n+n*e-i*e+r*s-r*r+r*t-s*t;M("coefficients: "+a/a+", "+f/a+", "+l/a+", "+c/a);var h=[];this.solveCubic(a,f,l,c,h);var p=1e-7;var d=[];for(var v=0;v<6;v+=2){if(Math.abs(h[v+1])<p&&h[v]>=0&&h[v]<=1){d.push(h[v])}}d.push(1);d.push(0);var m=-1;var g;var y,b,w;for(var E=0;E<d.length;E++){y=Math.pow(1-d[E],2)*n+2*(1-d[E])*d[E]*i+d[E]*d[E]*o;b=Math.pow(1-d[E],2)*r+2*(1-d[E])*d[E]*s+d[E]*d[E]*u;w=Math.pow(y-e,2)+Math.pow(b-t,2);M("distance for param "+d[E]+": "+Math.sqrt(w));if(m>=0){if(w<m){m=w;g=d[E]}}else{m=w;g=d[E]}}M("given: ( "+e+", "+t+"), ( "+n+", "+r+"), ( "+i+", "+s+"), ( "+o+", "+u+")");M("roots: "+h);M("params: "+d);M("closest param: "+g);return m};t.prototype.sqDistanceToFiniteLine=function(e,t,n,r,i,s){var o=[e-n,t-r];var u=[i-n,s-r];var a=u[0]*u[0]+u[1]*u[1];var f=o[0]*o[0]+o[1]*o[1];var l=o[0]*u[0]+o[1]*u[1];var c=l*l/a;if(l<0){return f}if(c>a){return(e-i)*(e-i)+(t-s)*(t-s)}return f-c};var M=function(){};e("renderer","canvas",t)})(cytoscape);(function(e){function t(t){this.options=e.util.extend(true,{},n,t)}var n={ready:function(){},stop:function(){}};t.prototype.run=function(){var e=this.options;var t=e.cy;t.nodes().positions(function(){return{x:0,y:0}});t.one("layoutready",e.ready);t.trigger("layoutready");t.one("layoutstop",e.stop);t.trigger("layoutstop")};t.prototype.stop=function(){var e=this.options;cy.one("layoutstop",e.stop);cy.trigger("layoutstop")};e("layout","null",t)})(cytoscape);(function(e){function t(t){this.options=e.util.extend(true,{},n,t)}var n={ready:undefined,stop:undefined,fit:true,padding:30};t.prototype.run=function(){var e=this.options;var t=e.cy;var n=t.nodes();var r=t.edges();var i=t.container();var s=i.clientWidth;var o=i.clientHeight;n.positions(function(e,t){if(t.locked()){return false}return{x:Math.round(Math.random()*s),y:Math.round(Math.random()*o)}});t.one("layoutready",e.ready);t.trigger("layoutready");if(e.fit){t.fit(e.padding)}t.one("layoutstop",e.stop);t.trigger("layoutstop")};t.prototype.stop=function(){};e("layout","random",t)})(cytoscape);(function(e){function t(t){this.options=e.util.extend({},n,t)}var n={fit:true,rows:undefined,columns:undefined,ready:undefined,stop:undefined};t.prototype.run=function(){var e=this.options;var t=e;var n=e.cy;var r=n.nodes();var i=n.edges();var s=n.container();var o=s.clientWidth;var u=s.clientHeight;if(u==0||o==0){r.positions(function(){return{x:0,y:0}})}else{var a=r.size();var f=Math.sqrt(a*u/o);var l=Math.round(f);var c=Math.round(o/u*f);function h(e){if(e==undefined){return Math.min(l,c)}else{var t=Math.min(l,c);if(t==l){l=e}else{c=e}}}function p(e){if(e==undefined){return Math.max(l,c)}else{var t=Math.max(l,c);if(t==l){l=e}else{c=e}}}if(t.rows!=null&&t.columns!=null){l=t.rows;c=t.columns}else{if(t.rows!=null&&t.columns==null){l=t.rows;c=Math.ceil(a/l)}else{if(t.rows==null&&t.columns!=null){c=t.columns;l=Math.ceil(a/c)}else{if(c*l>a){var d=h();var v=p();if((d-1)*v>=a){h(d-1)}else{if((v-1)*d>=a){p(v-1)}}}else{while(c*l<a){var d=h();var v=p();if((v+1)*d>=a){p(v+1)}else{h(d+1)}}}}}}var m=o/c;var g=u/l;var y=0;var b=0;r.positions(function(e,t){if(t.locked()){return false}var n=b*m+m/2;var r=y*g+g/2;b++;if(b>=c){b=0;y++}return{x:n,y:r}})}if(e.fit){n.reset()}n.one("layoutready",e.ready);n.trigger("layoutready");n.one("layoutstop",e.stop);n.trigger("layoutstop")};t.prototype.stop=function(){};e("layout","grid",t)})(cytoscape);(function(e){function t(t){this.options=e.util.extend(true,{},n,t)}var n={fit:true,ready:undefined,stop:undefined,positions:undefined,zoom:undefined,pan:undefined,padding:30};t.prototype.run=function(){function e(e){if(t.positions==null){return null}if(t.positions[e._private.data.id]==null){return null}return t.positions[e._private.data.id]}var t=this.options;var n=t.cy;var r=n.nodes();var i=n.edges();var s=n.container();r.positions(function(t,n){var r=e(n);if(n.locked()||r==null){return false}return r});if(t.pan!=null){n.pan(t.pan)}if(t.zoom!=null){n.zoom(t.zoom)}n.one("layoutready",t.ready);n.trigger("layoutready");if(t.fit){n.fit(t.padding)}n.one("layoutstop",t.stop);n.trigger("layoutstop")};e("layout","preset",t);e("core","presetLayout",function(){var e=this;var t={};var n={};e.nodes().each(function(e,t){n[t.data("id")]=t.position()});t.positions=n;t.name="preset";t.zoom=e.zoom();t.pan=e.pan();return t})})(cytoscape);(function(e){function t(t){this.options=e.util.extend({},n,t)}var n={liveUpdate:true,ready:undefined,stop:undefined,maxSimulationTime:4e3,fit:true,padding:[50,50,50,50],ungrabifyWhileSimulating:true,repulsion:undefined,stiffness:undefined,friction:undefined,gravity:true,fps:undefined,precision:undefined,nodeMass:undefined,edgeLength:undefined,stepSize:1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3}};t.prototype.run=function(){function t(e,t){if(t==null){return undefined}else{if(typeof t==typeof function(){}){return t.apply(e,[e._private.data,{nodes:o.length,edges:u.length,element:e}])}else{return t}}}function n(e){var t=e.x;var n=e.y;var r=f;var i=l;var s=-2;var o=2;var u=-2;var a=2;var c=4;return{x:t/r*c+s,y:n/i*c+o}}function r(e){if(i.fit){s.fit()}e()}var i=this.options;var s=i.cy;var o=s.nodes();var u=s.edges();var a=s.container();var f=a.clientWidth;var l=a.clientHeight;if(s.nodes().size()<=1){if(i.fit){s.reset()}s.nodes().position({x:Math.round(f/2),y:Math.round(l/2)});s.one("layoutstop",i.stop);s.trigger("layoutstop");s.one("layoutstop",i.stop);s.trigger("layoutstop");return}var c=this.system=arbor.ParticleSystem(i.repulsion,i.stiffness,i.friction,i.gravity,i.fps,i.dt,i.precision);this.system=c;if(i.liveUpdate&&i.fit){s.reset()}var h=250;var p;var d=false;var v=+(new Date);var m={init:function(e){},redraw:function(){var t=c.energy();if(i.stableEnergy!=null&&t!=null&&t.n>0&&i.stableEnergy(t)){c.stop();return}clearTimeout(p);p=setTimeout(b,h);var n=[];c.eachNode(function(e,t){var r=e.name;var i=e.data;var s=i.element;if(s==null){return}var o=s._private.position;if(!s.locked()&&!s.grabbed()){o.x=t.x;o.y=t.y;n.push(s)}});var r=+(new Date)-v>=16;if(i.liveUpdate&&n.length>0&&r){(new e.Collection(s,n)).rtrigger("position");v=+(new Date)}if(!d){d=true;s.one("layoutready",i.ready);s.trigger("layoutready")}}};c.renderer=m;c.screenSize(f,l);c.screenPadding(i.padding[0],i.padding[1],i.padding[2],i.padding[3]);c.screenStep(i.stepSize);var g=function(e){grabbed=this;var t=c.fromScreen(this.position());var n=arbor.Point(t.x,t.y);this.scratch().arbor.p=n;switch(e.type){case"grab":this.scratch().arbor.fixed=true;break;case"dragstop":this.scratch().arbor.fixed=false;this.scratch().arbor.tempMass=1e3;break}};o.bind("grab drag dragstop",g);o.each(function(e,r){var s=this._private.data.id;var o=t(this,i.nodeMass);var u=this._private.locked;var a=n({x:r.position().x,y:r.position().y});if(r.locked()){return}this.scratch().arbor=c.addNode(s,{element:this,mass:o,fixed:u,x:u?a.x:undefined,y:u?a.y:undefined})});u.each(function(){var e=this.id();var n=this.source().id();var r=this.target().id();var s=t(this,i.edgeLength);this.scratch().arbor=c.addEdge(n,r,{length:s})});var y=o.filter(":grabbable");if(i.ungrabifyWhileSimulating){y.ungrabify()}var b=function(){function e(){if(!i.liveUpdate){if(i.fit){s.reset()}s.nodes().rtrigger("position")}o.unbind("grab drag dragstop",g);if(i.ungrabifyWhileSimulating){y.grabify()}s.one("layoutstop",i.stop);s.trigger("layoutstop")}if(window.isIE){r(function(){e()})}else{e()}};c.start();setTimeout(function(){c.stop()},i.maxSimulationTime)};t.prototype.stop=function(){if(this.system!=null){system.stop()}};e("layout","arbor",t)})(cytoscape);(function(e){function t(t){this.options=e.util.extend({},n,t)}var n={fit:true,ready:undefined,stop:undefined,rStepSize:10,padding:30,startAngle:3/2*Math.PI,counterclockwise:false};t.prototype.run=function(){function e(){var e=0;var t=h;var n={x:f.x+m*Math.cos(e),y:f.y+m*Math.sin(e)};var r={x:f.x+m*Math.cos(t),y:f.y+m*Math.sin(t)};var i=Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y));return i}var t=this.options;var n=t;var r=t.cy;var i=r.nodes();var s=r.edges();var o=r.container();var u=o.clientWidth;var a=o.clientHeight;var f={x:u/2,y:a/2};var l=50;var c=n.startAngle;var h=2*Math.PI/i.length;var p=0;for(var d=0;d<i.length;d++){var v=i[d];p=Math.max(v.outerWidth(),v.outerHeight())}var m=u/2-p;while(e()<p){m+=n.rStepSize}var d=0;i.positions(function(){var e=this;var t=m*Math.cos(c);var r=m*Math.sin(c);var i={x:f.x+t,y:f.y+r};d++;c=n.counterclockwise?c-h:c+h;return i});if(t.fit){r.fit(n.padding)}r.one("layoutready",t.ready);r.trigger("layoutready");r.one("layoutstop",t.stop);r.trigger("layoutstop")};t.prototype.stop=function(){};e("layout","circle",t)})(cytoscape);(function(e){function t(t){this.options=e.util.extend({},n,t)}var n={fit:true,ready:undefined,stop:undefined,directed:true,padding:30,circle:false,roots:undefined};t.prototype.run=function(){function t(){for(var e=0;e<m.length;e++){var t=m[e];for(var n=0;n<t.length;n++){var r=t[n];r._private.scratch.BreadthFirstLayout={depth:e,index:n}}}}function n(e){if(O[e.id()]){return O[e.id()]}var t=e._private.scratch.BreadthFirstLayout.depth;var n=e.neighborhood().nodes();var r=0;var i=0;for(var s=0;s<n.length;s++){var o=n[s];var u=o.edgesWith(e);var a=o._private.scratch.BreadthFirstLayout.index;var f=o._private.scratch.BreadthFirstLayout.depth;var l=m[f].length;if(t>f||t===0){r+=a/l;i++}}i=Math.max(1,i);r=r/i;if(i===0){r=undefined}O[e.id()]=r;return r}var r=this.options;var i=r;var s=r.cy;var o=s.nodes();var u=s.edges();var a=s.container();var f=a.clientWidth;var l=a.clientHeight;var c;if(e.is.elementOrCollection(i.roots)){c=i.roots}else{if(e.is.array(i.roots)){var h=[];for(var p=0;p<i.roots.length;p++){var d=i.roots[p];var v=s.getElementById(d);c.push(v)}c=new e.Collection(s,h)}else{c=o.roots()}}var m=[];var g={};var y={};c.bfs(function(e,t){var n=this[0];if(!m[t]){m[t]=[]}m[t].push(n);g[n.id()]=true;y[n.id()]=t},i.directed);var b=[];for(var p=0;p<o.length;p++){var v=o[p];if(g[v.id()]){continue}else{b.push(v)}}var w=b.length*3;var E=0;while(b.length!==0&&E<w){var S=b.shift();var x=S.neighborhood().nodes();var T=false;for(var p=0;p<x.length;p++){var N=y[x[p].id()];if(N!==undefined){m[N].push(S);T=true;break}}if(!T){b.push(S)}E++}while(b.length!==0){var S=b.shift();var C=S.bfs();var T=false;for(var p=0;p<C.length;p++){var N=y[C[p].id()];if(N!==undefined){m[N].push(S);T=true;break}}if(!T){if(m.length===0){m.push([])}m[0].push(S)}}t();var k=0;for(var p=0;p<o.length;p++){var L=o[p].outerWidth();var A=o[p].outerHeight();k=Math.max(k,L,A)}k*=1.75;var O={};for(var M=0;M<3;M++){for(var p=0;p<m.length;p++){var N=p;var _=[];m[p]=m[p].sort(function(e,t){var r=n(e);var i=n(t);return r-i})}t()}var D={x:f/2,y:l/2};o.positions(function(){var e=this[0];var t=e._private.scratch.BreadthFirstLayout;var n=t.depth;var r=t.index;var s=Math.max(f/(m[n].length+1),k);var o=Math.max(l/(m.length+1),k);var u=Math.min(f/2/m.length,l/2/m.length);u=Math.max(u,k);if(i.circle){var a=u*n+u-(m.length>0&&m[0].length<=3?u/2:0);var c=2*Math.PI/m[n].length*r;if(n===0&&m[0].length===1){a=1}return{x:D.x+a*Math.cos(c),y:D.y+a*Math.sin(c)}}else{return{x:(r+1)*s,y:(n+1)*o}}});if(r.fit){s.fit(i.padding)}s.one("layoutready",r.ready);s.trigger("layoutready");s.one("layoutstop",r.stop);s.trigger("layoutstop")};t.prototype.stop=function(){};e("layout","breadthfirst",t)})(cytoscape)